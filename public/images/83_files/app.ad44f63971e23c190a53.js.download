webpackJsonp([1],{"../assets/images/img-camera.jpg":function(e,t,n){e.exports=n.p+"_/assets/images/img-camera.jpg?aa30ece45458ddd45270f7c6cf054ccf"},"../assets/scss/main.scss":function(e,t){},"../node_modules/moment/locale recursive en":function(e,t,n){var o={"./en-au":"../node_modules/moment/locale/en-au.js","./en-au.js":"../node_modules/moment/locale/en-au.js","./en-ca":"../node_modules/moment/locale/en-ca.js","./en-ca.js":"../node_modules/moment/locale/en-ca.js","./en-gb":"../node_modules/moment/locale/en-gb.js","./en-gb.js":"../node_modules/moment/locale/en-gb.js","./en-ie":"../node_modules/moment/locale/en-ie.js","./en-ie.js":"../node_modules/moment/locale/en-ie.js","./en-nz":"../node_modules/moment/locale/en-nz.js","./en-nz.js":"../node_modules/moment/locale/en-nz.js"};function r(e){return n(a(e))}function a(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id="../node_modules/moment/locale recursive en"},"./.. recursive ^\\.\\/.*\\/index\\.js$":function(e,t,n){var o={"./src/queue/actions/index.js":"./queue/actions/index.js","./src/queue/components/ExpandedItem/index.js":"./queue/components/ExpandedItem/index.js","./src/queue/components/ExpandedQueue/index.js":"./queue/components/ExpandedQueue/index.js","./src/queue/components/MinimizedQueue/index.js":"./queue/components/MinimizedQueue/index.js","./src/queue/components/PreviewCanvas/index.js":"./queue/components/PreviewCanvas/index.js","./src/queue/components/PreviewImage/index.js":"./queue/components/PreviewImage/index.js","./src/queue/components/QueueView/index.js":"./queue/components/QueueView/index.js","./src/queue/reducers/index.js":"./queue/reducers/index.js","./src/queue/routes/index.js":"./queue/routes/index.js","./src/queue/selectors/index.js":"./queue/selectors/index.js","./src/queue/translations/index.js":"./queue/translations/index.js","./src/root/actions/index.js":"./root/actions/index.js","./src/root/components/AdvancedOptions/index.js":"./root/components/AdvancedOptions/index.js","./src/root/components/App/index.js":"./root/components/App/index.js","./src/root/components/Button/index.js":"./root/components/Button/index.js","./src/root/components/DefaultPanel/index.js":"./root/components/DefaultPanel/index.js","./src/root/components/Dropdown/index.js":"./root/components/Dropdown/index.js","./src/root/components/Footer/index.js":"./root/components/Footer/index.js","./src/root/components/GridWaypoint/index.js":"./root/components/GridWaypoint/index.js","./src/root/components/LinksBar/index.js":"./root/components/LinksBar/index.js","./src/root/components/NoResults/index.js":"./root/components/NoResults/index.js","./src/root/components/Notification/index.js":"./root/components/Notification/index.js","./src/root/components/PoweredBy/index.js":"./root/components/PoweredBy/index.js","./src/root/components/ProgressIndicator/index.js":"./root/components/ProgressIndicator/index.js","./src/root/components/ResponsiveWidthMonitor/index.js":"./root/components/ResponsiveWidthMonitor/index.js","./src/root/components/ResultImageGrid/GridTile/index.js":"./root/components/ResultImageGrid/GridTile/index.js","./src/root/components/ResultImageGrid/index.js":"./root/components/ResultImageGrid/index.js","./src/root/components/RouteWithSubRoutes/index.js":"./root/components/RouteWithSubRoutes/index.js","./src/root/components/SearchBox/index.js":"./root/components/SearchBox/index.js","./src/root/components/SelectedCounter/index.js":"./root/components/SelectedCounter/index.js","./src/root/components/ServiceLoginIntro/index.js":"./root/components/ServiceLoginIntro/index.js","./src/root/components/SvgIcon/index.js":"./root/components/SvgIcon/index.js","./src/root/components/TabFooter/index.js":"./root/components/TabFooter/index.js","./src/root/components/TabHeader/index.js":"./root/components/TabHeader/index.js","./src/root/components/TabTitle/index.js":"./root/components/TabTitle/index.js","./src/root/components/TaggedInput/index.js":"./root/components/TaggedInput/index.js","./src/root/components/TopErrorBoundary/index.js":"./root/components/TopErrorBoundary/index.js","./src/root/components/TopMenu/index.js":"./root/components/TopMenu/index.js","./src/root/components/UploadContainer/index.js":"./root/components/UploadContainer/index.js","./src/root/components/UserBlock/index.js":"./root/components/UserBlock/index.js","./src/root/hocs/ModalWrapper/index.js":"./root/hocs/ModalWrapper/index.js","./src/root/reducers/index.js":"./root/reducers/index.js","./src/root/selectors/index.js":"./root/selectors/index.js","./src/root/translations/index.js":"./root/translations/index.js","./src/routing/index.js":"./routing/index.js","./src/services/index.js":"./services/index.js","./src/store/index.js":"./store/index.js","./src/tabs/Camera/actions/index.js":"./tabs/Camera/actions/index.js","./src/tabs/Camera/index.js":"./tabs/Camera/index.js","./src/tabs/Camera/reducers/index.js":"./tabs/Camera/reducers/index.js","./src/tabs/Camera/routes/index.js":"./tabs/Camera/routes/index.js","./src/tabs/Camera/selectors/index.js":"./tabs/Camera/selectors/index.js","./src/tabs/Camera/service/index.js":"./tabs/Camera/service/index.js","./src/tabs/Camera/translations/index.js":"./tabs/Camera/translations/index.js","./src/tabs/Dropbox/actions/index.js":"./tabs/Dropbox/actions/index.js","./src/tabs/Dropbox/components/Breadcrumb/index.js":"./tabs/Dropbox/components/Breadcrumb/index.js","./src/tabs/Dropbox/components/ContextItems/index.js":"./tabs/Dropbox/components/ContextItems/index.js","./src/tabs/Dropbox/components/FolderList/FileRow/index.js":"./tabs/Dropbox/components/FolderList/FileRow/index.js","./src/tabs/Dropbox/components/FolderList/FolderRow/index.js":"./tabs/Dropbox/components/FolderList/FolderRow/index.js","./src/tabs/Dropbox/components/FolderList/index.js":"./tabs/Dropbox/components/FolderList/index.js","./src/tabs/Dropbox/index.js":"./tabs/Dropbox/index.js","./src/tabs/Dropbox/reducers/index.js":"./tabs/Dropbox/reducers/index.js","./src/tabs/Dropbox/routes/index.js":"./tabs/Dropbox/routes/index.js","./src/tabs/Dropbox/selectors/index.js":"./tabs/Dropbox/selectors/index.js","./src/tabs/Dropbox/service/index.js":"./tabs/Dropbox/service/index.js","./src/tabs/Dropbox/translations/index.js":"./tabs/Dropbox/translations/index.js","./src/tabs/Facebook/actions/index.js":"./tabs/Facebook/actions/index.js","./src/tabs/Facebook/components/AlbumBar/index.js":"./tabs/Facebook/components/AlbumBar/index.js","./src/tabs/Facebook/components/ContextPhotos/index.js":"./tabs/Facebook/components/ContextPhotos/index.js","./src/tabs/Facebook/index.js":"./tabs/Facebook/index.js","./src/tabs/Facebook/reducers/index.js":"./tabs/Facebook/reducers/index.js","./src/tabs/Facebook/routes/index.js":"./tabs/Facebook/routes/index.js","./src/tabs/Facebook/selectors/index.js":"./tabs/Facebook/selectors/index.js","./src/tabs/Facebook/service/index.js":"./tabs/Facebook/service/index.js","./src/tabs/Facebook/translations/index.js":"./tabs/Facebook/translations/index.js","./src/tabs/GoogleDrive/actions/index.js":"./tabs/GoogleDrive/actions/index.js","./src/tabs/GoogleDrive/components/ContextItems/index.js":"./tabs/GoogleDrive/components/ContextItems/index.js","./src/tabs/GoogleDrive/index.js":"./tabs/GoogleDrive/index.js","./src/tabs/GoogleDrive/reducers/index.js":"./tabs/GoogleDrive/reducers/index.js","./src/tabs/GoogleDrive/routes/index.js":"./tabs/GoogleDrive/routes/index.js","./src/tabs/GoogleDrive/selectors/index.js":"./tabs/GoogleDrive/selectors/index.js","./src/tabs/GoogleDrive/service/index.js":"./tabs/GoogleDrive/service/index.js","./src/tabs/GoogleDrive/translations/index.js":"./tabs/GoogleDrive/translations/index.js","./src/tabs/ImageSearch/actions/index.js":"./tabs/ImageSearch/actions/index.js","./src/tabs/ImageSearch/index.js":"./tabs/ImageSearch/index.js","./src/tabs/ImageSearch/reducers/index.js":"./tabs/ImageSearch/reducers/index.js","./src/tabs/ImageSearch/routes/index.js":"./tabs/ImageSearch/routes/index.js","./src/tabs/ImageSearch/selectors/index.js":"./tabs/ImageSearch/selectors/index.js","./src/tabs/ImageSearch/service/index.js":"./tabs/ImageSearch/service/index.js","./src/tabs/ImageSearch/translations/index.js":"./tabs/ImageSearch/translations/index.js","./src/tabs/Instagram/actions/index.js":"./tabs/Instagram/actions/index.js","./src/tabs/Instagram/components/ContextItems/index.js":"./tabs/Instagram/components/ContextItems/index.js","./src/tabs/Instagram/index.js":"./tabs/Instagram/index.js","./src/tabs/Instagram/reducers/index.js":"./tabs/Instagram/reducers/index.js","./src/tabs/Instagram/routes/index.js":"./tabs/Instagram/routes/index.js","./src/tabs/Instagram/selectors/index.js":"./tabs/Instagram/selectors/index.js","./src/tabs/Instagram/service/index.js":"./tabs/Instagram/service/index.js","./src/tabs/Instagram/translations/index.js":"./tabs/Instagram/translations/index.js","./src/tabs/Local/components/UploadButton/index.js":"./tabs/Local/components/UploadButton/index.js","./src/tabs/Local/index.js":"./tabs/Local/index.js","./src/tabs/Local/routes/index.js":"./tabs/Local/routes/index.js","./src/tabs/Local/selectors/index.js":"./tabs/Local/selectors/index.js","./src/tabs/Local/translations/index.js":"./tabs/Local/translations/index.js","./src/tabs/URL/index.js":"./tabs/URL/index.js","./src/tabs/URL/routes/index.js":"./tabs/URL/routes/index.js","./src/tabs/URL/translations/index.js":"./tabs/URL/translations/index.js","./src/uploader/index.js":"./uploader/index.js","./src/uploader/store/index.js":"./uploader/store/index.js"};function r(e){return n(a(e))}function a(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}r.keys=function(){return Object.keys(o)},r.resolve=a,e.exports=r,r.id="./.. recursive ^\\.\\/.*\\/index\\.js$"},"./appConfig.js":function(e,t,n){"use strict";var o=n("../node_modules/lodash/fp.js"),r=n("./utils/envUtils.js"),a=n("./common/logger.js"),s={logLevel:a.a.ERROR,notifications:{timeout:3e3},ui:{responsiveWidth:"768px"},api:{widgetBase:"https://widget.cloudinary.com/",info:"info",uploadBase:"https://api.cloudinary.com/",uploadVersion:"v1_1/",upload:"upload",widgetAuth:"v2.0/global/auth/index.html",devAuthDomains:[]},upload:{cors:"/cloudinary_cors.html",maxImageSize:4e7,minChunkSize:5242880,maxChunkSize:2e7},google:{cx:"016831625641068449605:-e0gosfo6bg",searchBase:"https://www.googleapis.com/",searchPath:"customsearch/v1",searchItemsLimit:10,resultsMaxLimit:101,drive:{jsApi:"https://apis.google.com/js/api.js?onload=googleDriveCheckAuth",clientId:"124980147196-6pln31lupl374tjgg6ubg1jdohh37reg.apps.googleusercontent.com",pageSize:10,scopes:["https://www.googleapis.com/auth/drive.photos.readonly"]}},facebook:{appId:"2026152450945878",sdk:"https://connect.facebook.net/en_US/sdk.js",version:"v2.7"},dropbox:{clientId:"dg5sop6irbeg8ta",maxResults:10},instagram:{clientId:"ddf49b3fd1b8474c8f704713b15a7a87",authUrl:"https://api.instagram.com/oauth/authorize/",maxResults:10}},i={logLevel:a.a.LOG,api:{uploadBase:"//api-dev.cloudinary.com/",widgetAuth:"global/auth/index.html",devAuthDomains:["localhost","widget-dev.cloudinary.com"],cloudInfo:"https://widget-info.cloudinary.com/cloudInfo"},upload:{callbackUrl:"https://widget.cloudinary.com/v2.0/cloudinary_cors.html"},facebook:{sdk:"https://connect.facebook.net/en_US/sdk/debug.js"}},c=Object(r.a)(),u={development:i,staging:{api:{uploadBase:"https://staging-api.cloudinary.com/",widgetBase:"https://widget-staging.cloudinary.com/"}},production:{google:{drive:{clientId:"680300757358-rs1s18mqn7t3sd783eq24gc1ghd473ju.apps.googleusercontent.com"}},facebook:{appId:"1803062876599883",sdk:"https://connect.facebook.net/en_US/sdk.js"},dropbox:{clientId:"981xsfu2dl846i2"},instagram:{clientId:"68dd42b5e2e34365be4162252399cc6c"}}};t.a=Object(o.merge)(s,u[c]||u.development)},"./base.scss":function(e,t){},"./common/actionsBase.js":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"a",function(){return u});var o=n("../node_modules/redux/es/index.js"),r=n("../node_modules/lodash/isFunction.js"),a=n.n(r),s=function(e,t,n){return{type:e,payload:a()(t[e])?t[e].apply(t,n):n[0]}},i=function(e){return function(t){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n=e,(Array.isArray(t)?t:[[t,o]]).forEach(function(e){return n({type:e[0],payload:e[1]})})}},c=function(e){var t=function(){for(var t=arguments.length,n=Array(t),o=0;o<t;o++)n[o]=arguments[o];return function(t,o){return e.apply(void 0,n.concat([t,o,i(t)]))}};return t._customAC=!0,t},u=function(e){return function(t){return Object.keys(e).reduce(function(n,o){return n[o]=e[o](t),n},{})}};t.d=function(e,t){return n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.values(e).reduce(function(e,n){return e[n]=t&&t[n]||!0,e},{})}(e,t),function(e){return Object(o.bindActionCreators)(Object.keys(n).reduce(function(e,t){return e[t]=function(){for(var e=arguments.length,o=Array(e),r=0;r<e;r++)o[r]=arguments[r];return!0===n[t]._customAC?n[t].apply(n,o):s(t,n,o)},e},{}),e)};var n}},"./common/consts.js":function(e,t,n){"use strict";t.a={WIDGET_VIEW_TYPES:{INITIAL:1,EXPANDED:2,SMALL:4,MINI:8},NOTIFICATION_TYPES:{WARNING:1,ERROR:2},QUEUE:"queue"}},"./common/i18n.js":function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"c",function(){return l});var o=n("../node_modules/i18next/dist/es/index.js"),r=n("./utils/envUtils.js"),a=n("./common/logger.js"),s=Object(a.b)(),i=Object(r.d)("TRANSLATIONS",!0),c=void 0,u=function(e,t){return c.changeLanguage(e,function(n){n?s.error("[i18n]: encountered error changing language! ",n):s.log("[i18n]: successfully change language to: "+e),t&&t(n)})},l=function(e,t){~c.languages[e]?u(e,t):c.loadLanguages([e],function(n){n?s.error("[i18n]: failed to load language: "+e):u(e,t)})},d=function(e){Object.keys(e).forEach(function(t){s.log("[i18n]: adding resources for language: "+t),c.addResourceBundle(t,"translation",e[t],!0,!0)})};(c=o.a.createInstance()).init({lng:"en",fallbackLng:"en",resources:i,defaultNS:"translation"},function(e){e&&s.error("[i18n]: encountered error while initializing languages! ",e)});t.b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c.t(e,t)}},"./common/logger.js":function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"c",function(){return d}),n.d(t,"d",function(){return p});var o=self.console,r=Object.freeze({NONE:0,ERROR:1,WARN:2,INFO:3,LOG:4}),a=["error","warn","info","log"],s=void 0!==o&&void 0!==o.log&&void 0!==o.error&&void 0!==o.debug&&void 0!==o.warn&&"function"==typeof Function.prototype.apply,i=void 0,c=void 0,u=function(e,t,n,r){return o[t]?n?o[t](n):o[t]():e.log("----------- "+(n||r)+" ----------- ")},l=function(e){var t=e.level,n={};return n.setLevel=function(e){return t=e,n},n.getLevel=function(){return t||i},a.forEach(function(e){n[e]=function(){for(var t=arguments.length,r=Array(t),i=0;i<t;i++)r[i]=arguments[i];return function(e,t,n){if(s){var r=a.indexOf(t),i=e.getLevel();return~r&&i>=r+1&&o[t].apply(o,n),e}}(n,e,r)}}),n.groupCollapsed=function(e){return u(n,"groupCollapsed",e,"GROUP START")},n.group=function(e){return u(n,"group",e,"GROUP START")},n.groupEnd=function(){return u(n,"groupEnd",null,"GROUP END")},n.debug=n.log,n},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.level=e.level||r.NONE;var t=e.newInstance||!c?l(e):c;return c||e.newInstance||(c=t),t},p=function(e){return i=e};t.b=d},"./common/reducerBase.js":function(e,t,n){"use strict";n.d(t,"b",function(){return s});var o=n("../node_modules/lodash/isFunction.js"),r=n.n(o),a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t,n){return e.forEach(function(e){var o=n?n(t,e):t.indexOf(e);t=~o?t.set(o,e):t.concat(e)}),t};t.a=function(e,t){return function(n,o){return t[o.type]?r()(t[o.type])?t[o.type](n||e,o):function(e,t){throw"Reducer must provide a function only per type, \n                found "+a(e[t.type])+" for type: "+t.type}(t,o):n||e}}},"./queue/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return r});var o=n("./common/actionsBase.js"),r={};t.default=Object(o.d)(r)},"./queue/components/ExpandedItem/ExpandedItem.scss":function(e,t){},"./queue/components/ExpandedItem/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("./common/i18n.js"),c=n("./common/logger.js"),u=Object(c.b)(),l=["b","k","m","g","t"],d=function(e){var t,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,r="na",a=e;if(e&&e>0)try{var s=(t=parseInt(e),n=1024,Math.floor(Math.log(t)/Math.log(n)));r=l[s],s>0&&(a=parseFloat((e/Math.pow(1024,s)).toFixed(o)))}catch(t){u.error("[fileUtils]: failed to parse bytes ("+e+") into file size",t)}return{text:r,size:a}},p=n("../node_modules/lodash/throttle.js"),f=n.n(p),m=(n("./root/components/Trunc/Trunc.types.js"),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"end",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"...",a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:5;return new Promise(function(s){var i=t;e.innerText=i;var c,u,l,d=(c=n,("normal"===(l=b(u=e,"line-height"))?1.2*parseInt(b(u,"font-size")):parseInt(l))*c),p=i.length,f=0,m=Math.floor(p/2),E=Math.floor(p/2)+1,_=function(){return Math.max(e.scrollHeight,e.offsetHeight,e.clientHeight)-a};function b(e,t){return window.getComputedStyle(e,null).getPropertyValue(t)}function g(){e.innerText=i.slice(f,p)}function h(){var t=i.slice(f,m),n=i.slice(E,p);e.innerText=t+n}var O={end:function(){for(p--;p>f&&_()>=d;)p=Math.floor(p/2),g();for(;_()<=d;)p++,g();return p--,p-=r.length,g(),e.innerText=e.innerText||"",e.innerText=e.innerText+r,e.innerText},start:function(){for(;p>f&&_()>=d;)f=Math.ceil((p+f)/2),g();for(;_()<=d;)f--,g();return f++,f+=r.length,g(),e.innerText=e.innerText||"",e.innerText=r+e.innerText,e.innerText},middle:function(){for(;p>f&&m>f&&p>E&&_()>=d;)m=Math.floor(m/2),E=Math.ceil((p+E)/2),h();for(var t=0;_()<=d;)t%2==0?m++:E--,h(),t++;t%2!=0?m--:E++,m-=Math.ceil(r.length/2),E+=Math.floor(r.length/2),h();var n=i.slice(f,m),o=i.slice(E,p);return e.innerText=e.innerText||"",e.innerText=n+r+o,e.innerText}},S=_()>d?O[o]():i;s({text:S,truncated:S!==i})})});n("./root/components/Trunc/Trunc.scss");function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var _=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=E(this,e.call.apply(e,[this].concat(a))),o.handleResize=function(){o.handleLongText()},o.throttled=f()(o.handleResize),o.longTextWrapper=null,E(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.handleLongText(),this.longTextWrapper&&window.addEventListener("resize",this.throttled,!1)},t.prototype.componentDidUpdate=function(e){e.longText!==this.props.longText&&this.handleLongText()},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.throttled,!1)},t.prototype.handleLongText=function(){var e,t=(e=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.longTextWrapper){e.next=5;break}return e.next=3,m(this.longTextWrapper,this.props.longText,this.props.lines,this.props.truncFrom,this.props.ellipsis);case 3:t=e.sent,this.props.onTruncate&&this.props.onTruncate(t);case 5:case"end":return e.stop()}},e,this)}),function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})});return function(){return t.apply(this,arguments)}}(),t.prototype.render=function(){var e=this;return r.a.createElement("span",{className:"trunc-wrapper",ref:function(t){e.longTextWrapper=t}},this.props.longText)},t}(r.a.Component),b=n("./queue/components/PreviewImage/index.js"),g=n("./queue/components/PreviewCanvas/index.js"),h=Object.freeze({IMAGE:"img",AUDIO:"audio",VIDEO:"video",TXT:"doc"}),O=Object.freeze({jpg:h.IMAGE,jpeg:h.IMAGE,gif:h.IMAGE,png:h.IMAGE,pdf:h.IMAGE,mp4:h.VIDEO,mov:h.VIDEO,mp3:h.AUDIO,doc:h.TXT,docx:h.TXT,bmp:h.IMAGE,ico:h.IMAGE,tiff:h.IMAGE,eps:h.IMAGE,jpc:h.IMAGE,jp2:h.IMAGE,psd:h.IMAGE,webp:h.IMAGE,svg:h.IMAGE,wdp:h.IMAGE,hpx:h.IMAGE,djvu:h.IMAGE,ai:h.IMAGE,flif:h.IMAGE,bpg:h.IMAGE,miff:h.IMAGE,tga:h.IMAGE,css:h.TXT,js:h.TXT,zip:h.TXT,aac:h.AUDIO,ogg:h.AUDIO,m4a:h.AUDIO,wav:h.AUDIO,aiff:h.AUDIO,flac:h.AUDIO,avi:h.VIDEO,"3gp":h.VIDEO,"3g2":h.VIDEO,wmv:h.VIDEO,mpeg:h.VIDEO,mkv:h.VIDEO,webm:h.VIDEO,ogv:h.VIDEO,flv:h.VIDEO,m3u8:h.VIDEO,ts:h.VIDEO,mpd:h.VIDEO,quicktime:h.VIDEO});n("./queue/components/ExpandedItem/ExpandedItem.scss");n.d(t,"getItemStatus",function(){return v});var S={ERROR:"error",ABORTED:"aborted",UPLOADING:"uploading",DONE:"uploaded"},v=function(e){return e.aborted?S.ABORTED:e.failed?S.ERROR:e.done?S.DONE:S.UPLOADING};t.default=function(e){var t,n,o,a,c=e.item,u=c.getPreviewObject&&c.getPreviewObject(c)||{},l=c.dimensions,p=v(c),f=(n="",(t=c).type?n=t.type.replace(/^.*\//,"").replace(/\+.*$/,"").toUpperCase():t.name&&(n=t.name.replace(/^.*\./,"").replace(/\?.*$/,"").toUpperCase()),n.replace("JPEG","JPG")),m=O[f.toLowerCase()]||"other",E=c.statusText,h=u.preview?r.a.createElement(g.default,{canvas:u.preview}):u.url?r.a.createElement(b.default,{url:u.url,updateDimensions:e.updateDimensions}):null,T=l[0]&&l[1]?l[0]+" X "+l[1]:"",j=h||p===S.ABORTED||p===S.ERROR?"":"no-preview";return r.a.createElement("article",{className:"card-box "+p+" "+m+" "+j},r.a.createElement("span",{className:"box-link"},r.a.createElement("div",{className:"item-holder "+m},h,(a=s()("item-msg","item-msg-error","w-100","text-center","pos-abs","pos-bl","flex","justify-content-center","align-items-center"),p===S.ERROR&&E&&r.a.createElement("span",{className:a,title:E},r.a.createElement("span",null,r.a.createElement(_,{lines:2,longText:E}))))),r.a.createElement("div",{className:"textbox"},r.a.createElement("strong",{className:"title",title:c.name},c.name),r.a.createElement("span",{className:"status"},Object(i.b)("queue.statuses."+p)),r.a.createElement("div",{className:"progress"},r.a.createElement("span",{className:"progress-img prog-"+(c.progress>0&&c.progress<20?0:20*Math.floor(c.progress/20))}),r.a.createElement("span",{className:"btn-cross",onClick:function(){return e.abort(c.id)}}," ")),r.a.createElement("span",{className:"ico-retry",onClick:function(){return e.retryFailed(c.id)}}," "),r.a.createElement("ul",{className:"info"},r.a.createElement("li",{className:"formate"},r.a.createElement("span",{className:"icon"}," "),f.substr(0,8)),r.a.createElement("li",{className:"weight"},(o=d(c.size),Object(i.b)("queue.filesize."+o.text,o))),r.a.createElement("li",{className:"size"},T)))))}},"./queue/components/ExpandedQueue/ExpandedQueue.scss":function(e,t){},"./queue/components/ExpandedQueue/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ExpandedQueue",function(){return h});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("../node_modules/reselect/lib/index.js"),u=(n.n(c),n("../node_modules/classnames/index.js")),l=n.n(u),d=n("./common/consts.js"),p=n("./common/i18n.js"),f=n("./common/actionsBase.js"),m=n("./root/actions/index.js"),E=n("./root/components/Footer/index.js"),_=n("./queue/selectors/index.js"),b=n("./queue/components/ExpandedItem/index.js"),g=n("./queue/components/ExpandedQueue/ExpandedQueue.scss"),h=(n.n(g),function(e,t){var n=l()("top-progress-icon",{done:e.queueCounters.isDone,active:!e.queueCounters.isDone}),o=e.queueCounters.isDone?Object(p.b)("queue.title"):e.queueCounters.isSimulated?Object(p.b)("queue.title_uploading"):Object(p.b)("queue.title_uploading_with_counter",{num:e.queueCounters.active}),a=!!e.queueCounters.failed,s=!!e.queueCounters.done,i=function(){},c=function(){return e.rootActions[m.types.SET_QUEUE_ITEMS_RETRY]()},u=function(t){return e.rootActions[m.types.SET_QUEUE_ITEMS_RETRY]({ids:[t]})},f=function(t){return e.rootActions[m.types.SET_QUEUE_ITEMS_ABORT]({ids:[t]})};return r.a.createElement("div",{className:"uploading-dialog expanded-active"},r.a.createElement("div",{className:"expanded-block"},r.a.createElement("header",{className:"head"},r.a.createElement("div",{className:"progress"},r.a.createElement("span",{className:n})),r.a.createElement("strong",{className:"title"},o),r.a.createElement("div",{className:"addition-links"}),r.a.createElement("button",{type:"button",className:"btn-close",onClick:function(){e.rootActions[m.types.DO_CLOSE_WIDGET]()}}," "),r.a.createElement("button",{type:"button",className:"btn-exitscreen",onClick:function(){return e.rootActions[m.types.SET_WIDGET_VIEW_TYPE]({type:d.a.WIDGET_VIEW_TYPES.MINI})}}," ")),r.a.createElement("div",{className:"popup-body"},r.a.createElement("div",{className:"popup-body"},r.a.createElement("div",{className:"main-content"},r.a.createElement("div",{className:"main-holder"},e.queueItems.map(function(e){return r.a.createElement(b.default,{key:"q_ex_item_"+e.id,item:e,updateDimensions:i,retryFailed:u,abort:f})}))))),r.a.createElement(E.default,{footerClassName:"flex"},r.a.createElement("div",{className:"status-links flex justify-content-end align-items-center w-100"},e.queueCounters.active?r.a.createElement("button",{type:"button",className:"btn-cancel btn btn-sm btn-clear ml-3",onClick:function(){return e.rootActions[m.types.SET_QUEUE_ITEMS_ABORT]()}},r.a.createElement("span",{className:"flex align-items-center"},r.a.createElement("i",{className:"icon icon-xs icon-cancel mr-2"}),Object(p.b)("queue.abort_all"))):null,a&&r.a.createElement("button",{type:"button",className:"btn-retry btn btn-sm btn-clear ml-3",onClick:c},r.a.createElement("span",{className:"flex align-items-center"},r.a.createElement("i",{className:"icon icon-xs icon-retry mr-2"}),Object(p.b)("queue.retry_failed"))),e.showCompletedButton&&s&&r.a.createElement("button",{type:"button",className:"btn-completed btn btn-sm btn-clear ml-3",onClick:function(){return e.showCompleted(e.completedIds)}},r.a.createElement("span",{className:"flex align-items-center"},r.a.createElement("i",{className:"icon icon-xs icon-completed mr-2"}),Object(p.b)("queue.show_completed"))),r.a.createElement("button",{type:"button",onClick:function(){e.rootActions[m.types.SET_WIDGET_VIEW_TYPE]({type:d.a.WIDGET_VIEW_TYPES.INITIAL,router:t.router})},className:"btn btn-lg btn-special ml-3"},r.a.createElement("span",{className:"flex align-items-center"},r.a.createElement("i",{className:"icon icon-sm icon-upload mr-2"}),Object(p.b)("queue.upload_more")))))))});h.contextTypes={router:s.a.object},t.default=Object(i.b)(Object(c.createStructuredSelector)({queueItems:_.selectUploadQueueItemsSorted,completedIds:_.selectCompletedIds,queueCounters:_.selectQueueCounters,showCompletedButton:_.selectShowCompletedButton}),Object(f.a)({rootActions:m.default}))(h)},"./queue/components/MinimizedQueue/MinimizedQueue.scss":function(e,t){},"./queue/components/MinimizedQueue/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MinimizedQueue",function(){return _});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("../node_modules/classnames/index.js")),c=n.n(i),u=n("./common/consts.js"),l=n("./common/actionsBase.js"),d=n("./common/i18n.js"),p=n("./utils/domUtils.js"),f=n("./root/actions/index.js"),m=n("./queue/selectors/index.js"),E=n("./queue/components/MinimizedQueue/MinimizedQueue.scss"),_=(n.n(E),function(e){var t,n,o=e.queueCounters.isDone?Object(d.b)("queue.mini_title"):Object(d.b)("queue.mini_title_uploading"),a=!(!e.queueCounters.done||!e.queueCounters.failed),s={narrow:a,wide:!a},i=function(){return e.rootActions[f.types.SET_QUEUE_ITEMS_RETRY]()},l=function(){Object(p.c)()||e.rootActions[f.types.SET_WIDGET_VIEW_TYPE]({type:u.a.WIDGET_VIEW_TYPES.EXPANDED,userAction:!0})};return r.a.createElement("div",{className:"uploading-dialog mini-progress"},r.a.createElement("div",{className:"uploading-status"},r.a.createElement("button",{type:"button",className:"btn-close",onClick:function(){e.rootActions[f.types.DO_CLOSE_WIDGET]()}}," "),Object(p.c)()?null:r.a.createElement("button",{type:"button",className:"btn-fullscreen",onClick:l}," "),r.a.createElement("div",{className:"status-list"},r.a.createElement("ul",null,function(){var t=null;if(e.queueCounters.hasActive){var n=c()("uploading",s),a=c()("top-progress-icon",{done:e.queueCounters.isDone,active:!e.queueCounters.isDone});t=r.a.createElement("li",{className:n,onClick:l},r.a.createElement("div",{className:"progress"},r.a.createElement("span",{className:a})),o)}return t}(),(t=c()("done",s),n=null,e.queueCounters.isDone&&(n=r.a.createElement("li",{className:t,onClick:l},r.a.createElement("div",{className:"ico-cloud"}),Object(d.b)("queue.statuses.uploaded"))),n),e.queueCounters.done?e.showCompletedButton?r.a.createElement("li",{className:"uploaded",onClick:function(){return e.showCompleted(e.completedIds)}},Object(d.b)("queue.mini_upload_count",{num:e.queueCounters.done}),r.a.createElement("span",{className:"icon",title:Object(d.b)("queue.show_completed")})):r.a.createElement("li",{className:"uploaded",onClick:l},Object(d.b)("queue.mini_upload_count",{num:e.queueCounters.done})):null,e.queueCounters.failed?r.a.createElement("li",{className:"failed",onClick:l},Object(d.b)("queue.mini_failed",{num:e.queueCounters.failed}),r.a.createElement("span",{className:"icon",onClick:i})):null))))});t.default=Object(a.b)(Object(s.createStructuredSelector)({completedIds:m.selectCompletedIds,queueCounters:m.selectQueueCounters,showCompletedButton:m.selectShowCompletedButton}),Object(l.a)({rootActions:f.default}))(_)},"./queue/components/PreviewCanvas/PreviewCanvas.scss":function(e,t){},"./queue/components/PreviewCanvas/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/jquery/dist/jquery.js"),s=n.n(a),i=n("./queue/components/PreviewCanvas/PreviewCanvas.scss");n.n(i);function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=c(this,e.call.apply(e,[this].concat(a))),o.holderElm=null,c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){if(this.holderElm){var e=this.holderElm,t=this.props.canvas;setTimeout(function(){s()(e).append(t)},50)}},t.prototype.render=function(){var e=this;return r.a.createElement("span",{className:"preview-canvas-holder",ref:function(t){return e.holderElm=t}})},t}(o.Component);t.default=u},"./queue/components/PreviewImage/PreviewImage.scss":function(e,t){},"./queue/components/PreviewImage/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/jquery/dist/jquery.js"),s=n.n(a),i=n("./uploader/index.js"),c=n("./queue/components/PreviewImage/PreviewImage.scss");n.n(c);function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var l=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=u(this,e.call.apply(e,[this].concat(a))),o.state={loadFailed:!1},o.onImageLoadError=function(){o.setState({loadFailed:!0})},o.imgElm=null,u(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){if(null!==this.imgElm&&this.imgElm){var e=s()(this.imgElm),t=e.width(),n=e.height(),o=i.utils.getPreviewDimensions(),r=null;t<o.W&&n<o.H&&(r=o.LARGE?.3334:.6668,r=Math.min(r*o.W/t,r*o.H/n)),r&&e.css({zoom:r,"-moz-transform":"scale("+r+")","-moz-transform-origin":"0px 0px"}),this.imgElm&&this.props.updateDimensions(this.imgElm.naturalWidth,this.imgElm.naturalHeight)}},t.prototype.render=function(){var e=this;return this.state.loadFailed?r.a.createElement("span",{className:"preview-failed"}):r.a.createElement("img",{src:this.props.url,ref:function(t){return e.imgElm=t},onError:this.onImageLoadError})},t}(o.Component);t.default=l},"./queue/components/QueueView/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"QueueView",function(){return m});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("../node_modules/reselect/lib/index.js"),u=(n.n(c),n("./common/consts.js")),l=n("./root/selectors/index.js"),d=n("./queue/components/ExpandedQueue/index.js"),p=n("./queue/components/MinimizedQueue/index.js");function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=f(this,e.call.apply(e,[this].concat(a))),o.showCompleted=function(e){o.context.uploader.sendShowCompleted(e)},f(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){return this.props.widgetViewType===u.a.WIDGET_VIEW_TYPES.EXPANDED?r.a.createElement(d.default,{showCompleted:this.showCompleted}):r.a.createElement(p.default,{showCompleted:this.showCompleted})},t}(o.Component);m.contextTypes={uploader:s.a.object},t.default=Object(i.b)(Object(c.createStructuredSelector)({widgetViewType:l.selectWidgetViewType}))(m)},"./queue/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./common/reducerBase.js"),r=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),a=n.n(r);n("./queue/actions/index.js"),t.default={queueView:Object(o.a)(a()({}),{})}},"./queue/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./common/consts.js"),r=n("./routing/utils.js"),a=n("./queue/components/QueueView/index.js");t.default=[{path:Object(r.a)(o.a.QUEUE),component:a.default,routes:[]},{}]},"./queue/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectUploadQueueItemsSorted",function(){return s}),n.d(t,"selectQueueCounters",function(){return c}),n.d(t,"selectCompletedIds",function(){return i}),n.d(t,"selectShowCompletedButton",function(){return u});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./root/selectors/index.js")),a=function(e){return e.uploadQueue.queue},s=Object(o.createSelector)(a,function(e){return e}),i=Object(o.createSelector)(a,function(e){return e.reduce(function(e,t){return t.done&&!t.failed?e.concat(t.id):e},[])}),c=Object(o.createSelector)(function(e){return e.uploadQueue},r.getQueueCounters),u=Object(o.createSelector)(r.getWidgetConfig,function(e){return e.show_completed_button})},"./queue/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{queue:{title:"Upload Queue",title_uploading_with_counter:"Uploading {{num}} Assets",title_uploading:"Uploading Assets",mini_title:"Uploaded",mini_title_uploading:"Uploading",show_completed:"Show completed",retry_failed:"Retry failed",abort_all:"Abort all",upload_more:"Upload More",mini_upload_count:"{{num}} Uploaded",mini_failed:"{{num}} Failed",statuses:{uploading:"Uploading...",error:"Error",uploaded:"Done",aborted:"Aborted"},filesize:{na:"N/A",b:"{{size}} Bytes",k:"{{size}} KB",m:"{{size}} MB",g:"{{size}} GB",t:"{{size}} TB"}}}}}},"./root/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,a=n("../node_modules/voca/index.js"),s=n("./appConfig.js"),i=n("./common/consts.js"),c=n("./common/i18n.js"),u=n("./uploader/index.js"),l=n("./utils/domUtils.js"),d=n("./common/actionsBase.js"),p=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),f="SELECTION_MAX_REACHED",m="INVALID_URL",E="ERROR",_="INVALID_PUBLIC_ID",b=n.n(p)()(((o={})[f]={id:f,type:i.a.NOTIFICATION_TYPES.WARNING,text:"notifications.limit_reached"},o[m]={id:m,type:i.a.NOTIFICATION_TYPES.ERROR,text:"notifications.invalid_add_url"},o[E]={id:E,type:i.a.NOTIFICATION_TYPES.ERROR,text:"notifications.general_error"},o[_]={id:_,type:i.a.NOTIFICATION_TYPES.WARNING,text:"notifications.invalid_public_id"},o)),g=n("./root/selectors/index.js");n.d(t,"types",function(){return O});var h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},O={SET_WIDGET_CONFIG:"SET_WIDGET_CONFIG",SET_QUEUE_ITEMS:"SET_QUEUE_ITEMS",SET_QUEUE_ITEMS_RETRY:"SET_QUEUE_ITEMS_RETRY",SET_QUEUE_ITEMS_ABORT:"SET_QUEUE_ITEMS_ABORT",SET_QUEUE_ITEM_PROGRESS:"SET_QUEUE_ITEM_PROGRESS",SET_ACTIVE_SOURCE:"SET_ACTIVE_SOURCE",SET_MAX_SELECT_REACHED:"SET_MAX_SELECT_REACHED",SET_ERROR:"SET_ERROR",SET_IS_RESPONSIVE:"SET_IS_RESPONSIVE",SET_UPLOAD_TAGS:"SET_UPLOAD_TAGS",SET_PUBLIC_ID:"SET_PUBLIC_ID",SET_PUBLIC_ID_INVALID:"SET_PUBLIC_ID_INVALID",SET_WIDGET_SHOWING:"SET_WIDGET_SHOWING",SET_WIDGET_VIEW_TYPE:"SET_WIDGET_VIEW_TYPE",SET_SUGGESTED_TAGS:"SET_SUGGESTED_TAGS",SET_TAGS_INPUT_VALUE:"SET_TAGS_INPUT_VALUE",SET_BATCH_STARTED:"SET_BATCH_STARTED",SET_IS_PREMIUM:"SET_IS_PREMIUM",SET_SUCCESSFUL_COUNTER:"SET_SUCCESSFUL_COUNTER",ADD_UPLOAD_TO_QUEUE:"ADD_UPLOAD_TO_QUEUE",ADD_NOTIFICATION:"ADD_NOTIFICATION",CLEAR_MAX_SELECT_REACHED:"CLEAR_MAX_SELECT_REACHED",CLEAR_NOTIFICATION:"CLEAR_NOTIFICATION",CLEAR_ALL_NOTIFICATIONS:"CLEAR_ALL_NOTIFICATIONS",CLEAR_QUEUE:"CLEAR_QUEUE",CLEAR_ADVANCED_VALUES:"CLEAR_ADVANCED_VALUES",TOGGLE_ADVANCED_OPTIONS:"TOGGLE_ADVANCED_OPTIONS_SHOW",TOGGLE_RESPONSIVE_MENU:"TOGGLE_RESPONSIVE_MENU",DO_CLOSE_WIDGET:"DO_CLOSE_WIDGET",DO_INC_CLOSE_COUNTER:"DO_INC_CLOSE_COUNTER",DO_REGISTER_GLOBAL_KEY_EVENTS:"DO_REGISTER_GLOBAL_KEY_EVENTS",REMOVE_UPLOAD_TAG:"REMOVE_UPLOAD_TAG",REMOVE_LAST_UPLOAD_TAG:"REMOVE_LAST_UPLOAD_TAG"},S=/^([^?&#\\%<>]|%[0-9a-fA-F]{2})*$/i,v={},T=function(e){v[e]&&(v[e](),v[e]=null)},j=function(e,t){Object(d.c)(t)(O.ADD_NOTIFICATION,{notification:e}),T(e.id),v[e.id]=Object(l.a)(function(){return I({id:e.id},t)},s.a.notifications.timeout)},I=function(e,t){var n=e.id;Object(d.c)(t)(O.CLEAR_NOTIFICATION,{id:n}),T(n)},x=/^(https?:\/|data:image)\//i,C=function(e){return!Object(a.isBlank)(e)&&x.test(e)},y=function(e){return Object(d.c)(e)(O.DO_INC_CLOSE_COUNTER)};t.default=Object(d.d)(O,((r={})[O.SET_QUEUE_ITEM_PROGRESS]=function(e,t){return{id:e,info:t}},r[O.ADD_UPLOAD_TO_QUEUE]=Object(d.b)(function(e,t){var n,o=Object(d.c)(t);(n=e).files&&n.files.length&&!~n.files.findIndex(function(e){return Object(a.isString)(e)&&!C(e)||Object(a.isString)(e.file)&&!C(e.file)})?o(O.ADD_UPLOAD_TO_QUEUE,e):j(b[m],t)}),r[O.SET_ERROR]=Object(d.b)(function(e,t){return j(h({},b[E],{text:e.text}),t)}),r[O.SET_MAX_SELECT_REACHED]=Object(d.b)(function(e){return j(b[f],e)}),r[O.CLEAR_MAX_SELECT_REACHED]=Object(d.b)(function(e){return I({id:f},e)}),r[O.CLEAR_NOTIFICATION]=Object(d.b)(function(e,t){return I(e,t)}),r[O.DO_CLOSE_WIDGET]=Object(d.b)(y),r[O.DO_REGISTER_GLOBAL_KEY_EVENTS]=Object(d.b)(function(e,t){var n=Object(g.selectConfigViewType)(t());Object(l.c)()||n!==u.consts.VIEW_TYPES.MODAL||self.addEventListener("keyup",function(t){27===t.which&&y(e)})}),r[O.SET_PUBLIC_ID]=Object(d.b)(function(e,t,n,o){var r=Object(a.trim)(e.value);Object(a.isBlank)(r)||S.test(r)?(I({id:_},t),o([[O.SET_PUBLIC_ID,{value:r}],[O.SET_PUBLIC_ID_INVALID,{isInvalid:!1}]])):(j(b[_],t),o(O.SET_PUBLIC_ID_INVALID,{isInvalid:!0}))}),r[O.SET_WIDGET_VIEW_TYPE]=Object(d.b)(function(e,t,n,o){e.router&&e.type===i.a.WIDGET_VIEW_TYPES.INITIAL&&e.type!==Object(g.selectWidgetViewType)(n())&&e.router.history.goBack(),o(O.SET_WIDGET_VIEW_TYPE,{type:e.type,userAction:e.userAction})}),r[O.SET_WIDGET_CONFIG]=Object(d.b)(function(e,t,n,o){var r=n();e.language&&Object(g.selectConfigLanguage)(r)!==e.language&&c.c(e.language),e.text&&c.a(e.text),o(O.SET_WIDGET_CONFIG,e)}),r[O.CLEAR_ALL_NOTIFICATIONS]=Object(d.b)(function(e){Object.keys(v).forEach(function(t){return I({id:t},e)})}),r))},"./root/components/AdvancedOptions/AdvancedOptions.scss":function(e,t){},"./root/components/AdvancedOptions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AdvancedOptions",function(){return m});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("./common/i18n.js"),u=n("./root/actions/index.js"),l=n("./root/selectors/index.js"),d=n("./root/components/TaggedInput/index.js"),p=n("./root/components/AdvancedOptions/AdvancedOptions.scss");n.n(p);function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=f(this,e.call.apply(e,[this].concat(a))),o.state={suggestionsOpen:!1},o.onPublicIdChange=function(e){o.props[u.types.SET_PUBLIC_ID]({value:e.target.value})},o.onTagsChange=function(e){o.props[u.types.SET_UPLOAD_TAGS]({tags:e})},o.removeTagHandler=function(e){o.props[u.types.REMOVE_UPLOAD_TAG]({index:e})},o.removeLastTagHandler=function(){o.props[u.types.REMOVE_LAST_UPLOAD_TAG]()},o.filterSuggestions=function(e){o.props.useTagsCallback&&o.context.uploader.retrieveClientTags(e)},o.tagsInputChangeHandler=function(e){o.props[u.types.SET_TAGS_INPUT_VALUE]({value:e})},o.reportSuggestionsContainerState=function(e){var t=e===d.SUGGEST_CONTAINER_STATE.OPEN;o.state.suggestionsOpen!==t&&o.setState({suggestionsOpen:t})},f(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=e.setPublicId?"input-error":"",n=this.state.suggestionsOpen?"tags-suggestions-open":"";return r.a.createElement("div",{className:"slide"},r.a.createElement("div",{className:"field id"},r.a.createElement("input",{type:"text",placeholder:Object(c.b)("advanced_options.public_id_ph"),className:t,value:e.setPublicId||"",onChange:this.onPublicIdChange})),r.a.createElement("div",{className:"field tag "+n},r.a.createElement(d.default,{className:"tagsinput",id:"adv-tag-select",placeholder:Object(c.b)("advanced_options.tags_ph"),values:e.setTags,suggestions:e.suggestedTags,changeHandler:this.onTagsChange,inputChangeHandler:this.tagsInputChangeHandler,removeTag:this.removeTagHandler,removeLastTag:this.removeLastTagHandler,filterSuggestions:this.filterSuggestions,inputValue:e.tagsInputValue,reportSuggestionsContainerState:this.reportSuggestionsContainerState})))},t}(o.Component);m.contextTypes={uploader:s.a.object},t.default=Object(i.b)(l.selectAdvancedOptions,u.default)(m)},"./root/components/App/App.scss":function(e,t){},"./root/components/App/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getWidgetViewTypeForUpload",function(){return v}),n.d(t,"App",function(){return T});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-router/es/index.js"),s=n("../node_modules/react-redux/es/index.js"),i=n("../node_modules/reselect/lib/index.js"),c=(n.n(i),n("./common/logger.js")),u=n("./appConfig.js"),l=n("./common/consts.js"),d=n("./uploader/index.js"),p=n("./common/i18n.js"),f=n("./root/actions/index.js"),m=n("./root/selectors/index.js"),E=n("./root/components/TopMenu/index.js"),_=n("./root/components/Notification/index.js"),b=n("./root/components/ResponsiveWidthMonitor/index.js"),g=n("./root/components/ProgressIndicator/index.js"),h=n("./root/components/App/App.scss");n.n(h);function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var S=Object(c.b)(),v=function(e){var t=e.widgetViewType;return t!==l.a.WIDGET_VIEW_TYPES.MINI&&(t=e.autoMinimize&&!e.widgetViewTypeChangeByUser||e.isResponsive?l.a.WIDGET_VIEW_TYPES.MINI:l.a.WIDGET_VIEW_TYPES.EXPANDED),t},T=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,s=Array(a),i=0;i<a;i++)s[i]=arguments[i];return n=o=O(this,e.call.apply(e,[this].concat(s))),o.clearNotification=function(){return o.props.notification&&o.props[f.types.CLEAR_NOTIFICATION]({id:o.props.notification.id})},o.renderNotification=function(){return o.props.notification&&r.a.createElement(_.default,{text:Object(p.b)(o.props.notification.text),type:o.props.notification.type,removeHandler:o.clearNotification})},o.renderCloseButton=function(){return o.props.configViewType===d.consts.VIEW_TYPES.MODAL?r.a.createElement("button",{type:"button",className:"btn-close-popup",onClick:function(){return o.props[f.types.DO_CLOSE_WIDGET]()}}," "):null},o.renderAppContent=function(){return o.props.cloudName?[r.a.createElement(E.default,{key:"app_top_menu"}),o.props.children]:[r.a.createElement(g.default,{key:"app_pi"})]},O(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[f.types.DO_REGISTER_GLOBAL_KEY_EVENTS]()},t.prototype.componentWillReceiveProps=function(e){if(e.batchStartCounter&&e.batchStartCounter>this.props.batchStartCounter){var t=v(e);S.log("[App]: dispatching widget type on batch start with val: "+t),this.props[f.types.SET_WIDGET_VIEW_TYPE]({type:t})}},t.prototype.render=function(){var e=~this.props.location.pathname.indexOf(l.a.QUEUE)?"queue-enabled":"",t=this.props.isMultiple?"multiple_enabled":"";return r.a.createElement(b.default,{query:"(max-width: "+u.a.ui.responsiveWidth+")"},r.a.createElement("div",{className:"widget upload-popup "+e+" "+t,"data-language":this.props.language},r.a.createElement("div",{className:"popup-wrap"},r.a.createElement("div",{className:"popup-box"},this.renderNotification(),this.renderCloseButton(),this.renderAppContent()))))},t}(o.Component);t.default=Object(a.d)(Object(s.b)(Object(i.createStructuredSelector)({isMultiple:m.selectIsMultipleEnabled,configViewType:m.selectConfigViewType,notification:m.selectNotification,cloudName:m.selectCloudName,batchStartCounter:m.selectBatchStartCounter,widgetViewType:m.selectWidgetViewType,isResponsive:m.selectIsResponsiveWidth,autoMinimize:m.selectAutoMinimizeConfig,widgetViewTypeChangeByUser:m.selectWidgetViewTypeChangeByUser,language:m.selectConfigLanguage}),f.default)(T))},"./root/components/Button/Button.scss":function(e,t){},"./root/components/Button/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"BTN_COLORS",function(){return s});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/Button/Button.scss"),s=(n.n(a),{BLUE:"btn-blue",ORANGE:"btn-orange",GRAY:"btn-gray"}),i=function(e){var t=e.text,n=e.color,o=e.className,a=e.onClick;return r.a.createElement("span",{className:"button "+(n||"")+" "+(o||""),onClick:a},t)};i.defaultProps={className:"",onClick:null,color:s.BLUE},t.default=i},"./root/components/DefaultPanel/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DefaultPanel",function(){return p});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/react-router/es/index.js"),i=n("./routing/navItems.js"),c=n("./tabs/Local/index.js"),u=n("./common/logger.js"),l=n("./root/selectors/index.js"),d=Object(u.c)(),p=function(e){var t,n,o,a=void 0;if((o=e).defaultSource&&o.route.match&&o.route.match.isExact){var u=(t=Object(i.a)(),n=e.defaultSource,t.find(function(e){return e.id===n})||t[0]);d.log("[DefaultPanel]: redirecting to default panel with path: "+u.path),a=r.a.createElement(s.a,{to:u.path})}else a=r.a.createElement(c.default,{route:e.route});return a};t.default=Object(a.b)(l.selectDefaultSource)(p)},"./root/components/Dropdown/Dropdown.scss":function(e,t){},"./root/components/Dropdown/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/voca/index.js"),s=(n.n(a),n("./root/hocs/ModalWrapper/index.js")),i=n("./root/components/Dropdown/Dropdown.scss");n.n(i);function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=c(this,e.call.apply(e,[this].concat(a))),o.state={isOpen:!1},o.onItemClick=function(e,t){o.toggleDropdown(null,null,!1),o.props.itemClickHandler&&o.props.itemClickHandler(e,t)},o.toggleDropdown=function(e,t,n){o.setState({isOpen:void 0!==n?!!n:!o.state.isOpen})},c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.isOpen=function(){return this.state.isOpen},t.prototype.renderItems=function(){var e=this;return this.props.items.map(function(t,n){var o=Object(a.isString)(t)?t:t.text;return r.a.createElement("li",{key:"dd_"+o,className:e.props.selectedIndex===n?"active":""},r.a.createElement("span",{className:"link",onClick:function(){return e.onItemClick(t,n)}},o))})},t.prototype.renderTitle=function(){var e=this.props.title,t=(this.props.selectedIndex||0===this.props.selectedIndex)&&~this.props.selectedIndex;return!this.isOpen()&&this.props.showSelectionInTitle&&t&&(e=this.props.items[this.props.selectedIndex],e=Object(a.isString)(e)?e:e.text),e},t.prototype.renderDropdown=function(){var e=this.props.className||"";return r.a.createElement("div",{className:"dropdown usage-box "+e+" "+(this.state.isOpen?"drop-active":"")},r.a.createElement("button",{type:"button",className:"btn-usage",onClick:this.toggleDropdown},this.renderTitle()),r.a.createElement("ul",null,this.renderItems()))},t.prototype.renderModalDropDown=function(){var e=this,t=Object(s.default)({handleShouldHide:function(){return e.toggleDropdown(null,null,!1)}})(this.renderDropdown());return r.a.createElement(t,null)},t.prototype.render=function(){return this.isOpen()?this.renderModalDropDown():this.renderDropdown()},t}(o.Component);u.defaultProps={selectedIndex:-1,className:"",showSelectionInTitle:!0,itemClickHandler:null},t.default=u},"./root/components/Footer/Footer.scss":function(e,t){},"./root/components/Footer/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Footer",function(){return l});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("./root/selectors/index.js")),c=n("./root/components/PoweredBy/index.js"),u=n("./root/components/Footer/Footer.scss"),l=(n.n(u),function(e){var t=e.showPoweredBy?r.a.createElement(c.default,null):null;return r.a.createElement("footer",{className:"foot "+(t?"with-powered-by":"")+" "+(e.footerClassName||"")},t,e.children)});t.default=Object(a.b)(Object(s.createStructuredSelector)({showPoweredBy:i.selectShowPoweredBy}))(l)},"./root/components/GridWaypoint/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-waypoint/cjs/index.js"),s=n.n(a),i=function(e){var t=e.waypointAction,n=e.bottomOffset;return r.a.createElement(s.a,{onEnter:t,bottomOffset:(n||"0")+"px"})};i.defaultProps={bottomOffset:"0"},t.default=i},"./root/components/LinksBar/LinksBar.scss":function(e,t){},"./root/components/LinksBar/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"LinksBar",function(){return l});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-router-dom/es/index.js"),s=n("../node_modules/react-redux/es/index.js"),i=n("./root/selectors/index.js"),c=n("./root/components/LinksBar/LinksBar.scss"),u=(n.n(c),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),l=function(e){var t=e.location,n=e.links.map(function(e){return r.a.createElement("li",{key:e.path},r.a.createElement(a.a,{exact:!0,to:u({},t,{pathname:e.path}),className:"link",activeClassName:"active"},e.title))});return r.a.createElement("div",{className:"links-bar tab-links"},r.a.createElement("ul",null,n))};t.default=Object(s.b)(i.selectLocation)(l)},"./root/components/NoResults/NoResults.scss":function(e,t){},"./root/components/NoResults/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/i18n.js"),s=n("./root/components/NoResults/NoResults.scss"),i=(n.n(s),function(e){return r.a.createElement("div",{className:"no-results-message"},e.text||Object(a.b)("no_results"))});i.defaultProps={text:null},t.default=i},"./root/components/Notification/Notification.scss":function(e,t){},"./root/components/Notification/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("../node_modules/react/index.js"),a=n.n(r),s=n("./common/consts.js"),i=n("./common/i18n.js"),c=n("./root/components/Notification/Notification.scss"),u=(n.n(c),(o={})[s.a.NOTIFICATION_TYPES.WARNING]="warning",o[s.a.NOTIFICATION_TYPES.ERROR]="error",o);t.default=function(e){return a.a.createElement("div",{className:"toast-msg "+u[e.type]},a.a.createElement("div",{className:"txt"},a.a.createElement("p",null,e.text)),a.a.createElement("div",{className:"action"},a.a.createElement("span",{className:"btn-close",onClick:e.removeHandler,title:Object(i.b)("close")})))}},"./root/components/PoweredBy/PoweredBy.scss":function(e,t){},"./root/components/PoweredBy/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/PoweredBy/PoweredBy.scss");n.n(a);t.default=function(){return r.a.createElement("strong",{className:"logo poweredby"},r.a.createElement("span",{className:"logo-img"}))}},"./root/components/ProgressIndicator/ProgressIndicator.scss":function(e,t){},"./root/components/ProgressIndicator/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/ProgressIndicator/ProgressIndicator.scss");n.n(a);t.default=function(e){var t=r.a.createElement("div",{className:"progress-indicator"},r.a.createElement("span",{className:"progress-indicator-img"}));return e.coverSize?r.a.createElement("div",{className:"indicator-cover",style:e.coverSize?Array.isArray(e.coverSize)?{width:e.coverSize[0],height:e.coverSize[1]}:{width:e.coverSize,height:e.coverSize}:{}},t):t}},"./root/components/ResponsiveWidthMonitor/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"ResponsiveWidthMonitor",function(){return i});var o=n("../node_modules/react/index.js"),r=(n.n(o),n("../node_modules/react-redux/es/index.js")),a=n("./utils/domUtils.js"),s=n("./root/actions/index.js");var i=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){var e=this,t=Object(a.e)(this.props.query,function(t){return e.updateIsResponsiveWidth(t.matches)});this.updateIsResponsiveWidth(t.matches)},t.prototype.updateIsResponsiveWidth=function(e){this.props[s.types.SET_IS_RESPONSIVE]({isResponsiveWidth:e})},t.prototype.render=function(){return this.props.children},t}(o.Component);t.default=Object(r.b)(null,s.default)(i)},"./root/components/ResultImageGrid/GridTile/GridTile.scss":function(e,t){},"./root/components/ResultImageGrid/GridTile/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/classnames/index.js"),s=n.n(a),i=n("./root/components/SvgIcon/index.js"),c=n("./root/components/ResultImageGrid/GridTile/GridTile.scss");n.n(c);t.default=function(e){var t,n,o,a,c,u,l,d,p,f=e.info,m=e.isSelected,E=function(t){t.stopPropagation(),e.selectionAction&&e.selectionAction(f.id,t)},_=function(e){e.target.classList.remove("hidden")},b=function(e){e.target.parentElement.classList.add("img-fail")},g=function(){self.open(e.info.link)},h=function(){if(function(){return f.link&&void 0!==f.link.split(".")[1]}){var e=s()("btn","btn-icon","flex-noshrink","icon-xs","mr-3"),t=s()("icon","icon-enlarge","icon-xs");return r.a.createElement("button",{className:e,onClick:g},r.a.createElement("i",{className:t}))}},O=s()("grid-tile","tile","f-l","pr-3","pr-phone-4","pb-3","pb-phone-4","w-50","w-phone-25",{selected:m},((t={})[""+(e.className||"")]=!!e.className,t));return r.a.createElement("li",{className:O},r.a.createElement("div",{className:"pos-rel"},(l=s()("grid-checkbox","pos-abs","pos-tl","m-2","m-phone-3",{"d-none":!m}),d=s()({"secondary-bg":m},"btn","btn-check","btn-icon","border-white"),p=s()({"icon-check":m},"icon","icon-xs"),e.allowSelect&&r.a.createElement("div",{className:l},r.a.createElement("button",{className:d,onClick:E},r.a.createElement("i",{className:p})))),(c=f.thumbnail?r.a.createElement("img",{className:"hidden w-100",src:f.thumbnail,onLoad:_,onError:b}):r.a.createElement(i.default,{path:i.SVG_ICONS.FILE,height:"72",width:"72",fill:"#ffffff"}),u=s()("pos-abs","pos-t","pos-l","w-100","h-100","flex","justify-content-center"),r.a.createElement("div",{className:u,onClick:E},c)),(n=s()("grid-image-info","flex","align-items-center","p-2","pl-3","pr-3","pos-abs","pos-bl","w-100"),o=f.title&&r.a.createElement("div",{className:"img-title",onClick:E},f.title),a=f.subtitle&&r.a.createElement("div",{className:"img-subtitle ellipsis",title:f.subtitle},f.subtitle),r.a.createElement("div",{className:n},h(),r.a.createElement("div",{className:"ellipsis flex-grow",onClick:E},o,a)))))}},"./root/components/ResultImageGrid/ResultImageGrid.scss":function(e,t){},"./root/components/ResultImageGrid/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/GridWaypoint/index.js"),s=n("./root/components/ResultImageGrid/GridTile/index.js"),i=n("./root/components/ProgressIndicator/index.js"),c=n("./root/components/NoResults/index.js"),u=n("./root/components/ResultImageGrid/ResultImageGrid.scss"),l=(n.n(u),function(e){var t=e.showProgressIndicator?r.a.createElement(i.default,null):null,n=function(){return e.images.map(function(t){return r.a.createElement(s.default,{info:t,selectionAction:e.selectionAction,isSelected:(n=t,!(!e.selected||!~e.selected.indexOf(n.id))),allowSelect:e.allowSelect,isMultiple:e.isMultiple,key:""+(t.id||t.url||t.link)});var n})};return r.a.createElement("div",{className:"grid-container"},t,r.a.createElement("div",{className:"grid scroller "+(e.images.length?"":"empty")},e.images&&e.images.length?[r.a.createElement("ul",{className:"grid-images pl-2 pl-phone-4",key:"ig_img_gallery"},n()),e.waypointAction&&e.images.length?r.a.createElement(a.default,{key:"ig_waypoint",waypointAction:e.waypointAction}):null]:e.showProgressIndicator?[null]:[r.a.createElement(c.default,{key:"ig_no_results"})]))});l.defaultProps={allowSelect:!0,showProgressIndicator:!1},t.default=l},"./root/components/RouteWithSubRoutes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-router-dom/es/index.js"),s=n("./common/logger.js"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=Object(s.b)(),u=function(e){return r.a.createElement(a.b,{path:e.path,render:e.render?function(t){return n=t,c.log("[RouteWithSubRoutes]: rendering route with render method with info: ",n),e.render&&e.render(i({},e,n));var n}:e.component?function(t){return n=t,c.log("[RouteWithSubRoutes]: rendering route with component with route info: ",n),r.a.createElement(e.component,i({},e,{route:n}));var n}:null},e.children)};u.defaultProps={path:"",render:null,component:null,children:null},t.default=u},"./root/components/SearchBox/SearchBox.scss":function(e,t){},"./root/components/SearchBox/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SEARCH_BOX_MODES",function(){return u});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/SvgIcon/index.js"),s=n("./root/components/Dropdown/index.js"),i=n("./root/components/SearchBox/SearchBox.scss");n.n(i);function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var u={BUTTON:1,EXPANDED:2},l=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=c(this,e.call.apply(e,[this].concat(a))),o.onSearchClick=function(){o.props.searchHandler&&o.props.searchHandler()},o.onSearchInputChange=function(e){o.props.termChangeHandler&&o.props.termChangeHandler(e.target.value)},o.onSearchInputKeyUp=function(e){13===e.which&&o.props.searchHandler&&o.props.searchHandler()},o.setFocusOnSearchInput=function(){o.props.mode===u.EXPANDED&&o.searchInput&&o.searchInput.focus()},o.searchInput=null,c(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.setFocusOnSearchInput()},t.prototype.componentDidUpdate=function(e){e.mode!==this.props.mode&&this.setFocusOnSearchInput()},t.prototype.render=function(){var e=this,t=this.props,n=t.mode===u.EXPANDED,o=n?u.EXPANDED:u.BUTTON,i=t.showFilters&&t.filtersItems?r.a.createElement(s.default,{className:"filter-links",title:t.filtersTitle,items:t.filtersItems,showSelectionInTitle:!1,selectedIndex:t.selectedFilter,itemClickHandler:t.filterSelectHandler}):null,c=n?null:r.a.createElement("div",{className:"do-search",onClick:this.onSearchClick},r.a.createElement(a.default,{path:a.SVG_ICONS.SEARCH,fill:"#0078FF"}));return r.a.createElement("div",{className:"search-bar search-form search-box search-box-mode-"+o+" "+(n?"active":"")},i,r.a.createElement("div",{className:"form "+(i?"with-filters":"")},r.a.createElement("input",{type:"search",className:"text-field search-input",placeholder:t.inputPlaceholder,onChange:this.onSearchInputChange,onKeyUp:this.onSearchInputKeyUp,value:t.term||"",ref:function(t){return e.searchInput=t}}),r.a.createElement("button",{type:"button",className:"btn-search",onClick:this.onSearchClick}," ")),c,t.children)},t}(o.Component);l.defaultProps={inputPlaceholder:"",term:"",searchHandler:null,mode:u.EXPANDED,showFilters:!1,filtersItems:null,selectedFilter:-1,filterSelectHandler:null,filtersTitle:""},t.default=l},"./root/components/SelectedCounter/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/i18n.js");t.default=function(e){return r.a.createElement("div",{className:"info selected-counter"},r.a.createElement("span",{className:"item-selected"},e.selectedCount," ",r.a.createElement("em",null,Object(a.b)("selection_counter.selected"))),r.a.createElement("button",{type:"button",className:"clear",onClick:e.onClearClick},Object(a.b)("actions.clear_all")))}},"./root/components/ServiceLoginIntro/ServiceLoginIntro.scss":function(e,t){},"./root/components/ServiceLoginIntro/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/Button/index.js"),s=n("./root/components/ServiceLoginIntro/ServiceLoginIntro.scss");n.n(s);t.default=function(e){return r.a.createElement("div",{className:"box login-intro"},r.a.createElement("h2",{className:"title"},e.title),r.a.createElement(a.default,{text:e.actionTitle,className:"login "+e.btnClass,onClick:e.actionHandler}),e.statement?r.a.createElement("div",{className:"statement"},e.statement):null)}},"./root/components/SvgIcon/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SVG_ICONS",function(){return a});var o=n("../node_modules/react/index.js"),r=n.n(o),a={CHECKBOX:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",EXT_LINK:"M19 19H5V5h7V3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2v-7h-2v7zM14 3v2h3.59l-9.83 9.83 1.41 1.41L19 6.41V10h2V3h-7z",FILE:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z",CHECK_MARK:"M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z",USER:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",BACK:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z",FOLDER:"M8 0H2C.895 0 .01.895.01 2L0 14c0 1.105.895 2 2 2h16c1.105 0 2-.895 2-2V4c0-1.105-.895-2-2-2h-8L8 0z",CHECKBOX_CHECKED:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z",CHECKBOX_UNCHECKED:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z",SEPARATOR:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z",SEARCH:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"},s=function(e){var t=e.path,n=e.viewBox,o=e.height,a=e.width,s=e.fill;return r.a.createElement("svg",{viewBox:n||"0 0 24 24",height:o||"24",width:a||"24",style:{fill:s}},r.a.createElement("path",{d:t}))};s.defaultProps={viewBox:null,height:null,width:null,fill:""},t.default=s},"./root/components/TabFooter/TabFooter.scss":function(e,t){},"./root/components/TabFooter/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TabFooter",function(){return b});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("../node_modules/classnames/index.js")),c=n.n(i),u=n("./common/i18n.js"),l=n("./root/actions/index.js"),d=n("./root/selectors/index.js"),p=n("./root/components/Footer/index.js"),f=n("./root/components/AdvancedOptions/index.js"),m=n("./root/components/SelectedCounter/index.js"),E=n("./root/components/Button/index.js"),_=n("./root/components/TabFooter/TabFooter.scss"),b=(n.n(_),function(e){var t,n=e.showSelection&&e.selectionCount||e.actionButtonActive,o=e.advancedOptionsOpen,a=function(){e[l.types.TOGGLE_ADVANCED_OPTIONS]()};return r.a.createElement(p.default,{footerClassName:n?"items-active":""},(t=c()("advance-box",{active:o}),e.shouldShowAdvanced?r.a.createElement("div",{className:t},r.a.createElement("button",{type:"button",className:"btn-advance",onClick:a},Object(u.b)("advanced")),o?r.a.createElement(f.default,null):null):null),r.a.createElement("div",{className:"right-side"},[n&&e.selectionCount?r.a.createElement(m.default,{selectedCount:e.selectionCount,onClearClick:e.clearSelectionHandler,key:"panel_search_select_counter"}):null,e.showSecondaryButton&&e.secondaryButtonText?r.a.createElement(E.default,{className:"secondary-button",text:e.secondaryButtonText,color:E.BTN_COLORS.GRAY,onClick:e.secondaryButtonHandler,key:"footer_second_button"}):null,e.showSelection||e.showActionButton?r.a.createElement(E.default,{className:"upload-button btn btn-lg",text:e.actionButtonText||Object(u.b)("actions.upload"),color:E.BTN_COLORS.ORANGE,onClick:e.uploadButtonHandler,key:"footer_upload_button"}):null]))});b.defaultProps={showSelection:!1,selectionCount:0,clearSelectionHandler:null,uploadButtonHandler:null,actionButtonText:null,actionButtonActive:!1,showActionButton:!1,showSecondaryButton:!1,secondaryButtonText:null,secondaryButtonHandler:null},t.default=Object(a.b)(Object(s.createStructuredSelector)({shouldShowAdvanced:d.selectShouldShowAdvancedOptions,advancedOptionsOpen:d.selectIsAdvancedOptionsOpen,language:d.selectConfigLanguage}),l.default)(b)},"./root/components/TabHeader/TabHeader.scss":function(e,t){},"./root/components/TabHeader/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TabHeader",function(){return O});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("../node_modules/lodash/result.js"),u=n.n(c),l=n("../node_modules/reselect/lib/index.js"),d=(n.n(l),n("./common/i18n.js")),p=n("./routing/utils.js"),f=n("./root/selectors/index.js"),m=n("./root/components/SvgIcon/index.js"),E=n("./root/components/UserBlock/index.js"),_=n("./root/components/SearchBox/index.js"),b=n("./root/components/LinksBar/index.js"),g=n("./root/components/TabHeader/TabHeader.scss"),h=(n.n(g),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),O=function(e,t){var n=e.location&&e.location.pathname||"",o=e.showSearch&&!!~n.indexOf("search"),a=e.userName||"",s=function(){o?e.searchClickHandler&&e.searchClickHandler():t.router.history.push(h({},e.location,{pathname:Object(p.a)(e.source,"search")}))},i=function(){t.router.history.goBack()};return r.a.createElement("div",{className:"tab-header subhead "+(o?"search-mode":"no-search")},e.children&&r.a.Children.count(e.children)?e.children:[!o&&r.a.createElement("span",{className:"tab-header-title",key:"th_title"},u()(e,"title",null)),!o&&e.navItems?r.a.createElement(b.default,{links:e.navItems,key:"subhead-links"}):null,o?r.a.createElement("div",{onClick:i,className:"back-button",key:"subhead-back"},r.a.createElement(m.default,{path:m.SVG_ICONS.BACK})):null],r.a.createElement("div",{className:"head-right"},e.showSearch?r.a.createElement(_.default,{key:"tabheader_searchbox",mode:o?_.SEARCH_BOX_MODES.EXPANDED:_.SEARCH_BOX_MODES.BUTTON,term:e.searchTerm,inputPlaceholder:e.searchInputPlaceholder||Object(d.b)("search_placeholder"),searchHandler:s,termChangeHandler:e.searchTermHandler}):null,r.a.createElement(E.default,{name:a,onLogout:e.onLogout,key:"tabheader_userblock"})))};O.contextTypes={router:s.a.object},O.defaultProps={showSearch:!1,searchTerm:""},t.default=Object(i.b)(Object(l.createStructuredSelector)({location:f.selectLocation}))(O)},"./root/components/TabTitle/TabTitle.scss":function(e,t){},"./root/components/TabTitle/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./root/components/TabTitle/TabTitle.scss");n.n(a);t.default=function(e){return r.a.createElement("div",null,r.a.createElement("strong",{className:"tab-title main-title"},r.a.createElement("span",{className:"tab-title-img"}),r.a.createElement("span",null,e.title)),r.a.createElement("button",{type:"button",className:"ico-plus",onClick:e.menuClickHandler}," "))}},"./root/components/TaggedInput/TaggedInput.scss":function(e,t){},"./root/components/TaggedInput/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"SUGGEST_CONTAINER_STATE",function(){return E}),n.d(t,"getAutoSuggestInputCreator",function(){return _});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/voca/index.js"),s=(n.n(a),n("../node_modules/react-tagsinput/react-tagsinput.js")),i=n.n(s),c=n("../node_modules/react-autosuggest/dist/index.js"),u=n.n(c),l=n("./utils/domUtils.js"),d=n("./common/i18n.js"),p=n("../node_modules/react-tagsinput/react-tagsinput.css"),f=(n.n(p),n("./root/components/TaggedInput/TaggedInput.scss")),m=(n.n(f),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e});var E={CLOSED:0,OPEN:1},_=function(e){return function(t){var n,o=t.addTag,s=function(e,t){var n={};for(var o in e)t.indexOf(o)>=0||Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o]);return n}(t,["addTag"]);return r.a.createElement(u.a,{ref:s.ref,highlightFirstSuggestion:!0,focusInputOnSuggestionClick:!Object(l.c)(),suggestions:(n=[],Object(a.isBlank)(e.inputValue)||!e.suggestions||~e.suggestions.indexOf(e.inputValue)||n.push({value:e.inputValue,isNew:!0}),e.suggestions&&(n=n.concat(e.suggestions.map(function(e){return{value:e}}))),n),getSuggestionValue:s.getSuggestionValue||function(e){return e.value},shouldRenderSuggestions:function(){return!0},renderSuggestionsContainer:function(t){var n=t.containerProps,o=t.children;return o||setTimeout(function(){e.reportSuggestionsContainerState(E.CLOSED)},0),o&&r.a.createElement("div",m({},n,{className:"tagged-suggestion-container"}),o)},renderSuggestion:s.renderSuggestion||function(e,t){var n=t.isHighlighted;t.query;return r.a.createElement("span",{className:n?"highlight":"",title:e.value},""+(e.isNew?Object(d.b)("advanced_options.add_new"):"")+e.value)},inputProps:m({},s,{value:e.inputValue,onChange:function(t,n){var o=n.newValue,r=n.method;"enter"===r?t.preventDefault():"down"!==r&&"up"!==r&&e.inputChangeHandler(o)},onKeyDown:function(t){(t.key&&"Backspace"===t.key||8===t.which)&&Object(a.isBlank)(e.inputValue)&&e.removeLastTag()},placeholder:e.placeholder}),onSuggestionSelected:function(t,n){var r=n.suggestion;o(r.value),e.reportSuggestionsContainerState(E.CLOSED),e.inputChangeHandler("")},onSuggestionsClearRequested:function(){},onSuggestionsFetchRequested:function(t){var n=t.value;e.filterSuggestions(n),e.reportSuggestionsContainerState(E.OPEN)}})}},b=function(e){var t=e.tag,n=e.key,o=e.disabled,a=e.onRemove,s=e.classNameRemove,i=e.className;return r.a.createElement("span",{key:n,title:t,className:i},t,!o&&r.a.createElement("a",{className:s,onClick:function(){return a(n)}}," "))};t.default=function(e){return r.a.createElement(i.a,{className:e.className,renderInput:_(e),renderTag:b,onlyUnique:!0,value:e.values,tagProps:{className:"tag",classNameRemove:"btn-remove",onRemove:e.removeTag},onChange:e.changeHandler,removeKeys:[]})}},"./root/components/TopErrorBoundary/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/logger.js");function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var i=Object(a.b)(),c=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),i=0;i<r;i++)a[i]=arguments[i];return n=o=s(this,e.call.apply(e,[this].concat(a))),o.state={lastErrorMessage:null},s(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidCatch=function(e,t){i.error("[TopErrorBoundary]: encountered uncaught error!",e,t.componentStack),this.setState({lastErrorMessage:e.message})},t.prototype.render=function(){return[this.state.lastErrorMessage?r.a.createElement("span",{id:"last-error-msg-boundary",style:{display:"none"},key:"err_bnd_cntr"},this.state.lastErrorMessage):null,this.props.children]},t}(o.Component);t.default=c},"./root/components/TopMenu/TopMenu.scss":function(e,t){},"./root/components/TopMenu/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"TopMenu",function(){return g});var o,r=n("../node_modules/react/index.js"),a=n.n(r),s=n("../node_modules/react-redux/es/index.js"),i=n("../node_modules/prop-types/index.js"),c=n.n(i),u=n("./uploader/index.js"),l=n("./common/i18n.js"),d=n("./routing/navItems.js"),p=n("./root/actions/index.js"),f=n("./root/selectors/index.js"),m=n("./root/components/TopMenu/TopMenu.scss"),E=(n.n(m),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),_=u.consts.SOURCES,b=((o={})[_.LOCAL]="files",o[_.DROPBOX]="dropbox",o[_.CAMERA]="camera",o[_.URL]="web-addr",o[_.IMAGE_SEARCH]="img-search",o[_.FACEBOOK]="facebook",o[_.GOOGLE_DRIVE]="g-photos",o[_.INSTAGRAM]="instagram",o),g=function(e,t){var n=Object(d.a)(),o=n.find(function(t){return t.id===e.currentSource}),r=o?b[o.id]+"-active "+o.id+"-active":"",s=e.responsiveShow?"popup-nav-active":"",i=o?Object(l.b)(o.id+".main_title"):"",c=function(){return e[p.types.TOGGLE_RESPONSIVE_MENU]({show:!1})};return a.a.createElement("header",{id:"cloudinary-navbar",className:"head header "+r+" "+s},a.a.createElement("strong",{className:"main-title",onClick:c},i),a.a.createElement("nav",{className:"menu"},a.a.createElement("ul",{className:"sources top-menu-items"},n.filter(function(t){return~e.enabledSources.indexOf(t.id)}).map(function(n){return a.a.createElement("li",{className:"menu-item source "+n.id,key:"source_"+n.id},a.a.createElement("button",{type:"button",className:"link "+b[n.id],onClick:function(){return o=n.path,c(),void t.router.history.push(E({},e.location,{pathname:o}));var o}},n.title))}))))};g.contextTypes={router:c.a.object},t.default=Object(s.b)(f.selectMenuData,p.default)(g)},"./root/components/Trunc/Trunc.scss":function(e,t){},"./root/components/Trunc/Trunc.types.js":function(e,t){},"./root/components/UploadContainer/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n("../node_modules/prop-types/index.js"),a=n.n(r),s=n("../node_modules/react-redux/es/index.js"),i=n("../node_modules/react-router/es/index.js"),c=n("../node_modules/reselect/lib/index.js"),u=n("./routing/utils.js"),l=n("./root/actions/index.js"),d=n("./root/selectors/index.js"),p=n("./common/consts.js"),f=n("./uploader/index.js"),m=n("./common/logger.js"),E=this,_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var b=Object(m.b)(),g=function(e,t){var n,o,r,a=void 0,s=void 0,i=void 0,c=function(e){a[l.types.SET_WIDGET_CONFIG](e||s.getConfig())},d=function(e,t){return!!~(t?t.location:a.location).pathname.indexOf(e)},m=function(e){d(e)||t.history.push(_({},a.location,{pathname:Object(u.a)(e)}))},g=function(){return m(p.a.QUEUE)},h=function(e){b.log("[UploadContainer.connector]: widget view type changed to: "+e),s.setWidgetViewType(e)},O=((n={})[f.EVENT_TYPES.UPLOADER_READY]=function(){b.log("[UploadContainer.connector]: uploader reported that its now ready"),c(),S()},n[f.EVENT_TYPES.UPLOADER_FILE_STATUS]=function(e){b.log("[UploadContainer.connector]: upload queue reported files added/changed, updating reducer queue"),a[l.types.SET_QUEUE_ITEMS]({ids:e.ids,items:e.files,simulated:e.simulated})},n[f.EVENT_TYPES.UPLOADER_SHOW]=function(e){var n,o;b.log("[UploadContainer.connector]: received uploader is showing",e),a[l.types.SET_WIDGET_VIEW_TYPE]({type:p.a.WIDGET_VIEW_TYPES.INITIAL}),o=null,(n=e)&&n.source&&(o=n.source),o?m(o):d(p.a.QUEUE)&&t.history.goBack(),a[l.types.SET_WIDGET_SHOWING]()},n[f.EVENT_TYPES.UPLOADER_UPDATE_SETTINGS]=function(e){b.log("[UploadContainer.connector]: received uploader settings update !"),c(e)},n[f.EVENT_TYPES.UPLOADER_CLIENT_HIDE]=function(){b.log("[UploadContainer.connector]: received uploader was hidden by client"),a[l.types.DO_CLOSE_WIDGET]()},n[f.EVENT_TYPES.UPLOADER_CLIENT_TAGS]=function(e){b.log("[UploadContainer.connector]: received client tags",e),a[l.types.SET_SUGGESTED_TAGS](e)},n[f.EVENT_TYPES.UPLOADER_CLIENT_MINIMIZE]=function(){b.log("[UploadContainer.connector]: received client minimize"),g(),a[l.types.SET_WIDGET_VIEW_TYPE]({type:p.a.WIDGET_VIEW_TYPES.MINI})},n[f.EVENT_TYPES.UPLOADER_BATCH_STARTED]=function(){b.log("[UploadContainer.connector]: received batch added"),d(p.a.QUEUE)||g(),e[l.types.SET_BATCH_STARTED]()},n[f.EVENT_TYPES.UPLOADER_BATCH_CANCELLED]=function(){b.log("[UploadContainer.connector]: received batch cancelled"),a[l.types.SET_WIDGET_VIEW_TYPE]({type:p.a.WIDGET_VIEW_TYPES.INITIAL,router:t})},n[f.EVENT_TYPES.UPLOADER_CLOUD_INFO]=function(t){b.log("[UploadContainer.connector]: received cloud info ",t),e[l.types.SET_IS_PREMIUM](t)},n[f.EVENT_TYPES.UPLOADER_SUCCESS_COUNTER]=function(t){b.log("[UploadContainer.connector]: received updated success counter ",t),e[l.types.SET_SUCCESSFUL_COUNTER](t)},n[f.EVENT_TYPES.UPLOADER_MAX_EXCEEDED]=function(){b.log("[UploadContainer.connector]: received file upload selection exceeded max files config"),e[l.types.SET_MAX_SELECT_REACHED]()},n),S=function(){s.isShowingOnStart()&&a[l.types.SET_WIDGET_SHOWING]()},v=(o=regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.containerData.closeCounter&&t.containerData.closeCounter>i.closeCounter)){e.next=12;break}if(b.log("[UploadContainer.connector]: received new close counter, clearing uploader queue"),d(p.a.QUEUE,t)||!t.hasActiveUploads){e.next=8;break}a[l.types.SET_WIDGET_VIEW_TYPE]({type:p.a.WIDGET_VIEW_TYPES.MINI}),g(),h(p.a.WIDGET_VIEW_TYPES.MINI),e.next=12;break;case 8:return e.next=10,s.clearQueues();case 10:e.sent&&(b.log("[UploadContainer.connector]: clear queues finished successfully - sending hide command to uploader"),a[l.types.CLEAR_ADVANCED_VALUES](),a[l.types.CLEAR_QUEUE](),a[l.types.CLEAR_ALL_NOTIFICATIONS](),s.hide());case 12:case"end":return e.stop()}},e,E)}),r=function(){var e=o.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e){return r.apply(this,arguments)}),T=function(e){a=e,s=e.uploader,i=e.containerData};return T(e),Object.keys(O).forEach(function(e){return s.on(e,O[e])}),{updateProps:T,processNextProps:function(e){return Promise.all([function(e){if(e.containerData.uploadAdded){var t=(o=e,r=(n=a).containerData.uploadAdded?n.containerData.uploadAdded.files:[],i=o.containerData.uploadAdded?o.containerData.uploadAdded.files:[],r.length&&i.length?i.filter(function(e){return!~r.indexOf(e)}):i);t.length&&(b.log("[UploadContainer.connector]: new upload items added, sending to queue",t),s.addToQueue({files:t}))}var n,o,r,i}(e),(c=e,void(c.containerData.retryIds&&c.containerData.retryIds.length&&c.containerData.retryIds!==i.retryIds&&(b.log("[UploadContainer.connector]: about to initiate retry for failed item(s): ",c.containerData.retryIds),s.retryUploads(c.containerData.retryIds)))),(r=e,void(r.containerData.abortIds&&r.containerData.abortIds.length&&r.containerData.abortIds!==i.abortIds&&(b.log("[UploadContainer.connector]: about to initiate abort for item(s): ",r.containerData.abortIds),s.abortUploads(r.containerData.abortIds)))),(n=e,o=n.containerData.uploadOptions,void(o&&(o.tags!==i.uploadOptions.tags&&s.setUploadTags(o.tags),o.publicId!==i.uploadOptions.publicId&&s.setUploadPublicId(o.publicId)))),v(e),(t=e,void(t.containerData.widgetViewType&&t.containerData.widgetViewType!==i.widgetViewType&&h(t.containerData.widgetViewType)))]);var t,n,o,r,c}}};function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var O=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=h(this,e.call.apply(e,[this].concat(a))),o.connector=null,h(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.getChildContext=function(){return{uploader:this.props.uploader}},t.prototype.componentDidMount=function(){this.connector=g(this.props,this.context.router)},t.prototype.componentWillReceiveProps=function(e){this.connector&&this.connector.processNextProps(e)},t.prototype.componentDidUpdate=function(){this.connector&&this.connector.updateProps(this.props)},t.prototype.render=function(){return this.props.children},t}(o.Component);O.childContextTypes={uploader:a.a.object},O.contextTypes={router:a.a.object};t.default=Object(i.d)(Object(s.b)(Object(c.createStructuredSelector)({containerData:d.selectUploadContainerData,hasActiveUploads:d.selectHasActiveUploads,location:d.selectLocation}),l.default)(O))},"./root/components/UserBlock/UserBlock.scss":function(e,t){},"./root/components/UserBlock/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/i18n.js"),s=n("./root/components/UserBlock/UserBlock.scss");n.n(s);t.default=function(e){var t=e.name,n=e.onLogout;return r.a.createElement("div",{className:"user-block btn-user",onClick:n},r.a.createElement("div",{className:"user"},r.a.createElement("div",{className:"logout"},Object(a.b)("actions.log_out")+" ("+(t||"")+")")))}},"./root/hocs/ModalWrapper/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=(n.n(o),n("../node_modules/react-onclickoutside/es/index.js"));function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}t.default=function(e){return function(t){var n=function(n){function o(){var t,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var s=arguments.length,i=Array(s),c=0;c<s;c++)i[c]=arguments[c];return t=r=a(this,n.call.apply(n,[this].concat(i))),r.onEscape=function(t){27===t.which&&e.handleShouldHide({reason:"esc"})},a(r,t)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o.prototype.componentWillMount=function(){document.addEventListener("keydown",this.onEscape)},o.prototype.componentWillUnmount=function(){document.removeEventListener("keydown",this.onEscape)},o.prototype.handleClickOutside=function(){e.handleShouldHide({reason:"outside"})},o.prototype.render=function(){return t},o}(o.Component);return n.displayName="ModalWrapperHoc("+(e.id||"ModalContent")+")",Object(r.a)(n)}}},"./root/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r,a,s,i=n("./uploader/index.js"),c=n("./common/logger.js"),u=n("./common/reducerBase.js"),l=n("./utils/domUtils.js"),d=n("./utils/camera.js"),p=n("./root/actions/index.js"),f=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),m=n.n(f),E=["cloud_name","viewType","sources","default_source","multiple","google_api_key","dropbox_app_key","search_by_sites","search_by_rights","auto_minimize","useTagsCallback","text","language","max_files","show_advanced_options","show_powered_by","show_completed_button"],_=function(e){return Object.keys(e).filter(function(e){return~E.indexOf(e)}).reduce(function(t,n){return t[n]=e[n],t},{})},b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g=Object(c.c)(),h=i.consts.SOURCES,O=function(e,t){return{valid:t,reason:"'secure' option must be turned on"}},S=((o={})[h.INSTAGRAM]=O,o[h.DROPBOX]=O,o[h.GOOGLE_DRIVE]=function(){return{valid:!1,reason:"Google API no longer supports Photos"}},o[h.IMAGE_SEARCH]=function(e){return{valid:!!e.google_api_key,reason:"Google API Key must be provided"}},o[h.CAMERA]=function(e,t){return{valid:t&&(n=self.location,!Object(l.d)()&&("localhost"===n.hostname||"https:"===n.protocol)&&Object(d.c)()&&!Object(l.c)()),reason:"only supported on https and desktop browsers"};var n},o),v=function(e,t){var n,o,r,a,s,i,c=_(t),u=c.sources&&(n=c,o=t.secure,(r=n.sources.filter(function(e){var t=S[e]?S[e](n,o):{valid:!0};return t.valid||g.warn("[widgetConfigReducer]: removing "+e+" - "+t.reason),t.valid})).length||(g.warn("[widgetConfigReducer]: no valid sources configured, defaulting to local"),r.push(h.LOCAL)),r);return b({},c,{show_advanced_options:(i=t,i.show_advanced_options&&!i.tags&&!i.public_id),search_by_sites:c.search_by_sites||["all"],sources:u||e.sources,default_source:u?(a=t.default_source,s=u,a&&~s.indexOf(a)||(g.log("[widgetConfigReducer]: default source "+(a||"null")+" is not present in valid&enabled sources"),a=s[0]),a):e.default_source})},T=Object(u.a)(m()(_(i.defaults)),((r={})[p.types.SET_WIDGET_CONFIG]=function(e,t){var n=t.payload;return e.merge(v(e,n))},r)),j=n("../node_modules/lodash/fp.js"),I=function(){return m()({queue:[],simulatedQueue:!1,retryIds:[],abortIds:[],added:null,addValidationError:null})},x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},C=function(e,t){return e.findIndex(function(e){return e.id===t.id})},y=Object(u.a)(I(),((a={})[p.types.SET_QUEUE_ITEMS]=function(e,t){var n,o,r,a=t.payload;return e.merge({queue:(n=e,o=a,Object(u.b)((r=o).ids.reduce(function(e,t){return e.push(r.items[t]),e},[]),n.queue,C)),simulatedQueue:!!a.simulated})},a[p.types.CLEAR_QUEUE]=function(e){return e.merge(I())},a[p.types.SET_QUEUE_ITEMS_RETRY]=function(e,t){var n=t.payload;return e.set("retryIds",n&&n.ids?n.ids:[Object(j.uniqueId)("*")])},a[p.types.SET_QUEUE_ITEMS_ABORT]=function(e,t){var n=t.payload;return e.set("abortIds",n&&n.ids?n.ids:[Object(j.uniqueId)("*")])},a[p.types.SET_QUEUE_ITEM_PROGRESS]=function(e,t){var n=t.payload;return e.setIn(["queue",C(e.queue,n)],x({},e.queue[n.id],n.info))},a[p.types.ADD_UPLOAD_TO_QUEUE]=function(e,t){var n=t.payload;return e.set("added",n)},a)),A=n("./utils/seamlessUtils.js"),R=n("./common/consts.js"),D=Object(u.a)(m()({source:null,isResponsiveWidth:!1,notifications:{},advancedOptionsOpen:!1,responsiveMenuShow:!1,publicIdError:!1,advancedPublicId:"",advancedTags:[],suggestedTags:[],tagsInputValue:"",widgetCloseCounter:0,isShowing:!1,widgetViewType:R.a.WIDGET_VIEW_TYPES.INITIAL,widgetViewTypeChangeByUser:!1,batchStartCounter:0,premiumInfoReceived:!1,isPremium:!1,successfulCount:0}),((s={})[p.types.SET_ACTIVE_SOURCE]=function(e,t){var n=t.payload;return e.set("source",n.source)},s[p.types.ADD_NOTIFICATION]=function(e,t){var n=t.payload;return e.notifications[n.notification.id]?e:e.setIn(["notifications",n.notification.id],n.notification)},s[p.types.CLEAR_NOTIFICATION]=function(e,t){var n,o,r=t.payload;return n=e,o=r.id,n.setIn(["notifications",o],null)},s[p.types.SET_IS_RESPONSIVE]=function(e,t){var n=t.payload;return e.set("isResponsiveWidth",n.isResponsiveWidth)},s[p.types.TOGGLE_ADVANCED_OPTIONS]=function(e){return e.set("advancedOptionsOpen",!e.advancedOptionsOpen)},s[p.types.SET_UPLOAD_TAGS]=function(e,t){var n=t.payload;return e.set("advancedTags",n.tags)},s[p.types.SET_PUBLIC_ID]=function(e,t){var n=t.payload;return e.set("advancedPublicId",n.value)},s[p.types.CLEAR_ADVANCED_VALUES]=function(e){return e.merge({advancedPublicId:"",advancedTags:[],tagsInputValue:"",advancedOptionsOpen:!1})},s[p.types.REMOVE_UPLOAD_TAG]=function(e,t){var n=t.payload;return Object(A.b)(e,"advancedTags",n.index)},s[p.types.REMOVE_LAST_UPLOAD_TAG]=function(e){return e.advancedTags.length?Object(A.b)(e,"advancedTags",e.advancedTags.length-1):e},s[p.types.TOGGLE_RESPONSIVE_MENU]=function(e,t){var n=t.payload;return e.set("responsiveMenuShow",n&&void 0!==n.show?n.show:!e.responsiveMenuShow)},s[p.types.DO_INC_CLOSE_COUNTER]=function(e){return e.merge({widgetCloseCounter:e.widgetCloseCounter+1,isShowing:!1})},s[p.types.SET_WIDGET_SHOWING]=function(e){return e.set("isShowing",!0)},s[p.types.SET_WIDGET_VIEW_TYPE]=function(e,t){var n=t.payload;return e.merge({widgetViewType:n.type,widgetViewTypeChangeByUser:!!n.userAction})},s[p.types.SET_SUGGESTED_TAGS]=function(e,t){var n=t.payload;return e.set("suggestedTags",n.tags||[])},s[p.types.SET_TAGS_INPUT_VALUE]=function(e,t){var n=t.payload;return e.set("tagsInputValue",n.value)},s[p.types.SET_PUBLIC_ID_INVALID]=function(e,t){var n=t.payload;return e.set("publicIdError",n.isInvalid)},s[p.types.SET_BATCH_STARTED]=function(e){return e.set("batchStartCounter",e.batchStartCounter+1)},s[p.types.SET_IS_PREMIUM]=function(e,t){var n=t.payload;return e.merge({premiumInfoReceived:!0,isPremium:!!(n.onConsole||n.info&&n.info["data-premium"])})},s[p.types.SET_SUCCESSFUL_COUNTER]=function(e,t){var n=t.payload;return e.set("successfulCount",n.count)},s));t.default={widgetConfig:T,uploadQueue:y,widgetData:D}},"./root/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getQueueCounters",function(){return c}),n.d(t,"getWidgetConfig",function(){return a}),n.d(t,"selectMenuData",function(){return u}),n.d(t,"selectIsMultipleEnabled",function(){return l}),n.d(t,"selectLocation",function(){return d}),n.d(t,"selectNotification",function(){return p}),n.d(t,"selectDefaultSource",function(){return m}),n.d(t,"selectAdvancedOptions",function(){return b}),n.d(t,"selectIsAdvancedOptionsOpen",function(){return E}),n.d(t,"selectCloudName",function(){return g}),n.d(t,"selectConfigViewType",function(){return h}),n.d(t,"selectUploadContainerData",function(){return S}),n.d(t,"selectIsResponsiveWidth",function(){return f}),n.d(t,"selectShowPoweredBy",function(){return v}),n.d(t,"selectHasActiveUploads",function(){return O}),n.d(t,"selectBatchStartCounter",function(){return T}),n.d(t,"selectWidgetViewType",function(){return j}),n.d(t,"selectAutoMinimizeConfig",function(){return x}),n.d(t,"selectWidgetViewTypeChangeByUser",function(){return I}),n.d(t,"selectConfigLanguage",function(){return C}),n.d(t,"selectShouldShowAdvancedOptions",function(){return _});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}),a=function(e){return e.widgetConfig},s=function(e){return e.uploadQueue},i=function(e){return e.widgetData},c=function(e){var t=e.queue,n=t.reduce(function(e,t){return e.active=e.active+(t.done||t.failed?0:1),e.failed=e.failed+(t.failed?1:0),e},{active:0,failed:0,done:0,total:t.length}),o=n.total-(n.active+n.failed),a=!(!n.active&&!e.simulatedQueue);return r({},n,{done:o,hasActive:a,isSimulated:e.simulatedQueue,isDone:!a&&(o>0||!!n.failed&&n.failed===n.total)})},u=Object(o.createSelector)(a,i,function(e,t){return{enabledSources:e.sources,currentSource:t.source,responsiveShow:t.responsiveMenuShow}}),l=Object(o.createSelector)(a,function(e){return e.multiple}),d=Object(o.createSelector)(function(e){return e.routing.location},function(e){return e}),p=Object(o.createSelector)(i,function(e){var t=Object.keys(e.notifications).find(function(t){return e.notifications[t]});return t&&e.notifications[t]}),f=Object(o.createSelector)(i,function(e){return e.isResponsiveWidth}),m=Object(o.createSelector)(a,function(e){return{defaultSource:e.default_source}}),E=Object(o.createSelector)(i,function(e){return e.advancedOptionsOpen}),_=Object(o.createSelector)(a,function(e){return e.show_advanced_options}),b=Object(o.createSelector)(a,i,function(e,t){return{useTagsCallback:e.useTagsCallback,setPublicId:t.advancedPublicId,setTags:t.advancedTags,suggestedTags:t.suggestedTags,tagsInputValue:t.tagsInputValue,publicIdError:t.publicIdError}}),g=Object(o.createSelector)(a,function(e){return e.cloud_name}),h=Object(o.createSelector)(a,function(e){return e.viewType}),O=Object(o.createSelector)(s,function(e){return c(e).active>0}),S=Object(o.createSelector)(s,i,function(e,t){return{uploadAdded:e.added,queueIds:e.queue.map(function(e){return e.id}),retryIds:e.retryIds,abortIds:e.abortIds,closeCounter:t.widgetCloseCounter,widgetViewType:t.widgetViewType,uploadOptions:{publicId:t.advancedPublicId,tags:t.advancedTags}}}),v=Object(o.createSelector)(a,i,function(e,t){return t.premiumInfoReceived&&(!1!==e.show_powered_by&&t.isPremium||!t.isPremium)}),T=Object(o.createSelector)(i,function(e){return e.batchStartCounter}),j=Object(o.createSelector)(i,function(e){return e.widgetViewType}),I=Object(o.createSelector)(i,function(e){return e.widgetViewTypeChangeByUser}),x=Object(o.createSelector)(a,function(e){return e.auto_minimize}),C=Object(o.createSelector)(a,function(e){return e.language})},"./root/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{or:"Or",advanced:"Advanced",close:"Close",no_results:"No Results",search_placeholder:"Search files",menu:{files:"My Files",web:"Web Address",camera:"Camera",gsearch:"Image Search",gdrive:"Google Photos",dropbox:"Dropbox",facebook:"Facebook",instagram:"Instagram"},selection_counter:{selected:"selected"},actions:{upload:"Upload",clear_all:"Clear all",log_out:"Log out"},notifications:{general_error:"An error has occurred",limit_reached:"No more files can be selected",invalid_add_url:"Added URL must be valid",invalid_public_id:"Public ID cannot contain \\,?,&,#,%,<,>,/"},advanced_options:{public_id_ph:"Public ID",tags_ph:"Add a Tag",add_new:"Add new tag: "}}}}},"./routing/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/voca/index.js"),s=n("../node_modules/history/createMemoryHistory.js"),i=n.n(s),c=n("./root/components/RouteWithSubRoutes/index.js"),u=n("./root/components/DefaultPanel/index.js"),l=n("./utils/envUtils.js"),d=[{path:"/",exact:!0,children:function(e){return r.a.createElement(u.default,{route:e})}}].concat(Object(l.c)("ROUTES"));n.d(t,"appRoutes",function(){return E}),n.d(t,"history",function(){return m}),n.d(t,"RouteWithSubRoutes",function(){return c.default});var p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=self.location.pathname,m=i()({initialEntries:Object(a.endsWith)(f,".html")?["/"]:[f]}),E=d.map(function(e){return r.a.createElement(c.default,p({key:""+e.path},e))})},"./routing/navItems.js":function(e,t,n){"use strict";var o=n("./common/i18n.js"),r=n("./uploader/index.js"),a=n("./routing/utils.js"),s=void 0,i=r.consts.SOURCES;t.a=function(){return s||(s=[{id:i.LOCAL,path:Object(a.a)(i.LOCAL),title:Object(o.b)("menu.files")},{id:i.URL,path:Object(a.a)(i.URL),title:Object(o.b)("menu.web")},{id:i.CAMERA,path:Object(a.a)(i.CAMERA),title:Object(o.b)("menu.camera")},{id:i.IMAGE_SEARCH,path:Object(a.a)(i.IMAGE_SEARCH),title:Object(o.b)("menu.gsearch")},{id:i.GOOGLE_DRIVE,path:Object(a.a)(i.GOOGLE_DRIVE),title:Object(o.b)("menu.gdrive")},{id:i.DROPBOX,path:Object(a.a)(i.DROPBOX),title:Object(o.b)("menu.dropbox")},{id:i.FACEBOOK,path:Object(a.a)(i.FACEBOOK),title:Object(o.b)("menu.facebook")},{id:i.INSTAGRAM,path:Object(a.a)(i.INSTAGRAM),title:Object(o.b)("menu.instagram")}]),s}},"./routing/utils.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o});var o=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return"/"+t.join("/")}},"./services/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={};n.d(o,"callApi",function(){return b}),n.d(o,"get",function(){return g}),n.d(o,"post",function(){return h}),n.d(o,"put",function(){return O}),n.d(o,"patch",function(){return S}),n.d(o,"del",function(){return v}),n.d(o,"jsonp",function(){return T});var r={};n.d(r,"getStoredAuthToken",function(){return C}),n.d(r,"setMessageAuthListener",function(){return A}),n.d(r,"removeAuthToken",function(){return y}),n.d(r,"getAuthRedirectUrl",function(){return R});var a=n("./appConfig.js"),s=n("./common/logger.js"),i=(n("../node_modules/isomorphic-fetch/fetch-npm-browserify.js"),n("../node_modules/fetch-jsonp/build/fetch-jsonp.js")),c=n.n(i),u=n("../node_modules/qs/lib/index.js"),l=n.n(u),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p=this;function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var m,E,_=(m=f(regeneratorRuntime.mark(function e(t,n){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=void 0,e.prev=1,e.next=4,fetch(t,n);case 4:if((r=e.sent).ok){e.next=9;break}o=Promise.reject(r),e.next=12;break;case 9:return e.next=11,r.json();case 11:o=e.sent;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),o=Promise.reject(e.t0);case 17:return e.abrupt("return",o);case 18:case"end":return e.stop()}},e,p,[[1,14]])})),function(e,t){return m.apply(this,arguments)}),b=(E=f(regeneratorRuntime.mark(function e(t){var n,o,r,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t,o=s.query?n+"?"+l.a.stringify(s.query):n,r={headers:d({Accept:"application/json","Content-Type":"application/json"},s.headers)},!0===s.noCors&&(s.mode="no-cors"),s.body&&(s.body=JSON.stringify(s.body)),a=d({},r,s),e.next=8,_(o,a);case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}},e,this)})),function(e){return E.apply(this,arguments)}),g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b(e,d({query:t},n))},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b(e,d({method:"POST",body:t},n))},O=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b(e,d({method:"PUT",body:t},n))},S=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b(e,d({method:"PATCH",body:t},n))},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b(e,d({method:"DELETE",body:t},n))},T=function(e){return c()(e).then(function(e){return e.json()})},j=n("./utils/domUtils.js"),I=Object(s.b)(),x=function(e,t){return"uw_"+e+"_"+t+"_token"},C=function(e,t){return j.g.getItem(x(e,t))},y=function(e,t){return j.g.removeItem(x(e,t))},A=function(e,t,n){return new Promise(function(o){self.addEventListener("message",function r(a){var s=e();if(s){var i=a.origin,c=a.source,u=a.data;if(c===s&&i===location.protocol+"//"+location.host){I.log("[services]: received valid auth post message with data: ",u);var d=l.a.parse(u.split("#")[1]).access_token;j.g.setItem(x(t,n),d),s.close(),self.removeEventListener("message",r),o({token:d})}}})})},R=function(e){return~a.a.api.devAuthDomains.indexOf(self.location.hostname)?location.protocol+"//"+location.host+"/"+e+"/?authFlow=true":""+a.a.api.widgetBase+a.a.api.widgetAuth};n.d(t,"getCloudInfo",function(){return L}),n.d(t,"api",function(){return o}),n.d(t,"common",function(){return r});var D=Object(s.c)(),L=function(e){var t=a.a.api.widgetBase,n=a.a.api.info,o=a.a.api.cloudInfo||""+t+n+"/"+e+".json";return D.log("[services.getCloudInfo]: about to retrieve cloud info for cloud: "+e),g(o,null,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).catch(function(e){D.error("[services.getCloudInfo]: encountered error when retrieving cloud info: ",e)}).then(function(t){return D.log("[services.getCloudInfo]: retrieved cloud info for "+e+": ",t),t||{}})}},"./startApp.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/babel-polyfill/lib/index.js"),r=(n.n(o),n("../node_modules/react/index.js")),a=n.n(r),s=n("../node_modules/react-dom/index.js"),i=(n.n(s),n("../node_modules/react-tap-event-plugin/src/injectTapEventPlugin.js")),c=n.n(i),u=n("../node_modules/react-hot-loader/index.js"),l=(n.n(u),n("../node_modules/react-redux/es/index.js")),d=n("../node_modules/react-router-redux/es/index.js"),p=n("./store/index.js"),f=n("./appConfig.js"),m=n("./common/logger.js"),E=n("./routing/index.js"),_=n("./root/components/App/index.js"),b=n("./uploader/index.js"),g=n("./root/components/UploadContainer/index.js"),h=n("./root/components/TopErrorBoundary/index.js"),O=n("../assets/scss/main.scss"),S=(n.n(O),n("./base.scss")),v=(n.n(S),this);c()(),Object(m.d)(f.a.logLevel);var T,j,I=Object(m.c)(),x=(T=regeneratorRuntime.mark(function e(t){var n,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,I.log("[startApp]: Rendering UW application..."),e.prev=2,e.next=5,Object(b.initializeUploader)();case 5:n=e.sent,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),I.error("[startApp]: ENCOUNTERED ERROR INITIALIZING UPLOADER !!!",e.t0);case 11:if(n){e.next=13;break}throw new Error("!!!!!!!!! NO UPLOADER !!!!! - CANT CONTINUE");case 13:o=Object(p.default)(),r=self.__cldEnableUWDebug=function(){Object(m.d)(m.a.LOG),self.__cldUWStore=o,self.__cldUploader=n,self.__cldUploaderStore=n.getStore()},I.getLevel()===m.a.LOG&&r(),Object(s.render)(a.a.createElement(u.AppContainer,null,a.a.createElement(l.a,{store:o},a.a.createElement(d.a,{history:E.history},a.a.createElement(h.default,null,a.a.createElement(g.default,{uploader:n},a.a.createElement(t,{key:"uw-app-root"},E.appRoutes)))))),document.getElementById("app-root"));case 17:case"end":return e.stop()}},e,v,[[2,8]])}),j=function(){var e=T.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e){return j.apply(this,arguments)});x(_.default)},"./store/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/redux/es/index.js"),r=n("../node_modules/redux-thunk/lib/index.js"),a=n.n(r),s=n("../node_modules/react-router-redux/es/index.js"),i=n("../node_modules/redux-devtools-extension/developmentOnly.js"),c=n("../node_modules/redux-logger/dist/redux-logger.js"),u=n("./utils/envUtils.js"),l=n("./routing/index.js"),d=n("./common/logger.js"),p=(Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e})({},Object(u.d)("REDUCERS",!0),{routing:s.c}),f=Object(o.combineReducers)(p);Object(d.c)().log("[store]: Creating store");var m=[a.a,Object(s.b)(l.history)];Object(u.b)()&&m.push(Object(c.createLogger)());var E=Object(o.createStore)(f,Object(i.composeWithDevTools)(o.applyMiddleware.apply(void 0,m)));t.default=function(){return E}},"./tabs/Camera/CameraTab.scss":function(e,t){},"./tabs/Camera/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return r});var o=n("./common/actionsBase.js"),r={SET_USER_ALLOWED_CAMERA:"SET_USER_ALLOWED_CAMERA",SET_CAMERA_NOT_FOUND:"SET_CAMERA_NOT_FOUND",SET_CAMERA_LOADING:"SET_CAMERA_LOADING"};t.default=Object(o.d)(r,{})},"./tabs/Camera/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/moment/moment.js"),i=n.n(s),c=n("../node_modules/reselect/lib/index.js"),u=(n.n(c),n("./uploader/index.js")),l=n("./common/logger.js"),d=n("./common/i18n.js"),p=n("./common/actionsBase.js"),f=n("./utils/camera.js"),m=n("./tabs/hocs/TabPanel.js"),E=n("./root/components/ProgressIndicator/index.js"),_=n("./root/components/Button/index.js"),b=n("./root/components/TabFooter/index.js"),g=n("./root/actions/index.js"),h=n("./tabs/Camera/actions/index.js"),O=n("./tabs/Camera/selectors/index.js"),S=n("./tabs/Camera/service/index.js"),v=n("./tabs/Camera/CameraTab.scss");n.n(v);function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var j=Object(l.b)(),I=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=T(this,e.call.apply(e,[this].concat(a))),o.state={snapped:!1},o.onActionButtonClicked=function(){if(o.cameraApi)if(o.state.snapped){var e=o.cameraApi.getSnapData();o.props.addToUploadQueue({files:[u.utils.createCustomUploadInfo({file:e,name:Object(d.b)("camera.file_name",{time:i()().format("YYYYMD_HHmmss")}),type:"image/jpeg",camera:!0})]})}else o.cameraApi.snap(),o.setState({snapped:!0})},o.onCancelButtonClicked=function(){o.setState({snapped:!1})},o.cameraApi=null,o.snapEffect=null,o.videoElm=null,o.canvasElm=null,o.retryCamera=function(){o.loadCamera()},T(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.loadCamera()},t.prototype.componentWillUpdate=function(e,t){this.snapEffect=t.snapped&&this.state.snapped!==t.snapped},t.prototype.componentWillUnmount=function(){this.cameraApi&&this.cameraApi.stop()},t.prototype.getActionText=function(){return this.state.snapped?void 0:Object(d.b)("camera.capture")},t.prototype.loadCamera=function(){var e=this;this.props.actions[h.types.SET_CAMERA_LOADING]({loading:!0}),this.videoElm&&this.canvasElm&&Object(S.default)({videoElm:this.videoElm,canvasElm:this.canvasElm}).then(function(t){e.props.actions[h.types.SET_USER_ALLOWED_CAMERA](),e.cameraApi=t}).catch(function(t){j.log("[CameraTab]: Camera usage refused !",t),e.props.actions[h.types.SET_CAMERA_NOT_FOUND]({status:!0}),t.reason!==f.a.PermissionDeniedError&&e.props.rootActions[g.types.SET_ERROR]({text:Object(d.b)("camera.camera_error")})})},t.prototype.renderNotAllowed=function(){return r.a.createElement("div",{className:"not-allowed-container"},r.a.createElement("strong",{className:"title"},Object(d.b)("camera.take_pic")),r.a.createElement("span",{className:"ico-camera"}," "),r.a.createElement("p",null,Object(d.b)("camera.explanation")),r.a.createElement("div",{className:"img-box"},r.a.createElement("img",{src:n("../assets/images/img-camera.jpg")})),r.a.createElement("div",{className:"not-found-container"},r.a.createElement(_.default,{text:Object(d.b)("camera.retry"),onClick:this.retryCamera})))},t.prototype.renderAllowed=function(){var e=this;return r.a.createElement("div",{className:"allowed-container "+(this.state.snapped?"snapped":"")},r.a.createElement("video",{id:"camera-video",ref:function(t){return e.videoElm=t}}),r.a.createElement("div",{className:"canvas-holder "+(this.snapEffect?"snap-action":"")},r.a.createElement("canvas",{id:"camera-canvas",ref:function(t){return e.canvasElm=t}})))},t.prototype.render=function(){var e=this.props.tabData.isLoading?r.a.createElement(E.default,null):null;return r.a.createElement("div",{className:"content-wrap camera-block\n            "+(this.props.tabData.isAllowed?"camera-allowed":"")+"\n            "+(this.props.tabData.notFound?"camera-not-found":"")},r.a.createElement("div",{className:"holder"},e,r.a.createElement("div",{className:"box centered"},this.renderNotAllowed(),this.renderAllowed())),r.a.createElement(b.default,{actionButtonActive:!0,showActionButton:this.props.tabData.isAllowed,actionButtonText:this.getActionText(),uploadButtonHandler:this.onActionButtonClicked,showSecondaryButton:this.state.snapped,secondaryButtonText:Object(d.b)("camera.cancel"),secondaryButtonHandler:this.onCancelButtonClicked}))},t}(o.Component);t.default=Object(m.a)({id:u.consts.SOURCES.CAMERA,title:Object(d.b)("camera.main_title")})(Object(a.b)(Object(c.createStructuredSelector)({tabData:O.selectTabData}),Object(p.a)({actions:h.default,rootActions:g.default}))(I))},"./tabs/Camera/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),s=n.n(a),i=n("./tabs/Camera/actions/index.js");t.default={camera:Object(r.a)(s()({cameraAllowed:!1,cameraNotFound:!1,cameraLoading:!1}),(o={},o[i.types.SET_USER_ALLOWED_CAMERA]=function(e){return e.merge({cameraLoading:!1,cameraAllowed:!0,cameraNotFound:!1})},o[i.types.SET_CAMERA_LOADING]=function(e,t){var n=t.payload;return e.merge({cameraLoading:n.loading,cameraNotFound:!1,cameraAllowed:!1})},o[i.types.SET_CAMERA_NOT_FOUND]=function(e,t){var n=t.payload;return e.merge({cameraLoading:!1,cameraNotFound:n.status,cameraAllowed:!1})},o))}},"./tabs/Camera/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/index.js"),r=n("./routing/utils.js"),a=n("./tabs/Camera/index.js");t.default=[{path:Object(r.a)(o.consts.SOURCES.CAMERA),component:a.default}]},"./tabs/Camera/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectTabData",function(){return r});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),Object(o.createSelector)(function(e){return e.camera},function(e){return{isAllowed:e.cameraAllowed,isLoading:e.cameraLoading,notFound:e.cameraNotFound}}))},"./tabs/Camera/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./common/logger.js"),r=n("./utils/domUtils.js"),a=Object(o.b)();t.default=function(e){return Object(r.b)({video:!0,audio:!1}).then(function(t){if(a.log("[cameraService]: user approved access to camera device"),self.navigator.mozGetUserMedia&&t)e.videoElm.mozSrcObject=t,e.videoElm.srcObject=t,e.videoElm.play();else{var n=window.URL||window.webkitURL,o=n?n.createObjectURL(t):t;e.videoElm.setAttribute("src",o)}return{snap:function(){var t=e.videoElm,n=e.canvasElm,o=t.videoWidth,r=t.videoHeight;n.width=o,n.height=r,n.getContext("2d").drawImage(t,0,0,o,r)},getSnapData:function(){return e.canvasElm.toDataURL("image/jpeg")},stop:function(){a.log("[cameraService]: about to stop camera video stream");try{t&&(t.stop?t.stop():t.getTracks().forEach(function(e){return e.stop()}))}catch(e){a.warn("[cameraService]: encountered error when stopping video stream",e)}t=null}}}).catch(function(e){return a.log("[cameraService]: received error when getting user camera media",e),Promise.reject(e)})}},"./tabs/Camera/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{camera:{main_title:"Camera",capture:"Capture",cancel:"Cancel",take_pic:"Take A Picture and Upload",explanation:"Make sure your camera is connected, your browser allows camera capture. When ready, position yourself and click Capture",camera_error:"Failed to access camera",retry:"Retry Camera",file_name:"Camera_{{time}}"}}}}},"./tabs/Dropbox/DropboxTab.scss":function(e,t){},"./tabs/Dropbox/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return O});var o,r,a=n("./common/logger.js"),s=n("./common/actionsBase.js"),i=n("./root/actions/index.js"),c=n("./tabs/common/actionMethods.js"),u=n("./tabs/Dropbox/service/index.js"),l=n("./tabs/Dropbox/data/consts.js"),d=n("./tabs/Dropbox/selectors/index.js"),p=this,f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var E,_,b,g,h=Object(a.b)(),O={INIT_AUTH:"DB_INIT_AUTH",SET_AUTH_INFO:"DB_SET_AUTH_INFO",SET_FILE_SELECTION:"DB_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"DB_SET_MUTLI_FILE_SELECTION",GET_CONTEXT_FILES:"DB_GET_CONTEXT_FILES",SET_FILES_RETRIEVE_START:"DB_SET_FILES_RETRIEVE_START",SET_FILES_RETRIEVE_FAILED:"DB_SET_FILES_RETRIEVE_FAILED",SET_FILES_RETRIEVE_SUCCESS:"DB_SET_FILES_RETRIEVE_SUCCESS",SET_ACCOUNT_INFO_REQUESTED:"DB_SET_ACCOUNT_INFO_REQUESTED",SET_ACCOUNT_INFO_FAILED:"DB_SET_ACCOUNT_INFO_FAILED",SET_ACCOUNT_INFO_SUCCESS:"DB_SET_ACCOUNT_INFO_SUCCESS",SET_USER_LOGOUT_SUCCESS:"DB_SET_USER_LOGOUT_SUCCESS",SET_SEARCH_TERM:"DB_SET_SEARCH_TERM",SET_LOADED_THUMBNAILS:"DB_SET_LOADED_THUMBNAILS",SET_THUMBNAILS:"DB_SET_THUMBNAILS",DO_LOGOUT:"DB_DO_LOGOUT",DO_FILE_SEARCH:"DB_DO_FILE_SEARCH",CLEAR_FILES_FOR_CONTEXT:"DB_CLEAR_FILES_FOR_CONTEXT",CLEAR_IMAGE_SELECTION:"DB_CLEAR_IMAGE_SELECTION",CLEAR_ALL_SELECTION:"DB_CLEAR_ALL_SELECTION"},S=((o={})[l.a.CONTEXTS.FOLDER]=function(e,t){return Object(u.default)().getFoldersList(f({token:e},t))},o[l.a.CONTEXTS.SEARCH]=function(e,t){return Object(u.default)().getSearchResults(f({token:e},t))},o[l.a.CONTEXTS.RECENT]=function(e,t){return Object(u.default)().getRecents(f({token:e},t))},o),v=(E=m(regeneratorRuntime.mark(function e(t,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.log("[dropboxTab.actions]: about to retrieve account info"),e.prev=1,n(O.SET_ACCOUNT_INFO_REQUESTED),e.next=5,Object(u.default)().getAccountInfo(t);case 5:o=e.sent,h.log("[dropboxTab.actions]: retrieved account info: ",o),n(O.SET_ACCOUNT_INFO_SUCCESS,{account:o}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),h.error("[dropboxTab.actions]: failed to get account info",e.t0),n(O.SET_ACCOUNT_INFO_FAILED);case 14:case"end":return e.stop()}},e,p,[[1,10]])})),function(e,t){return E.apply(this,arguments)}),T=function(e,t){var n=Object(s.c)(t);n(O.SET_AUTH_INFO,e),e&&e.token&&v(e,n)},j=(_=m(regeneratorRuntime.mark(function e(t,n,o){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,Object(u.default)().retrieveItemsThumbs(n);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=[];case 7:(r=e.t0).length&&o(O.SET_THUMBNAILS,{context:t,thumbs:r});case 9:case"end":return e.stop()}},e,p)})),function(e,t,n){return _.apply(this,arguments)});t.default=Object(s.d)(O,((r={})[O.CLEAR_IMAGE_SELECTION]=Object(s.b)(function(e,t){Object(s.c)(t)([[O.CLEAR_IMAGE_SELECTION,{context:e}],[i.types.CLEAR_MAX_SELECT_REACHED]])}),r[O.INIT_AUTH]=Object(s.b)(function(e,t){return T(Object(u.default)().getAuthInfo(e),t)}),r[O.SET_AUTH_INFO]=Object(s.b)(T),r[O.GET_CONTEXT_FILES]=Object(s.b)((g=m(regeneratorRuntime.mark(function e(t,n,o,r){var a,i,c,u,l;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.c)(o),h.log("[dropboxTab.actions]: about to retrieve files from db for context: "+t),e.prev=2,a(O.SET_FILES_RETRIEVE_START,{context:t}),n&&n.extend?(i=Object(d.selectContextItems)(r()),n=f({},n,{items:i.items,cursor:i.cursor,hasMore:i.hasMore})):a(O.CLEAR_FILES_FOR_CONTEXT,{context:t}),c=Object(d.selectAuthData)(r()),u=c.token,e.next=9,S[t](u,n,a);case 9:l=e.sent,h.log("[dropboxTab.actions]: finished retrieving files for context: "+t,l),a(O.SET_FILES_RETRIEVE_SUCCESS,f({context:t},l)),j(t,l.items,a),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(2),h.error("[dropboxTab.actions]: encountered error when trying to retrieve context photos",e.t0),a(O.SET_FILES_RETRIEVE_FAILED,{context:t});case 19:case"end":return e.stop()}},e,p,[[2,15]])})),function(e,t,n,o){return g.apply(this,arguments)})),r[O.SET_FILE_SELECTION]=Object(s.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple,s=Object(d.selectCurrentContext)(n()).context;return Object(c.a)({id:o,e:r,types:f({},i.types,O),rootBindActions:i.default,selectIsIdSelected:d.selectIsIdSelected,selectReachedMaxSelection:d.selectReachedMaxSelection,selectMultipleIdsInRange:d.selectMultipleIdsInRange,selectAvailableUntilMax:d.selectAvailableUntilMax,selectionParams:[s],multiple:a},t,n)}),r[O.DO_LOGOUT]=Object(s.b)((b=m(regeneratorRuntime.mark(function e(t,n){var o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Object(s.c)(t),r=Object(d.selectAuthData)(n()),e.prev=1,h.log("[dropboxTab.actions]: about to log out dropbox user"),e.next=5,Object(u.default)().logout(r);case 5:o(O.SET_USER_LOGOUT_SUCCESS),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),h.error("[dropboxTab.actions]: failed to log out user",e.t0);case 11:case"end":return e.stop()}},e,p,[[1,8]])})),function(e,t){return b.apply(this,arguments)})),r))},"./tabs/Dropbox/components/Breadcrumb/Breadcrumb.scss":function(e,t){},"./tabs/Dropbox/components/Breadcrumb/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"Breadcrumb",function(){return i});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/i18n.js"),s=n("./tabs/Dropbox/components/Breadcrumb/Breadcrumb.scss"),i=(n.n(s),function(e){var t=e.path.split("/"),n=function(t,n,o){return o?r.a.createElement("span",null,t):r.a.createElement("button",{className:"link",onClick:function(){return t=n,void e.pathClickHandler(t);var t}},t)},o=function(e,o){var s=t.slice(0,o+1).join("/"),i=e||Object(a.b)("dropbox.root_crumb"),c=o+1===t.length;return r.a.createElement("li",{key:s,className:"crumb "+(c?"active":"")},n(i,s,c))};return r.a.createElement("div",{className:"breadcrumbs"},r.a.createElement("ul",null,t.map(o)))});t.default=i},"./tabs/Dropbox/components/ContextItems/ContextItems.scss":function(e,t){},"./tabs/Dropbox/components/ContextItems/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("../node_modules/react/index.js"),a=n.n(r),s=n("../node_modules/react-redux/es/index.js"),i=n("../node_modules/reselect/lib/index.js"),c=(n.n(i),n("./root/components/ResultImageGrid/index.js")),u=n("./tabs/Dropbox/data/consts.js"),l=n("./tabs/Dropbox/actions/index.js"),d=n("./tabs/Dropbox/selectors/index.js"),p=n("./tabs/Dropbox/components/FolderList/index.js"),f=n("./tabs/Dropbox/components/ContextItems/ContextItems.scss");n.n(f);function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var E=1,_=2,b=((o={})[u.a.CONTEXTS.FOLDER]=E,o[u.a.CONTEXTS.SEARCH]=_,o[u.a.CONTEXTS.RECENT]=_,o),g=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=m(this,e.call.apply(e,[this].concat(a))),o.onSelection=function(e,t){o.props.selectionAction?o.props.selectionAction(e):o.props[l.types.SET_FILE_SELECTION]({id:e,e:t,multiple:o.props.isMultiple})},o.onFolderClick=function(e){o.props[l.types.GET_CONTEXT_FILES](o.props.context,{path:e.path_lower})},o.wayPointAction=function(){o.props[l.types.GET_CONTEXT_FILES](o.props.context,{extend:!0,term:o.props.searchData.searchTerm})},m(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[l.types.GET_CONTEXT_FILES](this.props.context,{term:this.props.searchData.searchTerm})},t.prototype.renderItemsByDisplayType=function(e){return b[this.props.context]===E?a.a.createElement(p.default,{items:e.items,selected:e.selected,metadata:e.metadata,isMultiple:this.props.isMultiple,selectionAction:this.onSelection,showProgressIndicator:e.inProgress,folderClickAction:this.onFolderClick}):a.a.createElement(c.default,{images:e.items,selected:e.selected,isMultiple:this.props.isMultiple,selectionAction:this.onSelection,showProgressIndicator:e.inProgress,waypointAction:this.wayPointAction})},t.prototype.render=function(){return a.a.createElement("div",{className:"context-items photos-"+this.props.context},this.renderItemsByDisplayType(this.props.data))},t}(r.Component);t.default=Object(s.b)(Object(i.createStructuredSelector)({data:d.selectContextItems,searchData:d.selectSearchTerm}),l.default)(g)},"./tabs/Dropbox/components/FolderList/FileRow/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/moment/moment.js"),s=n.n(a),i=n("./root/components/SvgIcon/index.js");t.default=function(e){return r.a.createElement("div",{className:"table-row file-row "+(e.isSelected?"active":""),onClick:e.rowClickHandler},r.a.createElement("div",{className:"checkbox"},r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:e.isSelected||!1,onClick:e.rowClickHandler}),r.a.createElement("span",{className:"fake-input"}))),r.a.createElement("div",{className:"file"},e.item.thumbnail?r.a.createElement("img",{src:e.item.thumbnail,alt:""}):r.a.createElement(i.default,{path:i.SVG_ICONS.FILE,height:"20",width:"20"})),r.a.createElement("div",{className:"name"},e.item.name),r.a.createElement("div",{className:"modified"},s()(e.item.client_modified).format("LL")))}},"./tabs/Dropbox/components/FolderList/FolderList.scss":function(e,t){},"./tabs/Dropbox/components/FolderList/FolderRow/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/moment/moment.js"),s=n.n(a),i=n("./root/components/SvgIcon/index.js");t.default=function(e){return r.a.createElement("div",{className:"table-row folder-row",onClick:e.rowClickHandler},r.a.createElement("div",{className:"checkbox"},r.a.createElement("label",null)),r.a.createElement("div",{className:"file"},r.a.createElement(i.default,{path:i.SVG_ICONS.FOLDER,fill:"#616161",height:"20",width:"24"})),r.a.createElement("div",{className:"name"},e.item.name),r.a.createElement("div",{className:"modified"},s()(e.item.client_modified).format("LL")))}},"./tabs/Dropbox/components/FolderList/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/i18n.js"),s=n("./root/components/ProgressIndicator/index.js"),i=n("./root/components/NoResults/index.js"),c=n("./tabs/Dropbox/components/Breadcrumb/index.js"),u=n("./tabs/Dropbox/components/FolderList/FileRow/index.js"),l=n("./tabs/Dropbox/components/FolderList/FolderRow/index.js"),d=n("./tabs/Dropbox/components/FolderList/FolderList.scss"),p=(n.n(d),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e});t.default=function(e){var t=e.showProgressIndicator?r.a.createElement(s.default,null):null,n=function(t,n){var o,a="folder"===t[".tag"],s="tbl_row_"+n,i={item:t,isSelected:(o=t,!!~e.selected.indexOf(o.id)),rowClickHandler:function(t,n,o){return n?e.folderClickAction(t):e.selectionAction(t.id,o)}.bind(null,t,a)};return a?r.a.createElement(l.default,p({},i,{key:s})):r.a.createElement(u.default,p({},i,{key:s}))};return r.a.createElement("div",{className:"folder-list-container"},r.a.createElement(c.default,{path:e.metadata&&e.metadata.path_display||"",pathClickHandler:function(t){return e.folderClickAction({path_lower:t})}}),r.a.createElement("div",{className:"folder-list table-block"},t,r.a.createElement("div",{className:"table-head"},r.a.createElement("div",{className:"checkbox"},r.a.createElement("label",null)),r.a.createElement("div",{className:"file"}),r.a.createElement("div",{className:"name"},Object(a.b)("dropbox.list_headers.name")),r.a.createElement("div",{className:"modified"},Object(a.b)("dropbox.list_headers.modified"))),r.a.createElement("div",{className:"table-body"},e.items&&e.items.length?e.items.map(n):e.showProgressIndicator?null:r.a.createElement(i.default,null)),r.a.createElement("div",{className:"bottom-spacer"})))}},"./tabs/Dropbox/data/consts.js":function(e,t,n){"use strict";t.a={CONTEXTS:{FOLDER:1,RECENT:2,SEARCH:4}}},"./tabs/Dropbox/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/react-router-dom/es/index.js"),i=n("../node_modules/reselect/lib/index.js"),c=n("./uploader/index.js"),u=n("./common/i18n.js"),l=n("./common/logger.js"),d=n("./tabs/hocs/TabPanel.js"),p=n("./root/components/ServiceLoginIntro/index.js"),f=n("./root/components/RouteWithSubRoutes/index.js"),m=n("./root/components/TabHeader/index.js"),E=n("./root/components/TabFooter/index.js"),_=n("./tabs/Dropbox/components/ContextItems/index.js"),b=n("./tabs/Dropbox/service/index.js"),g=n("./tabs/Dropbox/data/consts.js"),h=n("./routing/utils.js"),O=void 0,S=n("./tabs/Dropbox/actions/index.js"),v=n("./tabs/Dropbox/selectors/index.js");n("./tabs/Dropbox/DropboxTab.scss");n.d(t,"listenForAuth",function(){return x}),n.d(t,"DropBoxTab",function(){return C});var T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var I=Object(l.b)(),x=function(e){var t=void 0;if(!e.tabData.isLoggedIn){var n=e.actions[S.types.SET_AUTH_INFO],o=e.tabData.cloudName;e.actions[S.types.INIT_AUTH](o),t=Object(b.default)().setAuthListener(o).then(function(e){return n({token:e.token})})}return t||Promise.resolve()},C=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=j(this,e.call.apply(e,[this].concat(a))),o.onClearSelectedClick=function(){o.props.actions[S.types.CLEAR_IMAGE_SELECTION](o.props.tabData.currentContext)},o.onNoAuthActionClick=function(){Object(b.default)().openAuthWindow({externalKey:o.props.dropBoxAppKey})},o.onUserLogout=function(){o.props.actions[S.types.DO_LOGOUT]()},o.onUploadButtonClick=function(){return Object(b.default)().getUrlsForUpload({token:o.props.authData.token,files:o.props.contextData.selected}).then(function(e){o.props.addToUploadQueue({files:e}),o.props.actions[S.types.CLEAR_ALL_SELECTION]()}).catch(function(e){return I.error("[dropboxTab]: encountered error when trying to upload files",e)})},o.onSearchTermChange=function(e){o.props.actions[S.types.SET_SEARCH_TERM]({term:e})},o.onSearchClick=function(){o.props.actions[S.types.GET_CONTEXT_FILES](g.a.CONTEXTS.SEARCH,{term:o.props.tabData.searchTerm})},j(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){x(this.props)},t.prototype.componentWillUpdate=function(e){x(e)},t.prototype.renderSubRoutes=function(){var e=this;return this.props.routes.map(function(t){return r.a.createElement(f.default,T({key:"db_route_"+t.path},t,{isMultiple:e.props.tabData.isMultiple}))})},t.prototype.renderDefaultRoute=function(){var e=this;return r.a.createElement(s.b,{render:function(){return r.a.createElement(_.default,{context:g.a.CONTEXTS.FOLDER,isMultiple:e.props.tabData.isMultiple})}})},t.prototype.renderTabContent=function(){return this.props.tabData.isLoggedIn?this.renderAuthedContent():r.a.createElement(p.default,{key:"db_login_intro",title:Object(u.b)("dropbox.no_auth_title"),actionTitle:Object(u.b)("dropbox.no_auth_action"),btnClass:"btn-dropbox",actionHandler:this.onNoAuthActionClick})},t.prototype.renderAuthedContent=function(){return r.a.createElement("div",{className:"tabs-block tab-authed"},r.a.createElement(m.default,{showSearch:!0,source:c.consts.SOURCES.DROPBOX,navItems:(O||(O=[{path:Object(h.a)(c.consts.SOURCES.DROPBOX),title:Object(u.b)("dropbox.menu.browse")},{path:Object(h.a)(c.consts.SOURCES.DROPBOX,"recent"),title:Object(u.b)("dropbox.menu.recent")}]),O),userName:this.props.tabData.userName,searchTerm:this.props.tabData.searchTerm,onLogout:this.onUserLogout,searchTermHandler:this.onSearchTermChange,searchClickHandler:this.onSearchClick}),r.a.createElement(s.c,null,this.renderSubRoutes(),this.renderDefaultRoute()))},t.prototype.renderFooter=function(){var e=this.props.contextData,t=e&&e.selected&&e.selected.length;return r.a.createElement(E.default,{showSelection:!0,selectionCount:t,clearSelectionHandler:this.onClearSelectedClick,uploadButtonHandler:this.onUploadButtonClick})},t.prototype.render=function(){return r.a.createElement("div",{className:"dropbox-block "+(this.props.tabData.isLoggedIn?"user-active":"")},r.a.createElement("div",{className:"holder"},this.renderTabContent()),this.renderFooter())},t}(o.Component);t.default=Object(d.a)({id:c.consts.SOURCES.DROPBOX,title:Object(u.b)("dropbox.main_title")})(Object(a.b)(Object(i.createStructuredSelector)({tabData:v.selectTabData,contextData:v.selectContextItems,authData:v.selectAuthData,dropBoxAppKey:v.selectExtDropboxKey}),function(e){return{actions:Object(S.default)(e)}})(C))},"./tabs/Dropbox/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),a=n.n(r),s=n("./common/reducerBase.js"),i=n("./tabs/common/reducerMethods.js"),c=n("./tabs/Dropbox/data/consts.js"),u=c.a.CONTEXTS,l=function(){var e;return a()({lists:(e={},e[u.FOLDER]={items:[],metadata:{},cursor:0,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},e[u.RECENT]={items:[],metadata:{},cursor:0,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},e[u.SEARCH]={items:[],metadata:{},cursor:0,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},e),currentContext:u.FOLDER,token:null,account:null,searchTerm:""})},d=n("./tabs/Dropbox/actions/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=c.a.CONTEXTS;t.default={dropbox:Object(s.a)(l(),(o={},o[d.types.SET_AUTH_INFO]=function(e,t){var n=t.payload;return e.set("token",n.token)},o[d.types.SET_FILES_RETRIEVE_START]=function(e,t){var n=t.payload;return e.set("currentContext",n.context).setIn(["lists",n.context,"inProgress"],!0)},o[d.types.SET_FILES_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],p({},e.lists[n.context],{inProgress:!1,items:n.items,metadata:n.metadata,cursor:n.cursor,hasMore:n.hasMore}))},o[d.types.SET_FILE_SELECTION]=i.b,o[d.types.SET_MULTI_FILE_SELECTION]=i.a,o[d.types.CLEAR_FILES_FOR_CONTEXT]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],p({},{items:[],metadata:{},cursor:0,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},{inProgress:e.lists[n.context].inProgress}))},o[d.types.CLEAR_IMAGE_SELECTION]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"selected"],[])},o[d.types.SET_ACCOUNT_INFO_SUCCESS]=function(e,t){var n=t.payload;return e.set("account",n.account)},o[d.types.SET_USER_LOGOUT_SUCCESS]=function(e){return e.replace(l())},o[d.types.SET_SEARCH_TERM]=function(e,t){var n=t.payload;return e.set("searchTerm",n.term)},o[d.types.SET_THUMBNAILS]=function(e,t){var n=t.payload;return e.updateIn(["lists",n.context,"items"],function(e){return e=e.asMutable(),n.thumbs.forEach(function(t,n){e[n].thumbnail!==t&&(e[n]=p({},e[n],{thumbnail:t}))}),e})},o[d.types.CLEAR_ALL_SELECTION]=function(e){var t;return e.merge({lists:(t={},t[f.FOLDER]={selected:[]},t[f.RECENT]={selected:[]},t[f.SEARCH]={selected:[]},t)},{deep:!0})},o))}},"./tabs/Dropbox/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./uploader/index.js"),s=n("./routing/utils.js"),i=n("./common/i18n.js"),c=n("./tabs/Dropbox/index.js"),u=n("./tabs/Dropbox/service/index.js"),l=n("./tabs/Dropbox/data/consts.js"),d=n("./tabs/Dropbox/components/ContextItems/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=a.consts.SOURCES;t.default=[{path:Object(s.a)(f.DROPBOX),component:c.default,routes:[{path:Object(s.a)(f.DROPBOX,"recent"),render:function(e){return r.a.createElement(d.default,p({context:l.a.CONTEXTS.RECENT},e))}},{path:Object(s.a)(f.DROPBOX,"search"),render:function(e){return r.a.createElement(d.default,p({context:l.a.CONTEXTS.SEARCH},e))}}]},{path:Object(s.a)(f.DROPBOX,"auth"),render:function(){return Object(u.default)().postAuthResult(),r.a.createElement("div",{className:"coverall"},r.a.createElement("h3",null,Object(i.b)("dropbox.authenticating")))}}]},"./tabs/Dropbox/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectAuthData",function(){return _}),n.d(t,"selectTabData",function(){return E}),n.d(t,"selectContextItems",function(){return c}),n.d(t,"selectSearchTerm",function(){return b}),n.d(t,"selectIsIdSelected",function(){return l}),n.d(t,"selectReachedMaxSelection",function(){return u}),n.d(t,"selectCurrentContext",function(){return d}),n.d(t,"selectExtDropboxKey",function(){return g}),n.d(t,"selectMultipleIdsInRange",function(){return p}),n.d(t,"selectAvailableUntilMax",function(){return f});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./root/selectors/index.js")),a=n("./tabs/common/selectors.js"),s="dropbox",i=Object(a.d)(s),c=Object(a.f)(s),u=Object(a.j)(s),l=Object(a.h)(s),d=Object(a.g)(s),p=Object(a.i)(s),f=Object(a.e)(s),m=function(e){return{searchTerm:e.dropbox.searchTerm}},E=Object(o.createSelector)(r.getWidgetConfig,function(e){return{isLoggedIn:!!e.dropbox.token,searchTerm:m(e).searchTerm,currentContext:i(e).context,account:e.dropbox.account}},function(e,t){return{cloudName:e.cloud_name,isMultiple:e.multiple,isLoggedIn:t.isLoggedIn,currentContext:t.currentContext,searchTerm:t.searchTerm,userName:t.account&&t.account.name&&t.account.name.familiar_name}}),_=Object(o.createSelector)(r.getWidgetConfig,function(e){return e.dropbox.token},function(e,t){return{token:t,cloudName:e.cloud_name}}),b=Object(o.createSelector)(m,function(e){return e}),g=Object(o.createSelector)(r.getWidgetConfig,function(e){return e.dropbox_app_key})},"./tabs/Dropbox/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/dropbox/src/index.js"),r=n.n(o),a=n("./appConfig.js"),s=n("./utils/domUtils.js"),i=n("./uploader/index.js"),c=n("./common/logger.js"),u=n("./services/index.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},d=this;function p(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var f=Object(c.c)(),m=a.a.dropbox.clientId,E=["jpg","jpeg","png","tiff","tif","gif","bmp"],_=null;t.default=function(){f.log("[dropboxService]: creating dropbox api for client id: "+m);var e,t,n,o,c,b,g=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"jpeg";return e.filesGetThumbnail({path:t,format:o,size:n})},h=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"w250";return e.map(function(e){e.link=e.url=e.id;var o=E.find(function(t){return~e.name.indexOf(t)});return e.retrieveThumb=p(regeneratorRuntime.mark(function r(){var a,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=e.thumbnail,!o){r.next=6;break}return r.next=4,g(t,e.id,n);case 4:s=r.sent,a=self.URL.createObjectURL(s.fileBlob)||"";case 6:return e.retrieveThumb=null,r.abrupt("return",a);case 8:case"end":return r.stop()}},r,d)})),e})},O=function(e,t){return e?Promise.all(e.map(function(e){return t.filesGetMetadata({path:e.metadata.id,include_media_info:!0})})):[]},S=function(e,t){return h(e,t,"w640h480").map(function(e){return l({},e,{title:(t=e,t.media_info&&t.media_info.metadata&&t.media_info.metadata.dimensions?t.media_info.metadata.dimensions.width+" × "+t.media_info.metadata.dimensions.height:""),subtitle:e.name});var t})};return{getAuthInfo:function(e){return{token:u.common.getStoredAuthToken(e,i.consts.SOURCES.DROPBOX)}},openAuthWindow:function(e){var t=new r.a({clientId:e.externalKey||m}),n=u.common.getAuthRedirectUrl("dropbox/auth"),o=t.getAuthenticationUrl(n);f.log("[dropboxService]: created dropbox login link: "+o),_=Object(s.f)(o,"DropboxAuthwin")},postAuthResult:function(){var e=self.location;self.opener.postMessage(""+e.hash,e.protocol+"//"+e.host)},setAuthListener:function(e){return u.common.setMessageAuthListener(function(){return _},e,i.consts.SOURCES.DROPBOX).then(function(e){return _=null,e})},logout:(e=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r.a({accessToken:t.token}),e.prev=1,e.next=4,n.authTokenRevoke();case 4:return e.prev=4,u.common.removeAuthToken(t.cloudName,i.consts.SOURCES.DROPBOX),e.finish(4);case 7:case"end":return e.stop()}},e,d,[[1,,4,7]])})),function(t){return e.apply(this,arguments)}),getAccountInfo:function(e){var t=new r.a({accessToken:e.token});return f.log("[dropboxService]: about to retrieve account info"),t.usersGetCurrentAccount()},getFoldersList:(t=p(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r.a({accessToken:t.token}),e.abrupt("return",Promise.all([n.filesListFolder({path:t.path||""}),t.path?n.filesGetMetadata({path:t.path}):{}]).then(function(e){return f.log("[dropboxService]: retrieved folder list data ",e),{folders:{},metadata:e[1],items:e[0]&&e[0].entries?h(e[0].entries,n,"w32h32"):{}}}));case 2:case"end":return e.stop()}},e,d)})),function(e){return t.apply(this,arguments)}),getSearchResults:(n=p(regeneratorRuntime.mark(function e(t){var n,o,s,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new r.a({accessToken:t.token}),f.log("[dropboxService]: search called with query term: "+t.term),!t.term||(c=t).cursor&&!0!==c.hasMore){e.next=8;break}return e.next=5,n.filesSearch({path:"",query:t.term,start:t.cursor,max_results:a.a.dropbox.maxResults});case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=null;case 9:if(o=e.t0,s=o&&o.start||0,i=!(!o||!o.more),!o){e.next=17;break}return e.next=14,O(o.matches,n);case 14:e.t1=e.sent,e.next=18;break;case 17:e.t1=[];case 18:return o=e.t1,o=S(o,n),e.abrupt("return",{items:t.cursor?t.items.concat(o):o,metadata:null,cursor:s,hasMore:i});case 21:case"end":return e.stop()}var c},e,d)})),function(e){return n.apply(this,arguments)}),getRecents:(o=p(regeneratorRuntime.mark(function e(t){var n,o,a,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new r.a({accessToken:t.token}),f.log("[dropboxService]: retrieving recent files"),!t.cursor||!t.hasMore){e.next=8;break}return e.next=5,n.filesListFolderContinue({cursor:t.cursor});case 5:e.t0=e.sent,e.next=11;break;case 8:return e.next=10,n.filesListFolder({path:"",recursive:!0,include_media_info:!0});case 10:e.t0=e.sent;case 11:return o=e.t0,a=o&&o.cursor||0,s=!(!o||!o.has_more),o=o&&o.entries?o.entries.filter(function(e){return e.media_info}):[],o=S(o,n),e.abrupt("return",{items:t.cursor?t.items.concat(o):o,metadata:null,cursor:a,hasMore:s});case 16:case"end":return e.stop()}},e,d)})),function(e){return o.apply(this,arguments)}),getUrlsForUpload:(c=p(regeneratorRuntime.mark(function e(t){var n,o,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new r.a({accessToken:t.token}),e.next=3,Promise.all([].concat(t.files).map(function(){var e=p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.filesDownload({path:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)}));return function(t){return e.apply(this,arguments)}}()));case 3:return o=e.sent,a=function(e){var t=e.fileBlob;try{t=Object(s.d)()?t:new File([e.fileBlob],e.name)}catch(e){f.warn("[dropboxService]: failed to get File from dropbox blob: ",e)}return t},e.abrupt("return",o.map(function(e){return e?a(e):null}).filter(function(e){return e}));case 6:case"end":return e.stop()}},e,d)})),function(e){return c.apply(this,arguments)}),retrieveItemsThumbs:(b=p(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(e){return e.retrieveThumb?e.retrieveThumb():e.thumbnail}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,d)})),function(e){return b.apply(this,arguments)})}}},"./tabs/Dropbox/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{dropbox:{main_title:"Dropbox",no_auth_title:"Upload files from your Dropbox account",no_auth_action:"Connect to Dropbox",no_photos:"No Photos",no_files:"No Files",root_crumb:"Root",list_headers:{select:"Select",name:"Name",modified:"Modified"},menu:{browse:"Browse",recent:"Recent"},authenticating:"Authenticating..."}}}}},"./tabs/Facebook/FacebookTab.scss":function(e,t){},"./tabs/Facebook/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return v});var o,r,a=n("./common/logger.js"),s=n("./common/actionsBase.js"),i=n("./root/actions/index.js"),c=n("./tabs/common/actionMethods.js"),u=n("./tabs/Facebook/data/consts.js"),l=n("./tabs/Facebook/selectors/index.js"),d=n("./tabs/Facebook/service/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=this;function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var E,_,b,g,h,O,S=Object(a.b)(),v={DO_LOGIN:"FB_DO_LOGIN",DO_LOGOUT:"FB_DO_LOGOUT",DO_REQUEST_FB_STATUS:"REQUEST_FB_STATUS",GET_CONTEXT_PHOTOS:"GET_CONTEXT_PHOTOS",SET_FILE_SELECTION:"FB_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"FB_SET_MUTLI_FILE_SELECTION",SET_LOGIN_STATUS_REQUESTED:"FB_SET_LOGIN_STATUS_REQUESTED",SET_LOGIN_STATUS_SUCCESS:"FB_SET_LOGIN_STATUS_SUCCEEDED",SET_LOGIN_STATUS_FAILED:"FB_SET_LOGIN_STATUS_FAILED",SET_USER_REQUESTED:"FB_SET_USER_REQUESTED",SET_USER_FAILED:"FB_SET_USER_FAILED",SET_USER_SUCCESS:"FB_SET_USER_SUCCEEDED",SET_USER_LOGIN_SUCCESS:"FB_SET_USER_LOGIN_SUCCEEDED",SET_USER_LOGOUT_SUCCESS:"FB_SET_USER_LOGOUT_SUCCESS",SET_USER_LOGIN_FAILED:"FB_SET_USER_LOGIN_FAILED",SET_USER_LOGIN_REQUESTED:"FB_SET_USER_LOGIN_REQUESTED",SET_PHOTOS_RETRIEVE_START:"FB_SET_PHOTOS_RETRIEVE_START",SET_PHOTOS_RETRIEVE_FAILED:"FB_SET_PHOTOS_RETRIEVE_FAILED",SET_PHOTOS_RETRIEVE_SUCCESS:"FB_SET_PHOTOS_RETRIEVE_SUCCESS",SET_ALBUM_RETRIEVE_SUCCESS:"FB_SET_ALBUM_RETRIEVE_SUCCESS",CLEAR_IMAGE_SELECTION:"FB_CLEAR_IMAGE_SELECTION",CLEAR_ALL_SELECTION:"FB_CLEAR_ALL_SELECTION",CLEAR_PHOTOS_FOR_CONTEXT:"FB_CLEAR_PHOTOS_FOR_CONTEXT"},T=(E=m(regeneratorRuntime.mark(function e(t,n,o){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.log("[facebookTab.actions]: about to retrieve fb user: ",n),e.prev=1,o(v.SET_USER_REQUESTED),e.next=5,t.getUser(n);case 5:r=e.sent,S.log("[facebookTab.actions]: retrieved fb user: ",r),o(v.SET_USER_SUCCESS,{user:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),o(v.SET_USER_FAILED,{error:e.t0});case 13:case"end":return e.stop()}},e,f,[[1,10]])})),function(e,t,n){return E.apply(this,arguments)}),j=((o={})[u.a.CONTEXTS.UPLOADED_PHOTOS]=function(e,t){return Object(d.default)().getUploadedPhotos(p({auth:e},t))},o[u.a.CONTEXTS.TAGGED_PHOTOS]=function(e,t){return Object(d.default)().getTaggedPhotos(p({auth:e},t))},o[u.a.CONTEXTS.ALBUMS]=function(e,t){return Object(d.default)().getAlbums(p({auth:e},t))},o[u.a.CONTEXTS.ALBUM_PHOTOS]=(_=m(regeneratorRuntime.mark(function e(t,n,o){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(d.default)().getAlbum(p({auth:t},n));case 2:return r=e.sent,o(v.SET_ALBUM_RETRIEVE_SUCCESS,{album:r.album}),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,f)})),function(e,t,n){return _.apply(this,arguments)}),o);t.default=Object(s.d)(v,((r={})[v.CLEAR_IMAGE_SELECTION]=Object(s.b)(function(e,t){Object(s.c)(t)([[v.CLEAR_IMAGE_SELECTION,{context:e}],[i.types.CLEAR_MAX_SELECT_REACHED]])}),r[v.DO_REQUEST_FB_STATUS]=Object(s.b)((O=m(regeneratorRuntime.mark(function e(t){var n,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.c)(t),o=Object(d.default)(),S.log("[facebookTab.actions]: about to initialize facebook api"),e.next=4,o.init();case 4:return e.prev=4,n(v.SET_LOGIN_STATUS_REQUESTED),e.next=8,o.getLoginStatus();case 8:return r=e.sent,S.log("[facebookTab.actions]: retrieved user login status: ",r),n(v.SET_LOGIN_STATUS_SUCCESS,{auth:r}),e.next=13,T(o,r,n);case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),t(v.SET_LOGIN_STATUS_FAILED,{error:e.t0});case 18:case"end":return e.stop()}},e,f,[[4,15]])})),function(e){return O.apply(this,arguments)})),r[v.DO_LOGIN]=Object(s.b)((h=m(regeneratorRuntime.mark(function e(t){var n,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.c)(t),o=Object(d.default)(),e.prev=1,n(v.SET_USER_LOGIN_REQUESTED),S.log("[facebookTab.actions]: about to do user login"),e.next=6,o.login();case 6:return r=e.sent,n(v.SET_USER_LOGIN_SUCCESS,{auth:r}),S.log("[facebookTab.actions]: successfully logged in fb user"),e.next=11,T(o,r,n);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),S.error("[facebookTab.actions]: encountered error on user login"),n(v.SET_USER_LOGIN_FAILED,{error:e.t0});case 17:case"end":return e.stop()}},e,f,[[1,13]])})),function(e){return h.apply(this,arguments)})),r[v.DO_LOGOUT]=Object(s.b)((g=m(regeneratorRuntime.mark(function e(t){var n,o,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(s.c)(t),o=Object(d.default)(),e.prev=1,S.log("[facebookTab.actions]: about to log out user"),e.next=5,o.logout();case 5:r=e.sent,n(v.SET_USER_LOGOUT_SUCCESS,{auth:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),S.error("[facebookTab.actions]: encountered error on user logout");case 12:case"end":return e.stop()}},e,f,[[1,9]])})),function(e){return g.apply(this,arguments)})),r[v.GET_CONTEXT_PHOTOS]=Object(s.b)((b=m(regeneratorRuntime.mark(function e(t,n,o,r){var a,i,c,u,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(s.c)(o),e.prev=1,a(v.SET_PHOTOS_RETRIEVE_START,{context:t}),S.log("[facebookTab.actions]: about to get photos for context: "+t),n&&n.extend?(i=Object(l.selectContextItems)(r()),n=p({},n,{items:i.items,cursor:i.cursor})):a(v.CLEAR_PHOTOS_FOR_CONTEXT,{context:t}),c=Object(l.selectAuthData)(r()),u=c.auth,e.next=9,j[t](u,n,a);case 9:d=e.sent,S.log("[facebookTab.actions]: finished retrieving photos for context: "+t),a(v.SET_PHOTOS_RETRIEVE_SUCCESS,p({context:t},d)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),S.error("[facebookTab.actions]: encountered error when trying to retrieve context photos",e.t0),a(v.SET_PHOTOS_RETRIEVE_FAILED,{context:t});case 18:case"end":return e.stop()}},e,f,[[1,14]])})),function(e,t,n,o){return b.apply(this,arguments)})),r[v.SET_FILE_SELECTION]=Object(s.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple,s=Object(l.selectCurrentContext)(n()).context;Object(c.a)({id:o,e:r,types:p({},i.types,v),rootBindActions:i.default,selectIsIdSelected:l.selectIsIdSelected,selectReachedMaxSelection:l.selectReachedMaxSelection,selectMultipleIdsInRange:l.selectMultipleIdsInRange,selectAvailableUntilMax:l.selectAvailableUntilMax,selectionParams:[s],multiple:a},t,n)}),r))},"./tabs/Facebook/components/AlbumBar/AlbumBar.scss":function(e,t){},"./tabs/Facebook/components/AlbumBar/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"AlbumBar",function(){return u});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/moment/moment.js"),s=n.n(a),i=n("./root/components/SvgIcon/index.js"),c=n("./tabs/Facebook/components/AlbumBar/AlbumBar.scss"),u=(n.n(c),function(e){return r.a.createElement("div",{className:"album-bar"},r.a.createElement("div",{className:"go-back",onClick:e.onGoBack},r.a.createElement(i.default,{path:i.SVG_ICONS.BACK})),r.a.createElement("h2",{className:"album-title"},e.albumData.name||""),r.a.createElement("div",{className:"album-date"},s()(e.albumData.created_time).format("ll")))});t.default=u},"./tabs/Facebook/components/ContextPhotos/ContextPhotos.scss":function(e,t){},"./tabs/Facebook/components/ContextPhotos/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("./root/components/ResultImageGrid/index.js"),i=n("./tabs/Facebook/selectors/index.js"),c=n("./tabs/Facebook/actions/index.js"),u=n("./tabs/Facebook/components/ContextPhotos/ContextPhotos.scss");n.n(u);function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=l(this,e.call.apply(e,[this].concat(a))),o.onSelection=function(e,t){o.props.selectionAction?o.props.selectionAction(e):o.props[c.types.SET_FILE_SELECTION]({id:e,e:t,multiple:o.props.isMultiple})},o.wayPointAction=function(){o.props.inProgress||o.props[c.types.GET_CONTEXT_PHOTOS](o.props.context,{id:o.props.contextId,extend:!0})},l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[c.types.GET_CONTEXT_PHOTOS](this.props.context,{id:this.props.contextId})},t.prototype.renderPhotos=function(){return r.a.createElement(s.default,{images:this.props.items,selected:this.props.selected,isMultiple:this.props.isMultiple,allowSelect:this.props.allowSelect,showProgressIndicator:this.props.inProgress,selectionAction:this.onSelection,waypointAction:this.wayPointAction})},t.prototype.render=function(){return r.a.createElement("div",{className:"context-items photos-"+this.props.context},this.renderPhotos())},t}(o.Component);d.defaultProps={allowSelect:!0},t.default=Object(a.b)(i.selectContextItems,c.default)(d)},"./tabs/Facebook/data/consts.js":function(e,t,n){"use strict";t.a={CONNECTED:"connected",CONTEXTS:{UPLOADED_PHOTOS:1,TAGGED_PHOTOS:2,ALBUM_PHOTOS:4,ALBUMS:8},RESOURCES:{PHOTOS:"photos",ALBUMS:"albums"},RES_TYPES:{UPLOADED:"uploaded",TAGGED:"tagged"}}},"./tabs/Facebook/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("../node_modules/react-router-dom/es/index.js"),u=n("../node_modules/reselect/lib/index.js"),l=n("./uploader/index.js"),d=n("./common/i18n.js"),p=n("./root/selectors/index.js"),f=n("./root/components/RouteWithSubRoutes/index.js"),m=n("./root/components/TabHeader/index.js"),E=n("./root/components/ProgressIndicator/index.js"),_=n("./tabs/hocs/TabPanel.js"),b=n("./root/components/TabFooter/index.js"),g=n("./root/components/ServiceLoginIntro/index.js"),h=n("./tabs/Facebook/data/consts.js"),O=n("./routing/utils.js"),S=void 0,v=n("./tabs/Facebook/selectors/index.js"),T=n("./tabs/Facebook/actions/index.js"),j=n("./tabs/Facebook/components/ContextPhotos/index.js"),I=n("./tabs/Facebook/components/AlbumBar/index.js"),x=(n("./tabs/Facebook/FacebookTab.scss"),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e});function C(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var y=function(e){return e&&e.status===h.a.CONNECTED},A=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=C(this,e.call.apply(e,[this].concat(a))),o.onUploadButtonClick=function(){o.props.addToUploadQueue({files:o.props.contextData.selected}),o.props.actions[T.types.CLEAR_ALL_SELECTION]()},o.onClearSelectedClick=function(){o.props.actions[T.types.CLEAR_IMAGE_SELECTION](o.props.tabData.currentContext)},o.onNoAuthActionClick=function(){o.props.actions[T.types.DO_LOGIN]()},o.onUserLogout=function(){o.props.actions[T.types.DO_LOGOUT]()},o.onAlbumBack=function(){o.context.router.history.goBack()},C(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.actions[T.types.DO_REQUEST_FB_STATUS]()},t.prototype.renderSubRoutes=function(){var e=this;return this.props.routes.map(function(t){return r.a.createElement(f.default,x({key:"fb_route_"+t.path},t,{isMultiple:e.props.tabData.isMultiple}))})},t.prototype.renderDefaultRoute=function(){var e=this;return r.a.createElement(c.b,{render:function(){return r.a.createElement(j.default,{isMultiple:e.props.tabData.isMultiple,context:h.a.CONTEXTS.UPLOADED_PHOTOS})}})},t.prototype.renderTabContent=function(){return self.FB?y(this.props.tabData.auth)?r.a.createElement("div",{className:"tab-authed"},r.a.createElement(m.default,{source:l.consts.SOURCES.FACEBOOK,userName:this.props.tabData.userName,navItems:(S||(S=[{path:Object(O.a)(l.consts.SOURCES.FACEBOOK),title:Object(d.b)("facebook.menu.uploaded")},{path:Object(O.a)(l.consts.SOURCES.FACEBOOK,"tagged"),title:Object(d.b)("facebook.menu.tagged")},{path:Object(O.a)(l.consts.SOURCES.FACEBOOK,"albums"),title:Object(d.b)("facebook.menu.albums")}]),S),onLogout:this.onUserLogout},this.renderHeaderContent()),r.a.createElement(c.c,null,this.renderSubRoutes(),this.renderDefaultRoute())):r.a.createElement(g.default,{key:"fb_login_intro",title:Object(d.b)("facebook.no_auth_title"),actionTitle:Object(d.b)("facebook.no_auth_action"),statement:Object(d.b)("facebook.no_auth_statement"),btnClass:"btn-fb",actionHandler:this.onNoAuthActionClick}):r.a.createElement(E.default,null)},t.prototype.renderHeaderContent=function(){var e=this.props.location.pathname.split("/").filter(function(e){return e})[1];return e&&"album"===e?r.a.createElement(I.default,{albumData:this.props.tabData.album||{},onGoBack:this.onAlbumBack}):null},t.prototype.renderFooter=function(){var e=this.props.contextData,t=e&&e.selected&&e.selected.length;return r.a.createElement(b.default,{showSelection:!0,selectionCount:t,clearSelectionHandler:this.onClearSelectedClick,uploadButtonHandler:this.onUploadButtonClick})},t.prototype.render=function(){return r.a.createElement("div",{className:"facebook-block "+(y(this.props.tabData.auth)?"user-active":"")},r.a.createElement("div",{className:"holder"},this.renderTabContent()),this.renderFooter())},t}(o.Component);A.contextTypes={router:s.a.object};t.default=Object(_.a)({id:l.consts.SOURCES.FACEBOOK,title:Object(d.b)("facebook.main_title")})(Object(i.b)(Object(u.createStructuredSelector)({tabData:v.selectTabData,contextData:v.selectContextItems,location:p.selectLocation}),function(e){return{actions:Object(T.default)(e)}})(A))},"./tabs/Facebook/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("./tabs/common/reducerMethods.js"),s=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(s),c=n("./tabs/Facebook/data/consts.js"),u=c.a.CONTEXTS,l=function(){var e;return i()({lists:(e={},e[u.ALBUM_PHOTOS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e[u.TAGGED_PHOTOS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e[u.UPLOADED_PHOTOS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e[u.ALBUMS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e),auth:null,authProgressIndicator:!1,albumData:null,user:null,currentContext:u.UPLOADED_PHOTOS})},d=n("./tabs/Facebook/actions/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=c.a.CONTEXTS;t.default={facebook:Object(r.a)(l(),(o={},o[d.types.SET_LOGIN_STATUS_SUCCESS]=function(e,t){var n=t.payload;return e.merge({auth:n.auth,authProgressIndicator:!1})},o[d.types.SET_USER_SUCCESS]=function(e,t){var n=t.payload;return e.set("user",n.user)},o[d.types.SET_USER_LOGIN_SUCCESS]=function(e,t){var n=t.payload;return e.set("auth",n.auth)},o[d.types.SET_USER_LOGOUT_SUCCESS]=function(e){return e.replace(l())},o[d.types.SET_PHOTOS_RETRIEVE_START]=function(e,t){var n=t.payload;return e.set("currentContext",n.context).setIn(["lists",n.context,"inProgress"],!0)},o[d.types.SET_PHOTOS_RETRIEVE_FAILED]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"inProgress"],!1)},o[d.types.SET_PHOTOS_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],p({},e.lists[n.context],{inProgress:!1,items:n.items,cursor:n.cursor}))},o[d.types.SET_FILE_SELECTION]=a.b,o[d.types.SET_MULTI_FILE_SELECTION]=a.a,o[d.types.SET_ALBUM_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.set("albumData",n.album)},o[d.types.CLEAR_PHOTOS_FOR_CONTEXT]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],p({},{items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},{inProgress:e.lists[n.context].inProgress}))},o[d.types.CLEAR_IMAGE_SELECTION]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"selected"],[])},o[d.types.CLEAR_ALL_SELECTION]=function(e){var t;return e.merge({lists:(t={},t[f.ALBUM_PHOTOS]={selected:[]},t[f.TAGGED_PHOTOS]={selected:[]},t[f.UPLOADED_PHOTOS]={selected:[]},t[f.ALBUMS]={selected:[]},t)},{deep:!0})},o))}},"./tabs/Facebook/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./uploader/index.js"),s=n("./routing/utils.js"),i=n("./tabs/Facebook/data/consts.js"),c=n("./tabs/Facebook/index.js"),u=n("./tabs/Facebook/components/ContextPhotos/index.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=[{path:Object(s.a)(a.consts.SOURCES.FACEBOOK),component:c.default,routes:[{path:Object(s.a)(a.consts.SOURCES.FACEBOOK,"tagged"),render:function(e){return r.a.createElement(u.default,l({context:i.a.CONTEXTS.TAGGED_PHOTOS},e))}},{path:Object(s.a)(a.consts.SOURCES.FACEBOOK,"albums"),render:function(e){return r.a.createElement(u.default,l({context:i.a.CONTEXTS.ALBUMS,selectionAction:function(t){return e.history.push({pathname:Object(s.a)(a.consts.SOURCES.FACEBOOK,"album",t),search:e.location.search,hash:e.location.hash})},allowSelect:!1},e))}},{path:Object(s.a)(a.consts.SOURCES.FACEBOOK,"album/:id"),render:function(e){return r.a.createElement(u.default,l({context:i.a.CONTEXTS.ALBUM_PHOTOS,contextId:e.match.params.id},e))}}]}]},"./tabs/Facebook/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectTabData",function(){return f}),n.d(t,"selectAuthData",function(){return m}),n.d(t,"selectContextItems",function(){return c}),n.d(t,"selectIsIdSelected",function(){return i}),n.d(t,"selectReachedMaxSelection",function(){return u}),n.d(t,"selectCurrentContext",function(){return l}),n.d(t,"selectMultipleIdsInRange",function(){return d}),n.d(t,"selectAvailableUntilMax",function(){return p});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./tabs/common/selectors.js")),a="facebook",s=Object(r.d)(a),i=Object(r.h)(a),c=Object(r.f)(a),u=Object(r.j)(a),l=Object(r.g)(a),d=Object(r.i)(a),p=Object(r.e)(a),f=Object(o.createSelector)(function(e){return{widgetConfig:e.widgetConfig,fbData:{auth:e.facebook.auth,user:e.facebook.user,currentContext:s(e).context,album:e.facebook.albumData}}},function(e){var t=e.widgetConfig,n=e.fbData;return{isMultiple:t.multiple,auth:n.auth,currentContext:n.currentContext,userName:n.user?n.user.name:"",album:n.album}}),m=Object(o.createSelector)(function(e){return e.facebook.auth},function(e){return{auth:e}})},"./tabs/Facebook/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./appConfig.js"),r=n("./common/logger.js"),a=n("./common/i18n.js"),s=n("./tabs/Facebook/data/consts.js"),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},c=this;function u(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var l=Object(r.b)(),d=s.a.RESOURCES;t.default=function(){l.log("[facebookService]: creating facebook api ");var e,t,n,r,p=void 0,f=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(function(e,n){var o;(o=self.FB).api.apply(o,t.concat([function(t){return t&&t.error?n(t.error):e(t)}]))})},m=(e=u(regeneratorRuntime.mark(function e(t,n){var o,r,s,i,u,p,m,E,_,b;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=t.resource,r=t.type,s=t.fields,i=t.id,u=n.extend?"&after="+(n.cursor||""):"",p=i||n.auth.authResponse.userID,m="/"+p+"/"+o+"?"+(r?"type="+r+"&":"")+"fields=id,name"+s+u,E=void 0,_=null,l.log("[facebookService]: about to retrieve items type: "+o+" from: "+m),!(!n.extend||n.extend&&n.cursor)){e.next=13;break}return e.next=6,f(m);case 6:b=e.sent,E=o===d.ALBUMS?b.data.map(function(e){return{id:e.id,thumbnail:e.picture.data.url,url:e.picture.data.url,title:e.name,subtitle:Object(a.b)("facebook.album_subtitle",{count:e.count}),selected:e.selected}}):b.data.map(function(e){var t=e.images[0],n=e.images.slice(-1)[0],o=t.width,r=t.height;return{id:t.source,thumbnail:n.source,url:t.source,link:t.source,title:o&&r?o+" × "+r:"",subtitle:e.name,selected:e.selected}}),l.log("[facebookService]: retrieved "+E.length+" for resource: "+o),n.extend&&(E=n.items?n.items.concat(E):E),_=b.paging?b.paging.cursors.after:null,e.next=14;break;case 13:n.extend&&(E=n.items||[]);case 14:return e.abrupt("return",{items:E,cursor:_});case 15:case"end":return e.stop()}},e,c)})),function(t,n){return e.apply(this,arguments)}),E=(t=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m({resource:d.PHOTOS,type:s.a.RES_TYPES.UPLOADED,fields:",images"},t));case 1:case"end":return e.stop()}},e,c)})),function(e){return t.apply(this,arguments)}),_=(n=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m({resource:d.PHOTOS,type:s.a.RES_TYPES.TAGGED,fields:",images"},t));case 1:case"end":return e.stop()}},e,c)})),function(e){return n.apply(this,arguments)}),b=(r=u(regeneratorRuntime.mark(function e(t){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",m({resource:s.a.RESOURCES.ALBUMS,fields:",picture,count"},t));case 1:case"end":return e.stop()}},e,c)})),function(e){return r.apply(this,arguments)});return{init:function(){return p||(p=new Promise(function(e){var t,n,r;self.fbAsyncInit=function(){self.FB.init({appId:o.a.facebook.appId,xfbml:!1,version:o.a.facebook.version}),e()},self.FB||(t=document,n=void 0,r=t.getElementsByTagName("script")[0],t.getElementById("facebook-jssdk")||((n=t.createElement("script")).id="facebook-jssdk",n.src=o.a.facebook.sdk,r.parentNode&&r.parentNode.insertBefore(n,r)))})),p},getLoginStatus:function(){return new Promise(function(e){self.FB.getLoginStatus(function(t){return e(t)},!1)})},makeRequest:f,getUser:function(e){return f("/"+e.authResponse.userID)},login:function(){return new Promise(function(e){l.log("[facebookService]: about to log in to FB"),self.FB.login(function(t){return e(t)},{scope:"user_photos"})})},logout:function(){return new Promise(function(e){l.log("[facebookService]: about to log out from FB"),self.FB.logout(function(t){document.cookie="fblo_"+o.a.facebook.appId+"=n",e(t)})})},getUploadedPhotos:E,getTaggedPhotos:_,getAlbums:b,getAlbum:function(e){return Promise.all([function(e){if(!e.id)throw new Error("[facebookService]: album id is required to retrieve album data!");var t=e.id||"";return l.log("[facebookService]: about to retrieve album data for id: "+t),f("/"+t+"/?fields=id,name,created_time")}(e),(t=e,m({resource:s.a.RESOURCES.PHOTOS,fields:",images",id:t.id},t))]).then(function(e){return i({album:e[0]},e[1])});var t}}}},"./tabs/Facebook/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{facebook:{main_title:"Facebook",no_photos:"No photos...",no_auth_title:"Upload files from your Facebook account",no_auth_action:"Connect to Facebook",no_auth_statement:"We will not post anything without your permission",album_subtitle:"{{count}} photos",menu:{uploaded:"Your Photos",tagged:"Photos of You",albums:"Albums"}}}}}},"./tabs/GoogleDrive/GoogleDrive.scss":function(e,t){},"./tabs/GoogleDrive/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return g});var o,r,a=n("./common/logger.js"),s=n("./tabs/common/actionMethods.js"),i=n("./common/actionsBase.js"),c=n("./root/actions/index.js"),u=n("./tabs/GoogleDrive/data/consts.js"),l=n("./tabs/GoogleDrive/selectors/index.js"),d=n("./tabs/GoogleDrive/service/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},f=this;function m(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var E,_,b=Object(a.b)(),g={INIT_AUTH:"GP_INIT_AUTH",DO_LOGIN:"GP_DO_LOGIN",DO_LOGOUT:"GP_DO_LOGOUT",SET_AUTH_START:"GP_SET_AUTH_START",SET_AUTH_INFO:"GP_SET_AUTH_INFO",SET_FILE_SELECTION:"GP_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"GP_SET_MUTLI_FILE_SELECTION",SET_FILES_RETRIEVE_START:"GP_SET_FILES_RETRIEVE_START",SET_FILES_RETRIEVE_FAILED:"GP_SET_FILES_RETRIEVE_FAILED",SET_FILES_RETRIEVE_SUCCESS:"GP_SET_FILES_RETRIEVE_SUCCESS",SET_SEARCH_TERM:"GP_SET_SEARCH_TERM",SET_USER_LOGOUT_SUCCESS:"GP_SET_USER_LOGOUT_SUCCESS",GET_CONTEXT_FILES:"GP_GET_CONTEXT_FILES",CLEAR_FILES_FOR_CONTEXT:"GP_CLEAR_FILES_FOR_CONTEXT",CLEAR_IMAGE_SELECTION:"GP_CLEAR_IMAGE_SELECTION"},h=((o={})[u.a.CONTEXTS.PHOTOS]=function(e){return Object(d.default)().getFiles(e)},o[u.a.CONTEXTS.SEARCH]=function(e){return Object(d.default)().searchFiles(e)},o),O=(E=m(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Object(i.c)(t))(g.SET_AUTH_START),e.next=4,Object(d.default)().authenticate();case 4:o=e.sent,n(g.SET_AUTH_INFO,{authInfo:o});case 6:case"end":return e.stop()}},e,f)})),function(e){return E.apply(this,arguments)});t.default=Object(i.d)(g,((r={})[g.CLEAR_IMAGE_SELECTION]=Object(i.b)(function(e,t){Object(i.c)(t)([[g.CLEAR_IMAGE_SELECTION,{context:e}],[c.types.CLEAR_MAX_SELECT_REACHED]])}),r[g.INIT_AUTH]=Object(i.b)(O),r[g.GET_CONTEXT_FILES]=Object(i.b)((_=m(regeneratorRuntime.mark(function e(t,n,o,r){var a,s,c;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(i.c)(o),b.log("[gdriveTab.actions]: about to retrieve files from drive for context: "+t),e.prev=2,a(g.SET_FILES_RETRIEVE_START,{context:t}),n&&n.extend?(s=Object(l.selectContextItems)(r()),n=p({},n,{items:s.items,cursor:s.cursor})):a(g.CLEAR_FILES_FOR_CONTEXT,{context:t}),e.next=7,h[t](n);case 7:c=e.sent,b.log("[gdriveTab.actions]: finished retrieving files for context: "+t,c),a(g.SET_FILES_RETRIEVE_SUCCESS,p({context:t},c)),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),b.error("[gdriveTab.actions]: encountered error when trying to retrieve context photos",e.t0),a(g.SET_FILES_RETRIEVE_FAILED,{context:t});case 16:case"end":return e.stop()}},e,f,[[2,12]])})),function(e,t,n,o){return _.apply(this,arguments)})),r[g.SET_FILE_SELECTION]=Object(i.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple,i=Object(l.selectCurrentContext)(n()).context;Object(s.a)({id:o,e:r,types:p({},c.types,g),rootBindActions:c.default,selectIsIdSelected:l.selectIsIdSelected,selectReachedMaxSelection:l.selectReachedMaxSelection,selectMultipleIdsInRange:l.selectMultipleIdsInRange,selectAvailableUntilMax:l.selectAvailableUntilMax,selectionParams:[i],multiple:a},t,n)}),r[g.DO_LOGOUT]=Object(i.b)(function(e){var t=Object(i.c)(e);try{b.log("[gdriveTab.actions]: about to log out drive user"),Object(d.default)().logout(),t(g.SET_USER_LOGOUT_SUCCESS)}catch(e){b.error("[gdriveTab.actions]: failed to log out drive user",e)}}),r[g.DO_LOGIN]=Object(i.b)(function(e){try{b.log("[gdriveTab.actions]: about to log in google user"),Object(d.default)().login(),O(e)}catch(e){b.error("[gdriveTab.actions]: failed to log in user",e)}}),r))},"./tabs/GoogleDrive/components/ContextItems/ContextItems.scss":function(e,t){},"./tabs/GoogleDrive/components/ContextItems/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("./root/components/ResultImageGrid/index.js")),c=n("./tabs/GoogleDrive/selectors/index.js"),u=n("./tabs/GoogleDrive/actions/index.js"),l=n("./tabs/GoogleDrive/components/ContextItems/ContextItems.scss");n.n(l);function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=d(this,e.call.apply(e,[this].concat(a))),o.onSelection=function(e,t){o.props.selectionAction?o.props.selectionAction(e):o.props[u.types.SET_FILE_SELECTION]({id:e,e:t})},o.wayPointAction=function(){o.props[u.types.GET_CONTEXT_FILES](o.props.context,{extend:!0,term:o.props.searchData.searchTerm})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[u.types.GET_CONTEXT_FILES](this.props.context,{term:this.props.searchData.searchTerm})},t.prototype.renderItems=function(){var e=this.props.data;return r.a.createElement(i.default,{images:e.items,selected:e.selected,isMultiple:this.props.isMultiple,showProgressIndicator:e.inProgress,selectionAction:this.onSelection,waypointAction:this.wayPointAction})},t.prototype.render=function(){return r.a.createElement("div",{className:"context-items photos-"+this.props.context},this.renderItems())},t}(o.Component);t.default=Object(a.b)(Object(s.createStructuredSelector)({data:c.selectContextItems,searchData:c.selectSearchTerm}),u.default)(p)},"./tabs/GoogleDrive/data/consts.js":function(e,t,n){"use strict";t.a={CONTEXTS:{PHOTOS:1,SEARCH:2}}},"./tabs/GoogleDrive/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("../node_modules/react-router-dom/es/index.js")),c=n("./uploader/index.js"),u=n("./common/i18n.js"),l=n("./common/logger.js"),d=n("./tabs/hocs/TabPanel.js"),p=n("./root/components/ServiceLoginIntro/index.js"),f=n("./root/components/RouteWithSubRoutes/index.js"),m=n("./root/components/TabFooter/index.js"),E=n("./root/components/TabHeader/index.js"),_=n("./tabs/GoogleDrive/data/consts.js"),b=n("./tabs/GoogleDrive/service/index.js"),g=n("./tabs/GoogleDrive/selectors/index.js"),h=n("./tabs/GoogleDrive/actions/index.js"),O=n("./tabs/GoogleDrive/components/ContextItems/index.js"),S=n("./tabs/GoogleDrive/GoogleDrive.scss"),v=(n.n(S),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e});function T(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var j=Object(l.b)(),I=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=T(this,e.call.apply(e,[this].concat(a))),o.onClearSelectedClick=function(){o.props.actions[h.types.CLEAR_IMAGE_SELECTION](o.props.tabData.currentContext)},o.onUploadButtonClick=function(){var e=o.props.contextData.selected,t=o.props.contextData.items,n=e.map(function(e){var n=t.find(function(t){return t.id===e});return n?n.subtitle:""});Object(b.default)().generateFiles(e,n).then(function(e){return o.props.addToUploadQueue({files:e})}).catch(function(e){return j.error("[gdriveTab]: encountered error when trying to upload files")})},o.onNoAuthActionClick=function(){o.props.actions[h.types.DO_LOGIN]()},o.onUserLogout=function(){o.props.actions[h.types.DO_LOGOUT]()},o.onSearchTermChange=function(e){o.props.actions[h.types.SET_SEARCH_TERM]({term:e})},o.onSearchClick=function(){o.props.actions[h.types.GET_CONTEXT_FILES](_.a.CONTEXTS.SEARCH,{term:o.props.tabData.searchTerm})},T(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props.tabData.isLoggedIn||this.props.actions[h.types.INIT_AUTH]()},t.prototype.renderSubRoutes=function(){var e=this;return this.props.routes.map(function(t,n){return r.a.createElement(f.default,v({key:"db_route_"+t.path},t,{isMultiple:e.props.tabData.isMultiple}))})},t.prototype.renderDefaultRoute=function(){var e=this;return r.a.createElement(i.b,{render:function(){return r.a.createElement(O.default,{context:_.a.CONTEXTS.PHOTOS,isMultiple:e.props.tabData.isMultiple})}})},t.prototype.renderTabContent=function(){return this.props.tabData.isLoggedIn?r.a.createElement("div",{className:"tab-authed"},r.a.createElement(E.default,{source:c.consts.SOURCES.GOOGLE_DRIVE,userName:this.props.tabData.user?this.props.tabData.user.name:"",searchTerm:this.props.tabData.searchTerm,title:t.getHeaderTitle,showSearch:!0,onLogout:this.onUserLogout,searchTermHandler:this.onSearchTermChange,searchClickHandler:this.onSearchClick}),r.a.createElement(i.c,null,this.renderSubRoutes(),this.renderDefaultRoute())):r.a.createElement(p.default,{key:"gp_login_intro",title:Object(u.b)("google_drive.no_auth_title"),actionTitle:Object(u.b)("google_drive.no_auth_action"),btnClass:"btn-drive",actionHandler:this.onNoAuthActionClick})},t.prototype.renderFooter=function(){var e=this.props.contextData,t=e&&e.selected&&e.selected.length;return r.a.createElement(m.default,{showSelection:!0,selectionCount:t,clearSelectionHandler:this.onClearSelectedClick,uploadButtonHandler:this.onUploadButtonClick})},t.prototype.render=function(){return r.a.createElement("div",{className:"content-wrap google-drive-block "+(this.props.tabData.isLoggedIn?"user-active":"")},r.a.createElement("div",{className:"holder"},this.renderTabContent()),this.renderFooter())},t}(o.Component);I.getHeaderTitle=function(){return r.a.createElement("div",{className:"subhead-title"},Object(u.b)("google_drive.header_title"))},t.default=Object(d.a)({id:c.consts.SOURCES.GOOGLE_DRIVE,title:Object(u.b)("google_drive.main_title")})(Object(a.b)(Object(s.createStructuredSelector)({tabData:g.selectTabData,contextData:g.selectContextItems}),function(e){return{actions:Object(h.default)(e)}})(I))},"./tabs/GoogleDrive/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("./tabs/common/reducerMethods.js"),s=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(s),c=n("./tabs/GoogleDrive/data/consts.js").a.CONTEXTS,u=function(){var e;return i()({lists:(e={},e[c.SEARCH]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e[c.PHOTOS]={items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},e),currentContext:c.PHOTOS,isSignedIn:!1,user:null,searchTerm:"",authInProgress:!1})},l=n("./tabs/GoogleDrive/actions/index.js"),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default={gdrive:Object(r.a)(u(),(o={},o[l.types.SET_AUTH_INFO]=function(e,t){var n=t.payload;return e.merge(d({},n.authInfo,{authInProgress:!1}))},o[l.types.SET_AUTH_START]=function(e){return e.set("authInProgress",!0)},o[l.types.SET_FILES_RETRIEVE_START]=function(e,t){var n=t.payload;return e.set("currentContext",n.context).setIn(["lists",n.context,"inProgress"],!0)},o[l.types.SET_FILES_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],d({},e.lists[n.context],{inProgress:!1,items:n.items,cursor:n.cursor}))},o[l.types.SET_FILE_SELECTION]=a.b,o[l.types.SET_MULTI_FILE_SELECTION]=a.a,o[l.types.CLEAR_FILES_FOR_CONTEXT]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],d({},{items:[],selected:[],cursor:null,inProgress:!1,lastSelectedIndex:-1},{inProgress:e.lists[n.context].inProgress}))},o[l.types.SET_USER_LOGOUT_SUCCESS]=function(e,t){t.payload;return e.replace(u())},o[l.types.SET_SEARCH_TERM]=function(e,t){var n=t.payload;return e.set("searchTerm",n.term)},o[l.types.CLEAR_IMAGE_SELECTION]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"selected"],[])},o))}},"./tabs/GoogleDrive/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./uploader/index.js"),s=n("./routing/utils.js"),i=n("./tabs/GoogleDrive/index.js"),c=n("./tabs/GoogleDrive/data/consts.js"),u=n("./tabs/GoogleDrive/components/ContextItems/index.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default=[{path:Object(s.a)(a.consts.SOURCES.GOOGLE_DRIVE),component:i.default,routes:[{path:Object(s.a)(a.consts.SOURCES.GOOGLE_DRIVE,"search"),render:function(e){return r.a.createElement(u.default,l({context:c.a.CONTEXTS.SEARCH},e))}}]}]},"./tabs/GoogleDrive/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectTabData",function(){return m}),n.d(t,"selectContextItems",function(){return i}),n.d(t,"selectIsIdSelected",function(){return u}),n.d(t,"selectReachedMaxSelection",function(){return c}),n.d(t,"selectCurrentContext",function(){return l}),n.d(t,"selectSearchTerm",function(){return E}),n.d(t,"selectMultipleIdsInRange",function(){return d}),n.d(t,"selectAvailableUntilMax",function(){return p});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./tabs/common/selectors.js")),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=Object(r.d)("gdrive"),i=Object(r.f)("gdrive"),c=Object(r.j)("gdrive"),u=Object(r.h)("gdrive"),l=Object(r.g)("gdrive"),d=Object(r.i)("gdrive"),p=Object(r.e)("gdrive"),f=function(e){return{searchTerm:e.gdrive.searchTerm}},m=Object(o.createSelector)(function(e){return{widgetConfig:e.widgetConfig,gpData:{isLoggedIn:e.gdrive.isSignedIn,searchTerm:f(e).searchTerm,currentContext:s(e).context,user:e.gdrive.user}}},function(e){var t=e.widgetConfig,n=e.gpData;return a({isMultiple:t.multiple},n)}),E=Object(o.createSelector)(f,function(e){return e})},"./tabs/GoogleDrive/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./appConfig.js"),r=n("./common/logger.js"),a=n("./utils/binaryToFile.js"),s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=this;function c(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var u,l=Object(r.c)(),d=o.a.google.drive,p=d.clientId,f=d.jsApi,m=d.scopes.join(" "),E=null,_=function(){var e;return E||(E=new Promise((e=c(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=function(){return new Promise(function(e){var t,n,r;t=document,n=void 0,r=t.getElementsByTagName("script")[0],t.getElementById("google-api")||((n=t.createElement("script")).id="google-api",n.src=o.a.google.drive.jsApi,r&&r.parentNode&&r.parentNode.insertBefore(n,r)),window.googleDriveCheckAuth=function(){l.log("[gdriveService]: finished loading google api script"),e(!0)}})},r=function(){return new Promise(function(e){window.gapi.load("client:auth2",function(t){l.log("[gdriveService]: finished loading google auth2 api"),e(t)})})},l.log("[gdriveService]: about to load google api script from: "+f),e.next=5,n();case 5:return l.log("[gdriveService]: api script loaded, about to load google auth2 api"),e.next=8,r();case 8:t(!0);case 9:case"end":return e.stop()}},e,i)})),function(t){return e.apply(this,arguments)}))),E},b=function(e){return{isSignedIn:!0,user:{name:e.currentUser.get().getBasicProfile().getName()}}},g=function(e){return new Promise(function(t){self.gapi.client.drive.files.list(s({pageSize:d.pageSize,fields:"files(createdTime,description,id,imageMediaMetadata(height,width),modifiedTime,name,originalFilename,parents,properties,thumbnailLink,webContentLink),nextPageToken",orderBy:"modifiedTime desc",spaces:"photos"},e)).execute(function(e){return t(e)})})},h=(u=c(regeneratorRuntime.mark(function e(t,n){var o,r,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=t.split("id=")[1],e.next=3,self.gapi.client.drive.files.get({fileId:o,alt:"media"});case 3:return r=e.sent,s=r.body,e.next=7,Object(a.a)(s,{name:n||r.headers.date,type:r.headers["Content-Type"],lastModified:new Date(r.headers.date).getTime()});case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,i)})),function(e,t){return u.apply(this,arguments)});t.default=function(){var e,t,n,o=(e=c(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_();case 2:return e.next=4,self.gapi.client.load("drive","v3");case 4:return e.next=6,new Promise(function(e){var t=self.gapi.auth2.init({client_id:p,scope:m});t.isSignedIn.get()?e(b(t)):(t.isSignedIn.listen(function(n){e(n?b(t):{isSignedIn:!1,user:null})}),t.signIn().then(function(e){l.log("[gdriveService]: sign in callback was successful: ",e)},function(e){l.log("[gdriveService]: sign in failed",e)}))});case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,i)})),function(){return e.apply(this,arguments)}),r=(t=c(regeneratorRuntime.mark(function e(t){var n,o,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.log("[gdriveService]: about to list files from drive"),s=r,(a=t).extend&&!a.cursor||s&&!a.term){e.next=7;break}return e.next=4,g({pageToken:t.cursor,q:r&&t.term?"name contains '"+t.term+"'":void 0});case 4:e.t0=e.sent,e.next=8;break;case 7:e.t0={};case 8:return n=e.t0,o=n.nextPageToken||null,n=n.files?n.files.map(function(e){var t,n=e.webContentLink?e.webContentLink.replace("&export=download",""):"";return{slug:e.id,id:n,thumbnail:e.thumbnailLink,link:n,url:n,title:(t=e,t.imageMediaMetadata?t.imageMediaMetadata.width+" × "+t.imageMediaMetadata.height:"Video"),subtitle:e.name,selected:e.selected}}):[],n=t.extend&&t.items?t.items.concat(n):n,l.log("[gdriveService]: retrieved files from drive: ",n),e.abrupt("return",{items:n,cursor:o});case 14:case"end":return e.stop()}var a,s},e,i)})),function(e){return t.apply(this,arguments)}),a=(n=c(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(e,t){return h(e,n[t])}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,i)})),function(e,t){return n.apply(this,arguments)});return{authenticate:o,login:function(){var e=self.gapi.auth2.getAuthInstance();e&&(l.log("[gdriveService]: about to log in user"),e.signIn().catch(function(e){l.error("[gdriveService]: ERROR when trying to log in user! ",e)}))},logout:function(){l.log("[gdriveService]: about to logout user"),self.gapi.auth2.getAuthInstance().disconnect()},getFiles:r,searchFiles:function(e){return r(e,!0)},generateFiles:a}}},"./tabs/GoogleDrive/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{google_drive:{main_title:"Google Photos",no_auth_title:"Upload files from your Google Photos",no_auth_action:"Connect to Google Photos",no_photos:"No Photos",header_title:"Your Google Photos"}}}}},"./tabs/ImageSearch/ImageSearchTab.scss":function(e,t){},"./tabs/ImageSearch/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return m});var o,r=n("./common/i18n.js"),a=n("./common/actionsBase.js"),s=n("./root/actions/index.js"),i=n("./tabs/common/actionMethods.js"),c=n("./tabs/ImageSearch/service/index.js"),u=n("./tabs/ImageSearch/selectors/index.js"),l=this,d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var p,f,m={DO_IMAGE_SEARCH:"IS_DO_IMAGE_SEARCH",SET_SEARCH_TERM:"IS_SET_SEARCH_TERM",SET_IMAGE_SEARCH_START:"IS_SET_IMAGE_SEARCH_START",SET_IMAGE_SEARCH_SUCCESS:"IS_SET_IMAGE_SEARCH_SUCCESS",SET_IMAGE_SEARCH_FAIL:"IS_SET_IMAGE_SEARCH_FAIL",SET_FILE_SELECTION:"IS_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"IS_SET_MULTI_FILE_SELECTION",CLEAR_IMAGE_SELECTION:"IS_CLEAR_IMAGE_SELECTION",SET_SEARCH_RIGHT:"SET_SEARCH_RIGHT",SET_SEARCH_SITE:"SET_SEARCH_SITE",CLEAR_SEARCH_ERROR:"CLEAR_SEARCH_ERROR",RESET_SEARCH:"RESET_SEARCH"};t.default=Object(a.d)(m,((o={})[m.CLEAR_IMAGE_SELECTION]=Object(a.b)(function(e){Object(a.c)(e)([[m.CLEAR_IMAGE_SELECTION],[s.types.CLEAR_MAX_SELECT_REACHED]])}),o[m.SET_FILE_SELECTION]=Object(a.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple;return Object(i.a)({id:o,e:r,types:d({},s.types,m),rootBindActions:s.default,selectIsIdSelected:u.selectIsIdSelected,selectReachedMaxSelection:u.selectReachedMaxSelection,selectMultipleIdsInRange:u.selectMultipleIdsInRange,selectAvailableUntilMax:u.selectAvailableUntilMax,multiple:a},t,n)}),o[m.DO_IMAGE_SEARCH]=Object(a.b)((p=regeneratorRuntime.mark(function e(t,n,o){var s,i,d,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s=Object(a.c)(n),i=t.query||Object(u.selectSearchTerm)(o()).searchTerm,s(m.SET_IMAGE_SEARCH_START),d=Object(c.default)({apiKey:t.apiKey}),e.next=5,d.doSearch({query:i,start:t.start,searchSite:t.searchSite,searchRight:t.searchRight,images:t.images});case 5:(p=e.sent).error?(s(m.SET_IMAGE_SEARCH_FAIL,{error:p.error}),t.reportError({text:Object(r.b)("image_search.search_error")})):s(m.SET_IMAGE_SEARCH_SUCCESS,{images:p.images,queries:p.queries});case 7:case"end":return e.stop()}},e,l)}),f=function(){var e=p.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e,t,n){return f.apply(this,arguments)})),o))},"./tabs/ImageSearch/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("./appConfig.js"),i=n("./uploader/index.js"),c=n("./common/i18n.js"),u=n("./tabs/hocs/TabPanel.js"),l=n("./root/actions/index.js"),d=n("./root/components/TabFooter/index.js"),p=n("./root/components/Dropdown/index.js"),f=n("./root/components/ResultImageGrid/index.js"),m=n("./root/components/SearchBox/index.js"),E=n("./tabs/ImageSearch/selectors/index.js"),_=n("./tabs/ImageSearch/actions/index.js"),b=void 0,g=function(){return b||(b=[{text:Object(c.b)("image_search.rights_options.not_filtered"),value:""},{text:Object(c.b)("image_search.rights_options.free"),value:"cc_publicdomain|cc_attribute|cc_sharealike|cc_noncommercial|cc_nonderived"},{text:Object(c.b)("image_search.rights_options.free_com"),value:"cc_publicdomain|cc_attribute|cc_sharealike|cc_nonderived"},{text:Object(c.b)("image_search.rights_options.free_mod"),value:"cc_publicdomain|cc_attribute|cc_sharealike|cc_noncommercial"},{text:Object(c.b)("image_search.rights_options.free_mod_com"),value:"cc_publicdomain|cc_attribute|cc_sharealike"}]),b};n("./tabs/ImageSearch/ImageSearchTab.scss");function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}n.d(t,"ImageSearchTab",function(){return O});var O=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=Array(a),u=0;u<a;u++)i[u]=arguments[u];return n=o=h(this,e.call.apply(e,[this].concat(i))),o.onSearchHandler=function(){o.clearSelection(),o.props.actions[_.types.DO_IMAGE_SEARCH]({apiKey:o.props.tabData.apiKey,images:o.props.tabData.images,searchRight:o.props.tabData.searchRight,searchSite:o.getSearchSite(),reportError:o.props.rootActions[l.types.SET_ERROR]})},o.onSearchTermChangeHandler=function(e){return o.props.actions[_.types.SET_SEARCH_TERM]({value:e})},o.onSelectionAction=function(e,t){return o.props.actions[_.types.SET_FILE_SELECTION]({id:e,e:t,multiple:o.props.tabData.isMultiple})},o.onClearSelectedClick=function(){return o.clearSelection()},o.onUploadButtonClick=function(){o.props.addToUploadQueue({files:o.props.tabData.selected}),o.clearSelection()},o.onSiteFilterSelected=function(e,t){o.props.actions[_.types.SET_SEARCH_SITE]({site:e,index:t})},o.getSearchPlaceholder=function(){var e=Object(c.b)("image_search.inputPlaceholder"),t=~o.props.tabData.searchSiteIndex?o.props.tabData.searchSiteIndex:0,n=o.props.tabData.sites;return n&&"all"!==n[t]&&(e=Object(c.b)("image_search.customPlaceholder",{site:n[t]})),e},o.getSearchSite=function(){return o.props.tabData.searchSite||(!o.isOnlyDefaultSiteFilter()&&o.props.tabData.sites&&1===o.props.tabData.sites.length?o.props.tabData.sites[0]:"")},o.getSiteFilters=function(){return o.props.tabData.sites&&o.props.tabData.sites.length>1?o.props.tabData.sites:null},o.resetSearch=function(){return o.props.actions[_.types.RESET_SEARCH]()},o.waypointAction=function(){if(!o.props.tabData.showProgress){var e=o.props.tabData.queries.nextPage&&o.props.tabData.queries.nextPage[0];e&&e.startIndex<s.a.google.resultsMaxLimit&&o.props.actions[_.types.DO_IMAGE_SEARCH]({apiKey:o.props.tabData.apiKey,images:o.props.tabData.images,query:e.searchTerms,start:e.startIndex,searchSite:e.siteSearch,searchRight:e.rights,reportError:o.props.rootActions[l.types.SET_ERROR]})}},o.isOnlyDefaultSiteFilter=function(){var e=o.props.tabData.sites;return!e||e.length&&1===e.length&&"all"===e[0]},o.clearSelection=function(){return o.props.actions[_.types.CLEAR_IMAGE_SELECTION]()},o.renderRightsSelection=function(){return o.props.tabData.showRights?r.a.createElement(p.default,{className:"rights",title:Object(c.b)("image_search.rights"),items:g(),selectedIndex:o.props.tabData.searchRightIndex,itemClickHandler:function(e,t){o.props.actions[_.types.SET_SEARCH_RIGHT]({index:t,right:e.value})}}):null},o.renderFooter=function(){var e=o.props.tabData.selected.length;return r.a.createElement(d.default,{showSelection:!0,selectionCount:e,clearSelectionHandler:o.onClearSelectedClick,uploadButtonHandler:o.onUploadButtonClick})},o.renderImageGrid=function(){return!o.props.tabData.firstSearch&&r.a.createElement(f.default,{images:o.props.tabData.images,isMultiple:o.props.tabData.isMultiple,selected:o.props.tabData.selected,selectionAction:o.onSelectionAction,waypointAction:o.waypointAction,showProgressIndicator:o.props.tabData.showProgress})},h(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.resetSearch()},t.prototype.render=function(){return r.a.createElement("div",{className:"content-wrap google-img-block"},r.a.createElement("div",{className:"holder"},r.a.createElement("div",{className:"box "+(this.props.tabData.firstSearch&&!this.props.tabData.images.length?"centered":"")},r.a.createElement("strong",{className:"title"},Object(c.b)("image_search.main_title")),r.a.createElement(m.default,{mode:m.SEARCH_BOX_MODES.EXPANDED,inputPlaceholder:this.getSearchPlaceholder(),term:this.props.tabData.searchTerm,searchHandler:this.onSearchHandler,termChangeHandler:this.onSearchTermChangeHandler,filtersItems:this.getSiteFilters(),selectedFilter:this.props.tabData.searchSiteIndex,filterSelectHandler:this.onSiteFilterSelected,filtersTitle:Object(c.b)("image_search.filters_title"),showFilters:!0},this.renderRightsSelection()),this.renderImageGrid())),this.renderFooter())},t}(o.Component);t.default=Object(u.a)({id:i.consts.SOURCES.IMAGE_SEARCH,title:Object(c.b)("image_search.main_title")})(Object(a.b)(function(e){return{tabData:Object(E.selectImageSearchConfig)(e)}},function(e){return{actions:Object(_.default)(e),rootActions:Object(l.default)(e)}})(O))},"./tabs/ImageSearch/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("./tabs/common/reducerMethods.js"),s=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(s),c=function(){return i()({searchTerm:"",searchDone:!1,firstSearch:!0,progressIndicator:!1,filtersDisplay:!0,searchRight:"",searchRightIndex:-1,searchSite:"",searchSiteIndex:-1,images:[],selected:[],lastSelectedIndex:-1,queries:null,searchError:null})},u=n("./tabs/ImageSearch/actions/index.js"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default={imageSearch:Object(r.a)(c(),(o={},o[u.types.SET_SEARCH_TERM]=function(e,t){var n=t.payload;return e.set("searchTerm",n.value)},o[u.types.CLEAR_IMAGE_SELECTION]=function(e){return e.replace(l({},e,{selected:[]}))},o[u.types.SET_FILE_SELECTION]=a.d,o[u.types.SET_MULTI_FILE_SELECTION]=a.c,o[u.types.SET_IMAGE_SEARCH_START]=function(e){return e.merge({searchDone:!1,progressIndicator:!0,queries:null})},o[u.types.SET_IMAGE_SEARCH_SUCCESS]=function(e,t){var n=t.payload;return e.merge({firstSearch:!1,searchDone:!0,progressIndicator:!1,images:n.images,queries:n.queries})},o[u.types.SET_IMAGE_SEARCH_FAIL]=function(e,t){var n=t.payload;return e.merge({searchDone:!0,progressIndicator:!1,searchError:n.error})},o[u.types.CLEAR_SEARCH_ERROR]=function(e){return e.set("searchError",null)},o[u.types.SET_SEARCH_RIGHT]=function(e,t){var n=t.payload;return e.merge({searchRight:n.right,searchRightIndex:n.index})},o[u.types.SET_SEARCH_SITE]=function(e,t){var n=t.payload;return e.merge({searchSite:n.site,searchSiteIndex:n.index})},o[u.types.RESET_SEARCH]=function(){return c()},o))}},"./tabs/ImageSearch/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/index.js"),r=n("./routing/utils.js"),a=n("./tabs/ImageSearch/index.js");t.default=[{path:Object(r.a)(o.consts.SOURCES.IMAGE_SEARCH),component:a.default}]},"./tabs/ImageSearch/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectImageSearchConfig",function(){return u}),n.d(t,"selectSearchTerm",function(){return l}),n.d(t,"selectIsIdSelected",function(){return d}),n.d(t,"selectReachedMaxSelection",function(){return p}),n.d(t,"selectMultipleIdsInRange",function(){return f}),n.d(t,"selectAvailableUntilMax",function(){return m});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./tabs/common/selectors.js")),a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(e){return e.imageSearch.selected},i=function(e){return e.imageSearch.images},c=function(e){return{selected:s(e),maxAllowed:e.widgetConfig.max_files,successfulCount:e.widgetData.successfulCount}},u=Object(o.createSelector)(function(e){return{widgetConfig:e.widgetConfig,imageSearch:{searchTerm:e.imageSearch.searchTerm,images:i(e),selected:s(e),queries:e.imageSearch.queries||{},searchRight:e.imageSearch.searchRight,searchRightIndex:e.imageSearch.searchRightIndex,searchSiteIndex:e.imageSearch.searchSiteIndex,searchSite:e.imageSearch.searchSite,firstSearch:e.imageSearch.firstSearch,searchDone:e.imageSearch.searchDone,showProgress:e.imageSearch.progressIndicator,searchError:e.imageSearch.searchError}}},function(e){var t=e.widgetConfig,n=e.imageSearch;return a({apiKey:t.google_api_key,isMultiple:t.multiple,showRights:t.search_by_rights,sites:t.search_by_sites},n)}),l=Object(o.createSelector)(function(e){return e.imageSearch.searchTerm},function(e){return{searchTerm:e}}),d=Object(o.createSelector)(s,function(e){return function(t){return e.indexOf(t)>-1}}),p=Object(o.createSelector)(c,function(e){return Object(r.c)(e,e.maxAllowed,e.successfulCount)}),f=Object(o.createSelector)(function(e){return{selected:s(e),items:i(e)}},function(e){return function(t){return Object(r.b)(e,t)}}),m=Object(o.createSelector)(c,function(e){return Object(r.a)(e,e.maxAllowed,e.successfulCount)})},"./tabs/ImageSearch/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/voca/index.js"),r=(n.n(o),n("./appConfig.js")),a=n("./common/logger.js"),s=n("./services/index.js"),i=this;var c=Object(a.c)();t.default=function(e){var t,n,a=e.apiKey;return c.log("[googleService]: creating google api client with api key = "+a),{doSearch:(t=regeneratorRuntime.mark(function e(t){var n,u,l,d;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={images:[]},Object(o.isBlank)(t.query)){e.next=16;break}return u=""+r.a.google.searchBase+r.a.google.searchPath,m=a,l={q:(E=t).query,cx:r.a.google.cx,key:m,num:r.a.google.searchItemsLimit,searchType:E.type||"image",start:E.start||1,rights:E.searchRight,siteSearch:"all"!==E.searchSite?E.searchSite:"",siteSearchFilter:"i"},e.prev=3,e.next=6,s.api.get(u,l);case 6:d=e.sent,n.images=(p=t,void 0,f=(i=d).items?i.items.map(function(e){return{key:e.link,id:e.link,thumbnail:e.image.thumbnailLink||e.link,url:e.link,link:e.link,title:e.image.width+" × "+e.image.height,subtitle:e.title,selected:e.selected}}):[],i.queries&&1!==i.queries.request[0].startIndex&&p.images?p.images.concat(f):f||[]),n.info=d.searchInformation,n.queries=d.queries,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(3),c.error("[googleService.search]: encountered error when doing search for: "+t.query,e.t0),n.error=e.t0;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}var i,p,f,m,E},e,i,[[3,12]])}),n=function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e){return n.apply(this,arguments)})}}},"./tabs/ImageSearch/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{image_search:{main_title:"Image Search",inputPlaceholder:"Search for images",customPlaceholder:"Search {{site}}",filters_title:"site",rights:"Usage rights",rights_options:{not_filtered:"not filtered by licence",free:"free to use or share",free_com:"free to use or share, even commercially",free_mod:"free to use share or modify",free_mod_com:"free to use, share or modify, even commercially"},search_error:"Search failed, please try again."}}}}},"./tabs/Instagram/InstagramTab.scss":function(e,t){},"./tabs/Instagram/actions/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"types",function(){return b});var o,r=n("./common/logger.js"),a=n("./common/actionsBase.js"),s=n("./root/actions/index.js"),i=n("./tabs/common/actionMethods.js"),c=n("./root/selectors/index.js"),u=n("./tabs/Instagram/service/index.js"),l=n("./tabs/Instagram/selectors/index.js"),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},p=this;function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var m,E,_=Object(r.b)(),b={INIT_AUTH:"INSTA_INIT_AUTH",SET_AUTH_INFO:"INSTA_SET_AUTH_INFO",SET_FILE_SELECTION:"INSTA_SET_FILE_SELECTION",SET_MULTI_FILE_SELECTION:"INSTA_SET_MUTLI_FILE_SELECTION",GET_CONTEXT_PHOTOS:"INSTA_GET_CONTEXT_PHOTOS",SET_PHOTOS_RETRIEVE_START:"INSTA_SET_PHOTOS_RETRIEVE_START",SET_PHOTOS_RETRIEVE_FAILED:"INSTA_SET_PHOTOS_RETRIEVE_FAILED",SET_PHOTOS_RETRIEVE_SUCCESS:"INSTA_SET_PHOTOS_RETRIEVE_SUCCESS",SET_ACCOUNT_INFO_REQUESTED:"INSTA_SET_ACCOUNT_INFO_REQUESTED",SET_ACCOUNT_INFO_FAILED:"INSTA_SET_ACCOUNT_INFO_FAILED",SET_ACCOUNT_INFO_SUCCESS:"INSTA_SET_ACCOUNT_INFO_SUCCESS",SET_USER_LOGOUT_SUCCESS:"INSTA_SET_USER_LOGOUT_SUCCESS",DO_LOGOUT:"INSTA_DO_LOGOUT",CLEAR_PHOTOS_FOR_CONTEXT:"INSTA_CLEAR_PHOTOS_FOR_CONTEXT",CLEAR_IMAGE_SELECTION:"INSTA_CLEAR_IMAGE_SELECTION"},g=(m=f(regeneratorRuntime.mark(function e(t,n){var o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _.log("[instagramTab.actions]: about to retrieve account info"),e.prev=1,n(b.SET_ACCOUNT_INFO_REQUESTED),e.next=5,Object(u.default)().getAccountInfo(t);case 5:o=e.sent,_.log("[instagramTab.actions]: retrieved account info: ",o),n(b.SET_ACCOUNT_INFO_SUCCESS,{account:o}),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),_.error("[instagramTab.actions]: failed to get account info",e.t0),n(b.SET_ACCOUNT_INFO_FAILED);case 14:case"end":return e.stop()}},e,p,[[1,10]])})),function(e,t){return m.apply(this,arguments)}),h=function(e,t){var n=Object(a.c)(t);n(b.SET_AUTH_INFO,e),e&&e.token&&g(e,n)};t.default=Object(a.d)(b,((o={})[b.CLEAR_IMAGE_SELECTION]=Object(a.b)(function(e,t){Object(a.c)(t)([[b.CLEAR_IMAGE_SELECTION,{context:e}],[s.types.CLEAR_MAX_SELECT_REACHED]])}),o[b.INIT_AUTH]=Object(a.b)(function(e,t){return h(Object(u.default)().getAuthInfo(e),t)}),o[b.SET_AUTH_INFO]=Object(a.b)(h),o[b.GET_CONTEXT_PHOTOS]=Object(a.b)((E=f(regeneratorRuntime.mark(function e(t){var n,o,r,s,i,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},m=arguments[2],E=arguments[3];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=Object(a.c)(m),o=E(),!Object(l.selectAuthData)(o).isAuth){e.next=19;break}return n(b.SET_PHOTOS_RETRIEVE_START,{context:t}),f.cloudName=Object(c.selectCloudName)(o),r=void 0,f.extend?(s=Object(l.selectContextItems)(o),i=f.extend&&s.nextUrl||null,f=d({},f,{url:i,items:s.items})):n(b.CLEAR_PHOTOS_FOR_CONTEXT,{context:t}),e.prev=6,e.next=9,Object(u.default)().getRecents(f);case 9:r=e.sent,e.next=17;break;case 12:e.prev=12,e.t0=e.catch(6),_.error("[instagramTab.actions]: encountered error when trying to retrieve context photos",e.t0),n(b.SET_PHOTOS_RETRIEVE_FAILED,{context:t}),~e.t0.message.indexOf("access_token provided is invalid")&&n(b.SET_USER_LOGOUT_SUCCESS);case 17:_.log("[instagramTab.actions]: finished retrieving photos for context: "+t),n(b.SET_PHOTOS_RETRIEVE_SUCCESS,d({context:t},r));case 19:case"end":return e.stop()}},e,p,[[6,12]])})),function(e){return E.apply(this,arguments)})),o[b.SET_FILE_SELECTION]=Object(a.b)(function(e,t,n){var o=e.id,r=e.e,a=e.multiple,c=Object(l.selectCurrentContext)(n()).context;Object(i.a)({id:o,e:r,types:d({},s.types,b),rootBindActions:s.default,selectIsIdSelected:l.selectIsIdSelected,selectReachedMaxSelection:l.selectReachedMaxSelection,selectMultipleIdsInRange:l.selectMultipleIdsInRange,selectAvailableUntilMax:l.selectAvailableUntilMax,selectionParams:[c],multiple:a},t,n)}),o[b.DO_LOGOUT]=Object(a.b)(function(e,t){var n=Object(a.c)(e),o=Object(l.selectAuthData)(t());_.log("[instagramTab.actions]: about to log out instagram user"),Object(u.default)().logout(o.cloudName),n(b.SET_USER_LOGOUT_SUCCESS)}),o))},"./tabs/Instagram/components/ContextItems/ContextItems.scss":function(e,t){},"./tabs/Instagram/components/ContextItems/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("./root/components/ResultImageGrid/index.js")),c=n("./tabs/Instagram/selectors/index.js"),u=n("./tabs/Instagram/actions/index.js"),l=n("./tabs/Instagram/components/ContextItems/ContextItems.scss");n.n(l);function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var p=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=d(this,e.call.apply(e,[this].concat(a))),o.onSelection=function(e,t){o.props.selectionAction?o.props.selectionAction(e):o.props[u.types.SET_FILE_SELECTION]({id:e,e:t,multiple:o.props.isMultiple})},o.wayPointAction=function(){o.props[u.types.GET_CONTEXT_PHOTOS](o.props.context,{extend:!0})},d(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.props[u.types.GET_CONTEXT_PHOTOS](this.props.context,{extend:!1})},t.prototype.renderItems=function(){var e=this.props.data;return r.a.createElement(i.default,{images:e.items,selected:e.selected,isMultiple:this.props.isMultiple,selectionAction:this.onSelection,showProgressIndicator:e.inProgress,waypointAction:this.wayPointAction})},t.prototype.render=function(){return r.a.createElement("div",{className:"context-items photos-"+this.props.context},this.renderItems())},t}(o.Component);t.default=Object(a.b)(Object(s.createStructuredSelector)({data:c.selectContextItems}),u.default)(p)},"./tabs/Instagram/data/consts.js":function(e,t,n){"use strict";t.a={IMAGE_TYPES:{IMAGE:"image",CAROUSEL:"carousel"},CONTEXTS:{RECENT:1}}},"./tabs/Instagram/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"listenForAuth",function(){return h}),n.d(t,"InstagramTab",function(){return O});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/react-redux/es/index.js"),s=n("../node_modules/reselect/lib/index.js"),i=(n.n(s),n("./uploader/index.js")),c=n("./common/i18n.js"),u=n("./root/components/TabHeader/index.js"),l=n("./tabs/hocs/TabPanel.js"),d=n("./root/components/TabFooter/index.js"),p=n("./root/components/ServiceLoginIntro/index.js"),f=n("./tabs/Instagram/actions/index.js"),m=n("./tabs/Instagram/selectors/index.js"),E=n("./tabs/Instagram/service/index.js"),_=n("./tabs/Instagram/components/ContextItems/index.js"),b=n("./tabs/Instagram/InstagramTab.scss");n.n(b);function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var h=function(e){var t=void 0;if(!e.tabData.isLoggedIn){var n=e.actions[f.types.SET_AUTH_INFO],o=e.tabData.cloudName;e.actions[f.types.INIT_AUTH](o),t=Object(E.default)().setAuthListener(o).then(function(e){return n({token:e.token})})}return t||Promise.resolve()},O=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=g(this,e.call.apply(e,[this].concat(a))),o.onClearSelectedClick=function(){o.clearSelection()},o.onUploadButtonClick=function(){o.props.addToUploadQueue({files:o.props.contextData.selected}),o.clearSelection()},o.onNoAuthActionClick=function(){Object(E.default)().openAuthWindow()},o.onUserLogout=function(){o.props.actions[f.types.DO_LOGOUT]()},g(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){h(this.props)},t.prototype.componentWillUpdate=function(e){h(e)},t.prototype.clearSelection=function(){this.props.actions[f.types.CLEAR_IMAGE_SELECTION](this.props.tabData.currentContext)},t.prototype.renderTabContent=function(){return this.props.tabData.isLoggedIn?r.a.createElement("div",{className:"tab-authed"},r.a.createElement(u.default,{source:i.consts.SOURCES.INSTAGRAM,userName:this.props.tabData.userName,onLogout:this.onUserLogout,title:t.getHeaderTitle}),r.a.createElement(_.default,{isMultiple:this.props.tabData.isMultiple,context:this.props.tabData.currentContext})):r.a.createElement(p.default,{key:"insta_login_intro",title:Object(c.b)("instagram.no_auth_title"),actionTitle:Object(c.b)("instagram.no_auth_action"),btnClass:"btn-insta",actionHandler:this.onNoAuthActionClick})},t.prototype.renderFooter=function(){var e=this.props.contextData,t=e&&e.selected&&e.selected.length;return r.a.createElement(d.default,{showSelection:!0,selectionCount:t,clearSelectionHandler:this.onClearSelectedClick,uploadButtonHandler:this.onUploadButtonClick})},t.prototype.render=function(){return r.a.createElement("div",{className:"content-wrap instagram-block "+(this.props.tabData.isLoggedIn?"user-active":"")},r.a.createElement("div",{className:"holder"},this.renderTabContent()),this.renderFooter())},t}(o.Component);O.getHeaderTitle=function(){return r.a.createElement("div",{className:"subhead-title"},Object(c.b)("instagram.header_title"))},t.default=Object(l.a)({id:i.consts.SOURCES.INSTAGRAM,title:Object(c.b)("instagram.main_title")})(Object(a.b)(Object(s.createStructuredSelector)({tabData:m.selectTabData,contextData:m.selectContextItems}),function(e){return{actions:Object(f.default)(e)}})(O))},"./tabs/Instagram/reducers/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("./common/reducerBase.js"),a=n("./tabs/common/reducerMethods.js"),s=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),i=n.n(s),c=n("./tabs/Instagram/data/consts.js").a.CONTEXTS,u=function(){var e;return i()({isAuth:!1,lists:(e={},e[c.RECENT]={items:[],nextUrl:null,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},e),currentContext:c.RECENT,currentAccount:{}})},l=n("./tabs/Instagram/actions/index.js"),d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};t.default={instagram:Object(r.a)(u(),(o={},o[l.types.SET_AUTH_INFO]=function(e,t){var n=t.payload;return e.set("token",n.token)},o[l.types.SET_PHOTOS_RETRIEVE_START]=function(e,t){var n=t.payload;return e.set("currentContext",n.context).setIn(["lists",n.context,"inProgress"],!0)},o[l.types.SET_PHOTOS_RETRIEVE_SUCCESS]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],d({},e.lists[n.context],{inProgress:!1,items:n.items,nextUrl:n.nextUrl}))},o[l.types.SET_FILE_SELECTION]=a.b,o[l.types.SET_MULTI_FILE_SELECTION]=a.a,o[l.types.CLEAR_PHOTOS_FOR_CONTEXT]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context],d({},{items:[],nextUrl:null,hasMore:!1,inProgress:!1,selected:[],lastSelectedIndex:-1},{inProgress:e.lists[n.context].inProgress}))},o[l.types.CLEAR_IMAGE_SELECTION]=function(e,t){var n=t.payload;return e.setIn(["lists",n.context,"selected"],[])},o[l.types.SET_ACCOUNT_INFO_SUCCESS]=function(e,t){var n=t.payload;return e.set("account",n.account)},o[l.types.SET_USER_LOGOUT_SUCCESS]=function(e){return e.replace(u())},o))}},"./tabs/Instagram/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./uploader/index.js"),s=n("./routing/utils.js"),i=n("./common/i18n.js"),c=n("./tabs/Instagram/service/index.js"),u=n("./tabs/Instagram/index.js");t.default=[{path:Object(s.a)(a.consts.SOURCES.INSTAGRAM),component:u.default},{path:Object(s.a)(a.consts.SOURCES.INSTAGRAM,"auth"),render:function(){return Object(c.default)().postAuthResult(),r.a.createElement("div",{className:"coverall"},r.a.createElement("h3",null,Object(i.b)("instagram.authenticating")))}}]},"./tabs/Instagram/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectAuthData",function(){return m}),n.d(t,"selectTabData",function(){return E}),n.d(t,"selectContextItems",function(){return c}),n.d(t,"selectIsIdSelected",function(){return l}),n.d(t,"selectReachedMaxSelection",function(){return u}),n.d(t,"selectCurrentContext",function(){return d}),n.d(t,"selectMultipleIdsInRange",function(){return p}),n.d(t,"selectAvailableUntilMax",function(){return f});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),n("./root/selectors/index.js")),a=n("./tabs/common/selectors.js"),s="instagram",i=Object(a.d)(s),c=Object(a.f)(s),u=Object(a.j)(s),l=Object(a.h)(s),d=Object(a.g)(s),p=Object(a.i)(s),f=Object(a.e)(s),m=Object(o.createSelector)(r.getWidgetConfig,function(e){return!!e.instagram.token},function(e,t){return{isAuth:t,cloudName:e.cloud_name}}),E=Object(o.createSelector)(r.getWidgetConfig,function(e){return{isLoggedIn:!!e.instagram.token,currentContext:i(e).context,account:e.instagram.account}},function(e,t){return{cloudName:e.cloud_name,isMultiple:e.multiple,isLoggedIn:t.isLoggedIn,currentContext:t.currentContext,userName:t.account&&t.account.name}})},"./tabs/Instagram/service/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./appConfig.js"),r=n("./uploader/index.js"),a=n("./common/logger.js"),s=n("./utils/domUtils.js"),i=n("./services/index.js"),c=n("./tabs/Instagram/data/consts.js"),u=this;function l(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var d=Object(a.c)(),p=o.a.instagram.clientId,f=o.a.instagram.authUrl,m=o.a.instagram.maxResults,E=r.consts.SOURCES,_=null;t.default=function(){d.log("[instagramService]: creating instagram api for client id: "+p);var e,t,n=function(e){return{token:i.common.getStoredAuthToken(e,E.INSTAGRAM)}},o=function(e){if(200!==e.meta.code)throw new Error(e.meta.code+": "+e.meta.error_message)},r=(e=l(regeneratorRuntime.mark(function e(t){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.token||"",e.next=3,i.api.jsonp("https://api.instagram.com/v1/users/self/?access_token="+n);case 3:return r=e.sent,o(r),e.abrupt("return",{user:r.data.username,name:r.data.full_name});case 6:case"end":return e.stop()}},e,u)})),function(t){return e.apply(this,arguments)}),a=function(e,t){var n=null;if(e.type===c.a.IMAGE_TYPES.IMAGE)try{var o=e.images.standard_resolution.url;n={id:o,link:o,thumbnail:e.images.low_resolution?e.images.low_resolution.url:e.images.thumbnail.url,title:"",subtitle:t.caption&&t.caption.text||""}}catch(n){d.error("[instagramService]: failed to parse item data: ",e,t)}return n},b=function(e){return e.reduce(function(e,t){return e.concat((n=t).type===c.a.IMAGE_TYPES.CAROUSEL?n.carousel_media.map(function(e){return a(e,n)}):n.type===c.a.IMAGE_TYPES.IMAGE?a(n,n):null);var n},[]).filter(function(e){return e})},g=(t=l(regeneratorRuntime.mark(function e(t){var r,a,s,c,l,p;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=(!t.extend||t.url)&&t.cloudName,a=[],s=null,!r){e.next=11;break}return c=n(t.cloudName).token||"",l=t.url||"https://api.instagram.com/v1/users/self/media/recent/?count="+m+"&access_token="+c,d.log("[instagramService]: about to fetch recent media from url: "+l),e.next=7,i.api.jsonp(l);case 7:p=e.sent,o(p),a=b(p.data),s=p.pagination&&p.pagination.next_url;case 11:return e.abrupt("return",{items:t.extend&&t.items?t.items.concat(a):a,nextUrl:s});case 12:case"end":return e.stop()}},e,u)})),function(e){return t.apply(this,arguments)});return{getAuthInfo:n,openAuthWindow:function(){var e=i.common.getAuthRedirectUrl("instagram/auth"),t=f+"?client_id="+p+"&redirect_uri="+e+"&response_type=token";d.log("[instagramService]: created instagram login link: "+t),_=Object(s.f)(t,"InstagramAuthWin")},postAuthResult:function(){var e=self.location;self.opener.postMessage(""+e.hash,e.protocol+"//"+e.host)},setAuthListener:function(e){return i.common.setMessageAuthListener(function(){return _},e,E.INSTAGRAM).then(function(e){return _=null,e})},logout:function(e){i.common.removeAuthToken(e,E.INSTAGRAM)},getAccountInfo:r,getRecents:g}}},"./tabs/Instagram/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{instagram:{main_title:"Instagram",no_auth_title:"Upload photos from your Instagram account",no_auth_action:"Connect to Instagram",header_title:"Your Recent Instagram Photos",authenticating:"Authenticating..."}}}}},"./tabs/Local/LocalTab.scss":function(e,t){},"./tabs/Local/components/UploadButton/UploadButton.scss":function(e,t){},"./tabs/Local/components/UploadButton/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./common/i18n.js"),s=n("./root/components/Button/index.js"),i=n("./tabs/Local/components/UploadButton/UploadButton.scss");n.n(i);t.default=function(e){return r.a.createElement("div",{className:"upload_button_holder",ref:e.containerRefFn},r.a.createElement(s.default,{text:Object(a.b)("local.browse")}),r.a.createElement("input",{type:"file",name:"file",className:"cloudinary_fileupload"}))}},"./tabs/Local/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/reselect/lib/index.js"),c=(n.n(i),n("../node_modules/react-dnd/lib/index.js")),u=(n.n(c),n("../node_modules/react-dnd-html5-backend/lib/index.js")),l=n.n(u),d=n("./uploader/index.js"),p=n("./common/i18n.js"),f=n("./tabs/hocs/TabPanel.js"),m=n("./root/components/TabFooter/index.js"),E=n("./tabs/Local/components/UploadButton/index.js"),_=n("./tabs/Local/LocalTab.scss");n.n(_);function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var g=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=b(this,e.call.apply(e,[this].concat(a))),o.buttonContainer=null,o.ddArea=null,b(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.buttonContainer&&this.ddArea&&this.context.uploader.renderUploadField(this.buttonContainer,this.ddArea)},t.prototype.render=function(){var e=this;return this.props.connectDropTarget(r.a.createElement("div",{className:"panel-inner-container"},r.a.createElement("div",{className:"drag_area content-wrap browse-box "+(this.props.isDragHover?"drag-active":""),ref:function(t){return e.ddArea=t}},r.a.createElement("div",{className:"drag_content"},r.a.createElement("div",{className:"holder"},r.a.createElement("div",{className:"box centered"},r.a.createElement("span",{className:"icon-upload"}," "),r.a.createElement("div",{className:"icons"},r.a.createElement("div",{className:"icon1"}," "),r.a.createElement("div",{className:"icon2"}," "),r.a.createElement("div",{className:"icon3"}," ")),r.a.createElement("strong",{className:"title single-text"},Object(p.b)("local.dd_title_single")),r.a.createElement("strong",{className:"title multi-text"},Object(p.b)("local.dd_title_multi")),r.a.createElement("strong",{className:"title add single-text"},Object(p.b)("local.drop_title_single")),r.a.createElement("strong",{className:"title add multi-text"},Object(p.b)("local.drop_title_multiple")),r.a.createElement("span",{className:"or"},Object(p.b)("or")),r.a.createElement(E.default,{containerRefFn:function(t){return e.buttonContainer=t}}))))),r.a.createElement(m.default,null)))},t}(o.Component);g.contextTypes={uploader:s.a.object};var h=Object(c.DragDropContext)(l.a)(Object(c.DropTarget)([u.NativeTypes.FILE,u.NativeTypes.URL],{drop:function(e,t){var n=t.getItem(),o=n&&n.urls;return o&&e.addToUploadQueue({files:o}),{dndFinished:!0}}},function(e,t){return{connectDropTarget:e.dropTarget(),isDragHover:t.isOver()}})(g));t.default=Object(f.a)({id:d.consts.SOURCES.LOCAL,title:Object(p.b)("local.main_title"),root:!0})(h)},"./tabs/Local/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/index.js"),r=n("./routing/utils.js");t.default=[{path:Object(r.a)(o.consts.SOURCES.LOCAL),component:null}]},"./tabs/Local/selectors/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"selectUploadParams",function(){return c});var o=n("../node_modules/lodash/difference.js"),r=n.n(o),a=n("../node_modules/reselect/lib/index.js"),s=(n.n(a),n("./uploader/index.js")),i=n("./root/selectors/index.js"),c=Object(a.createSelector)(i.getWidgetConfig,function(e){return r()(Object.keys(e),s.configParser.NON_UPLOADER_PARAMS).reduce(function(t,n){return t[n]=e[n],t},{})})},"./tabs/Local/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{local:{browse:"Browse",main_title:"Upload Files",dd_title_single:"Drag and Drop asset here",dd_title_multi:"Drag and Drop assets here",drop_title_single:"Drop file to begin upload",drop_title_multiple:"Drop files to begin upload"}}}}},"./tabs/URL/UrlTab.scss":function(e,t){},"./tabs/URL/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("./uploader/index.js"),s=n("./common/i18n.js"),i=n("./tabs/hocs/TabPanel.js"),c=n("./root/components/TabFooter/index.js"),u=n("./tabs/URL/UrlTab.scss");n.n(u);function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var d=function(e){function t(){var n,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return n=o=l(this,e.call.apply(e,[this].concat(a))),o.onInputKeyPress=function(e){13===e.which&&o.sendUrlToUpload()},o.onUploadClick=function(){o.sendUrlToUpload()},o.inputRef=null,l(o,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.componentDidMount=function(){this.inputRef&&this.inputRef.focus()},t.prototype.sendUrlToUpload=function(){this.inputRef&&this.props.addToUploadQueue({files:[this.inputRef.value]})},t.prototype.render=function(){var e=this;return r.a.createElement("div",{className:"content-wrap web-block"},r.a.createElement("div",{className:"holder"},r.a.createElement("div",{className:"box centered"},r.a.createElement("strong",{className:"title"},Object(s.b)("url.inner_title")),r.a.createElement("div",{className:"search-field"},r.a.createElement("input",{type:"search",ref:function(t){return e.inputRef=t},onKeyPress:this.onInputKeyPress,placeholder:Object(s.b)("url.input_placeholder")}),r.a.createElement("button",{type:"button",className:"btn-search",onClick:this.onUploadClick}," ")))),r.a.createElement(c.default,null),";")},t}(o.Component);t.default=Object(i.a)({id:a.consts.SOURCES.URL,title:Object(s.b)("url.main_title")})(d)},"./tabs/URL/routes/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/index.js"),r=n("./routing/utils.js"),a=n("./tabs/URL/index.js");t.default=[{path:Object(r.a)(o.consts.SOURCES.URL),component:a.default}]},"./tabs/URL/translations/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={en:{translation:{url:{main_title:"Remote URL",inner_title:"Public URL of an image file:",input_placeholder:"http://remote.site.example/images/remote-image.jpg"}}}}},"./tabs/common/actionMethods.js":function(e,t,n){"use strict";n.d(t,"a",function(){return c});var o=n("../node_modules/lodash/isFunction.js"),r=n.n(o),a=n("./common/actionsBase.js"),s=function(e,t,n){var o=e(t);return r()(o)&&(o=o.apply(void 0,n)),o},i=function(e,t,n,o){var r,a,i,c,u,l=e.types,d=e.id,p=e.selectionParams;p=p||[],e.selectIsIdSelected(n).apply(void 0,[d].concat(p))?o[l.CLEAR_MAX_SELECT_REACHED]():e.multiple&&(a=n,i=o,c=p,(u=s((r=e).selectReachedMaxSelection,a,c))&&i[r.types.SET_MAX_SELECT_REACHED](),u)?d=null:e.multiple||t(l.CLEAR_IMAGE_SELECTION,{context:p[0]}),t(l.SET_FILE_SELECTION,{id:d,params:p})},c=function(e,t,n){var o=e.rootBindActions(t),r=n(),c=Object(a.c)(t);e.e.shiftKey&&e.multiple?function(e,t,n,o){var r=e.types,a=e.id,c=e.selectionParams;c=c||[];var u=e.selectMultipleIdsInRange(n).apply(void 0,[a].concat(c));if(1===u.length)i(e,t,n,o);else if(u.length){var l=s(e.selectAvailableUntilMax,n,c);l?(u=u.slice(0,l),t(r.SET_MULTI_FILE_SELECTION,{ids:u,params:c}),o[r.CLEAR_MAX_SELECT_REACHED]()):o[r.SET_MAX_SELECT_REACHED]()}}(e,c,r,o):i(e,c,r,o)}},"./tabs/common/reducerMethods.js":function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return c}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return u});var o=n("./utils/seamlessUtils.js"),r=function(e,t,n,r){return~r?Object(o.b)(e,n,r):Object(o.a)(e,n,t.id)},a=function(e,t){var n=t.payload;return n.id?r(e,n,"selected",e.selected.indexOf(n.id)):e},s=function(e,t){var n=t.payload;if(n.id){var o=n.params[0],a=e.lists[o].selected.indexOf(n.id);e=r(e,n,["lists",o,"selected"],a)}return e},i=function(e,t,n){var r=t.filter(function(t){return!~e.getIn(n).indexOf(t)});return r.length?Object(o.a)(e,n,r):e},c=function(e,t){var n=t.payload;return i(e,n.ids,["selected"])},u=function(e,t){var n=t.payload;return i(e,n.ids,["lists",n.params[0],"selected"])}},"./tabs/common/selectors.js":function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return i}),n.d(t,"a",function(){return p}),n.d(t,"j",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"h",function(){return l}),n.d(t,"g",function(){return d}),n.d(t,"e",function(){return f}),n.d(t,"i",function(){return E});var o=n("../node_modules/reselect/lib/index.js"),r=(n.n(o),function(e){return function(t){return t[e].lists}}),a=function(e){return function(t){return{context:t[e].currentContext}}},s=function(e){return function(t){return{lists:r(e)(t),maxAllowed:t.widgetConfig.max_files,successfulCount:t.widgetData.successfulCount}}},i=function(e,t,n){return!!(t&&e.selected.length>=t-n)},c=function(e){return Object(o.createSelector)(s(e),function(e){return function(t){return i(e.lists[t],e.maxAllowed,e.successfulCount)}})},u=function(e){return Object(o.createSelector)(function(t){return{lists:r(e)(t),context:a(e)(t).context}},function(e){return e.lists[e.context]})},l=function(e){return Object(o.createSelector)(r(e),function(e){return function(t,n){return e[n].selected.indexOf(t)>-1}})},d=function(e){return Object(o.createSelector)(a(e),function(e){return e})},p=function(e,t,n){return t?t-n-e.selected.length:1/0},f=function(e){return Object(o.createSelector)(s(e),function(e){return function(t){return p(e.lists[t],e.maxAllowed,e.successfulCount)}})},m=function(e,t){var n=e.selected[e.selected.length-1],o=[];if(n){var r=e.items.findIndex(function(e){return e.id===n}),a=e.items.findIndex(function(e){return e.id===t});if(r===a)o.push(t);else for(var s=r<a,i=r+(s?1:-1);s?i<=a:i>=a;s?i++:i--)o.push(e.items[i].id)}return o},E=function(e){return Object(o.createSelector)(r(e),function(e){return function(t,n){return m(e[n],t)}})}},"./tabs/hocs/TabPanel.js":function(e,t,n){"use strict";var o=n("../node_modules/react/index.js"),r=n.n(o),a=n("../node_modules/prop-types/index.js"),s=n.n(a),i=n("../node_modules/react-redux/es/index.js"),c=n("./common/logger.js"),u=n("./routing/utils.js"),l=n("./root/actions/index.js"),d=n("./root/components/TabTitle/index.js"),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=Object(c.c)(),E=function(e,t){return t.root&&e.location.pathname===Object(u.a)(t.id)};t.a=function(e){return function(t){var n=function(n){function o(){var e,t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);for(var r=arguments.length,a=Array(r),s=0;s<r;s++)a[s]=arguments[s];return e=t=f(this,n.call.apply(n,[this].concat(a))),t.onTabTitleMenuClick=function(){t.props.rootActions[l.types.TOGGLE_RESPONSIVE_MENU]()},t.addToUploadQueue=function(e){m.log("[TabPanel]: adding file data to upload queue"),t.props.rootActions[l.types.ADD_UPLOAD_TO_QUEUE]({files:e.files})},f(t,e)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(o,n),o.prototype.componentDidMount=function(){this.updateUploaderSource()},o.prototype.componentDidUpdate=function(){this.updateUploaderSource()},o.prototype.updateUploaderSource=function(){e.root&&!E(this.props.route,e)||(m.log("[TabPanel]: setting uploader source to: "+e.id),this.context.uploader.setCurrentSource(e.id),this.props.rootActions[l.types.SET_ACTIVE_SOURCE]({source:e.id}))},o.prototype.render=function(){return r.a.createElement("div",{className:"panel "+e.id+"\n                    "+(n=this.props,o=e,a=n.route,a.match&&a.match.isExact||E(a,o)||0===a.location.pathname.indexOf(Object(u.a)(o.id))?"active":"")+"\n                    content-wrap"},r.a.createElement(d.default,{title:e.title,menuClickHandler:this.onTabTitleMenuClick}),r.a.createElement(t,p({},this.props,{addToUploadQueue:this.addToUploadQueue})));var n,o,a},o}(o.Component);return n.contextTypes={uploader:s.a.object},n.displayName="TabPanelHOC("+e.id+")",Object(i.b)(null,function(e){return{rootActions:Object(l.default)(e)}})(n)}}},"./uploader/common/consts.js":function(e,t,n){"use strict";t.a={QUEUE_STATUS:{NONE:0,RUNNING:1,FINISHED:2},VIEW_TYPES:{MODAL:1,INLINE:2},SOURCES:{LOCAL:"local",URL:"url",CAMERA:"camera",IMAGE_SEARCH:"image_search",GOOGLE_DRIVE:"google_drive",DROPBOX:"dropbox",FACEBOOK:"facebook",INSTAGRAM:"instagram"},ABORTED:"__aborted__",RESOURCE_TYPES:{AUTO:"auto",IMAGE:"image",VIDEO:"video",RAW:"raw"},BATCH_CANCEL_REASONS:{MAX_EXCEEDED:1}}},"./uploader/common/defaults.js":function(e,t,n){"use strict";n.d(t,"b",function(){return s});var o=n("./uploader/common/consts.js"),r=o.a.SOURCES,a=[r.LOCAL,r.URL,r.CAMERA,r.IMAGE_SEARCH,r.DROPBOX,r.FACEBOOK,r.INSTAGRAM],s=function(){return a.slice()};t.a={cloud_name:null,upload_preset:"",upload_prefix:"",secure:!0,folder:null,max_files:null,cropping:null,viewType:o.a.VIEW_TYPES.MODAL,sources:s(),default_source:null,multiple:!0,google_api_key:null,dropbox_app_key:null,search_by_sites:!1,search_by_rights:!1,uploadTags:[],public_id:"",auto_minimize:!1,requirePrepareParams:!1,useTagsCallback:!1,text:null,language:"en",show_advanced_options:!1,show_powered_by:!0,show_completed_button:!1,show_insecure_preview:!1}},"./uploader/common/utils.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"getFileNameFromUrl",function(){return p}),n.d(t,"getPreviewDimensions",function(){return f}),n.d(t,"validateMinDimensions",function(){return m}),n.d(t,"constructMinDimensionsInvalidMessage",function(){return E}),n.d(t,"getUploadFieldFromContainer",function(){return _}),n.d(t,"getUploadFieldFormData",function(){return b}),n.d(t,"createCustomUploadInfo",function(){return g}),n.d(t,"calculateDimensions",function(){return O}),n.d(t,"createUploadFileFromData",function(){return h}),n.d(t,"getAcceptFileTypes",function(){return S}),n.d(t,"getTimestamp",function(){return v});var o=n("../node_modules/jquery/dist/jquery.js"),r=n.n(o),a=n("../node_modules/voca/index.js"),s=(n.n(a),n("./utils/binaryToFile.js")),i=this,c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var u,l,d=function(e){return e.split("/").splice(-1,1)[0]},p=function(e){var t=null;try{var n=new URL(e);(t=d(n.pathname))||(t=d(decodeURIComponent(n.search)))}catch(e){}return t||e},f=function(){return{LARGE:!0,W:235,H:158}},m=function(e,t,n,o){var r=!0;return n&&e<n&&(r=!1),r&&o&&t<o&&(r=!1),r},E=function(e,t,n,o){var a=r.a.map([n,o],function(e){return e||""}).join("x");return"Image dimensions (#width#x#height#) are smaller than the minimum allowed (#limit#)".replace("#width#",e).replace("#height#",t).replace("#limit#",a)},_=function(e){return e.find?e.find("input[type='file']"):r()(e).find("input[type='file']")},b=function(e){return _(e).fileupload("option","formData")},g=function(e){return c({_custom:!0,slice:function(){return new Blob([0,0])}},e)},h=(u=regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!Object(a.isString)(t.file)){e.next=12;break}if(t.file.indexOf("data:")){e.next=9;break}return e.next=5,Object(s.a)(t.file,t);case 5:!((n=e.sent)instanceof File)&&n instanceof Blob&&(n.name=t.name,n={file:n,name:t.name,type:t.type,size:t.size,lastModified:t.lastModified}),e.next=10;break;case 9:n=g(t);case 10:e.next=13;break;case 12:n=t.file;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}},e,i)}),l=function(){var e=u.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e){return l.apply(this,arguments)}),O=function(e){var t=[0,0];if(e.img){var n=e.img,o=n.width,r=n.height;if(e.exif&&e.exif.get("Orientation")>=5){var a=[r,o];o=a[0],r=a[1]}t=[Math.round(1*o),Math.round(1*r)]}return t},S=function(e){var t=e?Array.isArray(e)?e:e.split(","):[];return(t=t.reduce(function(e,t){return e.concat(t.match(/jpe?g/i)?["jpg","jpeg"]:Object(a.trim)(t))},[])).length?new RegExp("\\.("+t.join("|")+")$","i"):null},v=function(){return Math.floor((new Date).getTime()/1e3)}},"./uploader/configParser.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"MANDATORY_PARAMS",function(){return c}),n.d(t,"BEHAVIOR_PARAMS",function(){return u}),n.d(t,"UPLOAD_PARAMS",function(){return l}),n.d(t,"CLIENT_SIDE_PARAMS",function(){return d}),n.d(t,"ADVANCED_PARAMS",function(){return p}),n.d(t,"CUSTOMIZATION_PARAMS",function(){return f}),n.d(t,"INTERNAL_PARAMS",function(){return m}),n.d(t,"THIRD_PARTY_PARAMS",function(){return E}),n.d(t,"NON_UPLOADER_PARAMS",function(){return _}),n.d(t,"configMerger",function(){return g});var o=n("../node_modules/lodash/pick.js"),r=n.n(o),a=n("../node_modules/lodash/mergeWith.js"),s=n.n(a),i=n("./uploader/common/defaults.js"),c=["cloud_name","upload_preset","api_key"],u=["sources","secure","default_source","show_advanced_options","show_completed_button","multiple","max_files","cropping","cropping_aspect_ratio","cropping_default_selection_ratio","cropping_show_dimensions","cropping_coordinates_mode","auto_minimize","viewType","debug"],l=["public_id","folder","tags","resource_type","context","face_coordinates","custom_coordinates","upload_signature_timestamp","use_filename","unique_filename","invalidate"],d=["requirePrepareParams","useTagsCallback","usePreBatchCallback","client_allowed_formats","max_file_size","max_image_width","max_image_height","min_image_height","min_image_width","cropping_validate_dimensions","max_chunk_size","thumbnails","thumbnail_transformation","secure_distribution"],p=["show_powered_by","show_insecure_preview"],f=["theme","text","language"],m=["upload_prefix"],E=["google_api_key","dropbox_app_key","search_by_sites","search_by_rights"],_=["sources","secure","default_source","viewType","debug"].concat(E).concat(f).concat(p).concat(m),b=["sources","tags"],g=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return s.a.apply(void 0,t.concat([function(e,t,n){if(~b.indexOf(n))return t}]))};t.default=function(e){var t=[].concat(c,u,l,d,p,f,m,E);e=r()(e,t);var n,o,a=g({},i.a,e),s=a.max_files?parseInt(a.max_files):null;return a.max_files=s&&!isNaN(s)?s:null,a.cropping&&"none"!==a.cropping?a.multiple=!1:(a.cropping=null,a.multiple=1!==a.max_files&&a.multiple),a.sources=(n=a.sources,o=Object(i.b)(),Array.isArray(n)&&n&&n.length?n.filter(function(e){return!!~o.indexOf(e)}):o),a}},"./uploader/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("./uploader/common/consts.js"),r={UPLOADER_READY:"UPLOADER_READY",UPLOADER_FILE_STATUS:"UPLOADER_FILE_STATUS",UPLOADER_SHOW:"UPLOADER_SHOW",UPLOADER_UPDATE_SETTINGS:"UPLOADER_UPDATE_SETTINGS",UPLOADER_CLIENT_HIDE:"UPLOADER_CLIENT_HIDE",UPLOADER_CLIENT_TAGS:"UPLOADER_CLIENT_TAGS",UPLOADER_CLIENT_MINIMIZE:"UPLOADER_CLIENT_MINIMIZE",UPLOADER_BATCH_STARTED:"UPLOADER_BATCH_STARTED",UPLOADER_BATCH_CANCELLED:"UPLOADER_BATCH_CANCELLED",UPLOADER_CLOUD_INFO:"UPLOADER_CLOUD_INFO",UPLOADER_SUCCESS_COUNTER:"UPLOADER_SUCCESS_COUNTER",UPLOADER_MAX_EXCEEDED:"UPLOADER_MAX_EXCEEDED"},a={FILE_FINISH:"upload-finish",FILE_ADDED:"upload-added",WIDGET_VIEW_TYPE_CHANGE:"widget-view-change",SOURCE_CHANGED:"sourceChanged",TAGS:"tags",PUBLICID:"publicid",QUEUES_START:"queues-start",QUEUES_END:"queues-end",SHOW_COMPLETED:"show-completed",ABORT:"abort",RETRY:"retry",MAX_EXCEEDED:"max-exceeded"},s={INIT:"uw_init",MINIMIZE:"uw_mini",CONFIG:"uw_config",PREPARE:"uw_prepare",PRE_BATCH:"uw_prebatch",EVENT:"uw_event",SHOW:"uw_show",HIDE:"uw_hide",TAGS:"uw_tags",FILE:"uw_file"},i=n("./uploader/common/defaults.js"),c=n("./uploader/common/utils.js"),u=n("../node_modules/qs/lib/index.js"),l=n("./common/logger.js"),d=n("./utils/envUtils.js"),p=n("./appConfig.js"),f=Object(l.b)(),m=function(e){if(!e||!e.length)throw"PostMessage - target not set!"},E=function(e,t){var n=void 0,o=Array.isArray(t.target)?t.target:[t.target],r=t.types,a=function(e){if(~o.indexOf(e.origin)){n=e.origin;var a=function(e,t){var n=null;try{n="string"==typeof e?JSON.parse(e):e}catch(e){f.error("[postmessage]: failed to parse data from "+t,e)}return n}(e.data,e.origin);a&&a.type&&r[a.type]&&(f.log("[postmessage]: found matching handler for '"+a.type+"' event from: "+e.origin,a.data),r[a.type](a.data,a.type,e,t))}};return m(o),self.addEventListener("message",a,!1),{send:function(t){var o=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).target||n;m(o);try{f.log("[postmessage]: posting message to: "+o),e.postMessage(JSON.stringify(t),o)}catch(e){f.error("[postmessage]: failed to post message to target: "+o,e)}},close:function(){return self.removeEventListener("message",a)}}},_=n("./uploader/store/actions.js"),b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},g=this;var h=Object(l.b)(),O=function(e){var t,n,o,r,a=((t={})[s.PRE_BATCH]=[],t[s.PREPARE]=[],t),i=function(e,t){return a[e].splice(0).forEach(function(e){return e(t)})},u=(o=regeneratorRuntime.mark(function t(n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return h.log("[uploader.externalInterface]: received upload file ",n),t.t0=e.actions,t.t1=_.b.SET_UPLOADER_ADD_CLIENT_UPLOAD,t.next=5,Object(c.createUploadFileFromData)(n);case 5:t.t2=t.sent,t.t3=n.index,t.t4=n.count,t.t5={file:t.t2,index:t.t3,count:t.t4},t.t0[t.t1].call(t.t0,t.t5);case 10:case"end":return t.stop()}},t,g)}),r=function(){var e=o.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e){return r.apply(this,arguments)}),l=E(self.parent,{target:e.qsParams.pmHost,types:(n={},n[s.INIT]=function(t){h.log("[uploader.externalInterface]: received init message ",t),e.actions[_.b.SET_UPLOADER_CONFIG]({config:t})},n[s.CONFIG]=function(t){h.log("[uploader.externalInterface]: received updated config ",t),e.actions[_.b.SET_UPLOADER_CONFIG]({config:t})},n[s.PREPARE]=function(e){h.log("[uploader.externalInterface]: received prepared upload params ",e),i(s.PREPARE,e)},n[s.SHOW]=function(t){h.log("[uploader.externalInterface]: received show message ",t),e.actions[_.b.SET_UPLOADER_SHOW](t)},n[s.HIDE]=function(t){h.log("[uploader.externalInterface]: received hide message"),e.actions[_.b.SET_UPLOADER_HIDE]({options:t})},n[s.TAGS]=function(t){h.log("[uploader.externalInterface]: received tags",t),e.actions[_.b.SET_UPLOADER_RETRIEVED_TAGS](t)},n[s.MINIMIZE]=function(){h.log("[uploader.externalInterface]: received minimize message"),e.actions[_.b.SET_UPLOADER_MINIMIZE]()},n[s.FILE]=u,n[s.PRE_BATCH]=function(e){h.log("[uploader.externalInterface]: received pre-batch callback ",e),i(s.PRE_BATCH,e)},n)}),d=function(e,t,n){return a[e].push(t),l.send(b({},n,{type:e}))};return{emitEvent:function(e){return l.send(b({type:s.EVENT},e))},requestPrepareParams:function(e,t){return d(s.PREPARE,e,t)},sendPreBatch:function(e,t){return d(s.PRE_BATCH,e,t)},requestTags:function(e){return l.send(b({type:s.TAGS},e))},sendHide:function(e){return l.send(b({type:s.HIDE},e))}}},S=n("./services/index.js"),v=n("../node_modules/fbemitter/index.js"),T=n("./utils/domUtils.js"),j=n("../node_modules/lodash/pick.js"),I=n.n(j),x=n("../node_modules/lodash/isBoolean.js"),C=n.n(x),y=n("../node_modules/voca/index.js"),A=n("../node_modules/jquery/dist/jquery.js"),R=n.n(A),D=n("./uploader/configParser.js"),L=Object(l.c)(),U=function(e){var t=e.upload_prefix||p.a.api.uploadBase;return t+=""+p.a.api.uploadVersion+e.cloud_name+"/",e.resource_type&&(t+=e.resource_type+"/"),t+p.a.api.upload},P=function(e){var t=I()(e,D.UPLOAD_PARAMS);return Object.keys(t).reduce(function(t,n){var o=e[n];return(C()(o)||o&&!Object(y.isBlank)(o))&&(t[n]=o),t},{})},w=function(e,t,n,o){L.log("[uploader.uploadField]: rendering cloudinary upload tag with upload options: ",o);var r,a=U(n),s=Object(c.getPreviewDimensions)();return e.unsigned_cloudinary_upload(n.upload_preset,o,{url:a,cloud_name:n.cloud_name,dropZone:R()(t),multiple:n.multiple,previewMaxWidth:s.W,previewMaxHeight:s.H,acceptFileTypes:Object(c.getAcceptFileTypes)(n.client_allowed_formats),autoUpload:!1,canvas:!1,minFileSize:0,maxFileSize:n.max_file_size||0,maxChunkSize:(r=n,Math.max(p.a.upload.minChunkSize,r.max_chunk_size||p.a.upload.maxChunkSize)),disableImageResize:!(n.max_image_width||n.max_image_height),imageMaxWidth:n.max_image_width,imageMaxHeight:n.max_image_height,imageMinWidth:n.min_image_width,imageMinHeight:n.min_image_height,loadImageMaxFileSize:p.a.upload.maxImageSize,disableImageReferencesDeletion:!0,previewThumbnail:!1})},N=function(e,t,n){L.log("[uploader.uploadField]: about to update form data with prepared params: ",n);var o=Object(c.getUploadFieldFormData)(e);n.signature?(o.signature=n.signature,o.timestamp=n.timestamp||o.timestamp):delete o.signature,o.api_key=n.api_key||t.api_key,o.upload_preset=n.upload_preset||o.upload_preset;var r=P(n);return Object.keys(r).forEach(function(e){o[e]=r[e]}),function(e,t,n){if(Object(y.isString)(n.upload_host)&&!Object(y.isBlank)(n.upload_host)){var o=Object(c.getUploadFieldFromContainer)(e),r=o.fileupload("option","url"),a=U({upload_prefix:"//"+n.upload_host+"/",cloud_name:t.cloud_name});r!==a&&(L.log("[uploader.uploadField]: updating upload url to new one received from prepared data = "+a),o.fileupload("option","url",a))}}(e,t,n),o},M=function(e,t,n){var o=P(n);o.timestamp=o.upload_signature_timestamp,delete o.upload_signature_timestamp,function(e,t){if(t.min_image_width||t.min_image_height){var n=e.fileupload("option","processQueue");n.push({action:"validate_image_min_size"}),e.fileupload("option","processQueue",n)}}(w(e,t,n,o),n)},F=n("../node_modules/reselect/lib/index.js"),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},G=function(e){return e.uploader.queues},B=function(e){var t=e.uploader.queues;return t[t.length-1]},H=function(e){return e.uploader.queues.find(function(e){return e.status===o.a.QUEUE_STATUS.NONE})},q=function(e){return e.uploader.queues.find(function(e){return e.status===o.a.QUEUE_STATUS.RUNNING})},V=Object(F.createSelector)(B,function(e){return e&&e.config}),W=function(e){return{publicId:e.uploader.uploadPublicId,tags:e.uploader.uploadTags}},Q=Object(F.createSelector)(G,function(e){return e.reduce(function(e,t){return e.files=k({},e.files,t.files),e.filesData=k({},e.filesData,t.filesData),e},{files:{},filesData:{}})}),X=Object(F.createSelector)(G,function(e){return e?e.reduce(function(e,t){return k({},e,t.filesData)},{}):{}}),z=Object(F.createSelector)(function(e){return e.uploader.cloudInfo},function(e){return e.uploader.onConsole},function(e){return e.uploader.onDevConsole},function(e,t,n){return{info:e,onConsole:t,onDevConsole:n}}),Y=function(e){return e.uploader.successCounter},K=(Object(F.createSelector)(q,function(e){return e?e.ids.reduce(function(t,n){return e.filesData[n].paused&&(t[n]=e.files[n]),t},{}):{}}),Object(F.createSelector)(G,function(e){return e.reduce(function(e,t){return t.ids.forEach(function(n){e[n]=k({},t.filesData[n],{getPreviewObject:t.files[n].getPreviewObject})}),e},{})})),Z=function(e){return e&&{id:e.queueId,config:e.config,sameConfig:e.sameConfig,status:e.status,pendingPreCalls:e.pendingPreCalls,ids:e.ids}},$=Object(F.createSelector)(H,Z),J=Object(F.createSelector)(q,Z),ee=Object(F.createSelector)(H,function(e){return e&&e.ids}),te=Object(F.createSelector)(q,function(e){return e&&e.ids}),ne=Object(F.createSelector)(B,Z),oe=function(e){return e.uploader.showCounter},re=function(e){return{options:e.uploader.hideOptions,counter:e.uploader.hideCounter}},ae=function(e){return e.uploader.minimizeCounter},se=function(e){return{source:e.uploader.source,options:e.uploader.showOptions}},ie=function(e){return e.uploader.retrievedTags},ce=function(e){return!!e.uploader.queues.find(function(e){return!!Object.values(e.filesData).find(function(e){return!e.done&&!e.aborted&&!e.failed})})},ue=function(e){return e.uploader.clientUploadBatch},le=function(e){return e.uploader.fileQueueIndex},de=function(e){return e.uploader.fileVersions},pe=Object(F.createSelector)(W,function(e){return e.uploader.publicIdCounters},function(e,t){return e.publicId?{publicId:e.publicId,counter:t[e.publicId]||0}:null}),fe=Object(F.createSelector)(H,function(e){return e&&e.config.folder}),me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e=Object(l.c)(),be=function(e,t){var n=le(t)[e];if(!~n)throw new Error("[uploader.uploadFileMethods]: didnt find queue for file with id: "+e);return n},ge=function(e,t){var n=t.getState(),o=be(e,n),r=void 0,a=G(n)[o].files[e];if(a&&(r=a.getFileObject()),!r)throw new Error("[uploader.uploadFileMethods]: didnt find file object for id: "+e);return r},he=function(e,t){var n,o=t.getState(),r=be(e,o);if(!(n=G(o)[r].filesData[e]))throw new Error("[uploader.uploadFileMethods]: didnt find file data for file with id: "+e);return n},Oe=function(e,t){var n=t.getState(),o=be(e,n);return~o?G(n)[o].config:null},Se=function(e,t){var n=le(t.getState())[e];return n||0===n},ve=function(e,t,n){var r,a,s,i,c,u=void 0;if(t&&(t.resource_type===o.a.RESOURCE_TYPES.IMAGE||t.resource_type===o.a.RESOURCE_TYPES.VIDEO)){var l=Oe(e,n);if(l&&!1!==l.thumbnails){var d=(r=t,a=l,s=z(n.getState()).info||{},i={cloud_name:a.cloud_name,private_cdn:s["data-private-cdn"],cname:s["data-cname"],secure_distribution:a.secure_distribution?a.secure_distribution:s["data-secure-distribution"],format:"png"===r.format?"png":"jpg",version:r.version,resource_type:r.resource_type,secure:!0},(c=a.thumbnail_transformation)?Object(y.isString)(c)?i.raw_transformation=c:i.transformation=c:(i.width=90,i.height=60,i.crop="limit"),i);u=R.a.cloudinary.url(t.public_id,d)}return u}},Te=function(e,t,n,o){if(t&&"object"===(void 0===n?"undefined":Ee(n))){var r=ve(e,n,o);r&&(n=me({},n,{thumbnail_url:r}))}o.actions[_.b.SET_UPLOADER_FILE_DONE]({id:e,success:t,result:n});var s=he(e,o);_e.log("[uploader.uploadFileMethods]: retrieved file data for finalized upload [id: "+e+"]",s),o.sendExternalEvent({event:a.FILE_FINISH,info:s})},je=function(e,t,n){n.actions[_.b.SET_UPLOADER_FILE_DATA_METHODS]({id:e,methods:{submitUpload:t.submit.bind(t),abortUpload:t.abort&&t.abort.bind(t)}})},Ie=Object(l.c)(),xe={FILE_UPLOAD_PROGRESS:"fileuploadprogress",FILE_UPLOAD_PROCESS_DONE:"fileuploadprocessdone",FILE_UPLOAD_PROCESS_FAIL:"fileuploadprocessfail",FILE_PROCESS_ALWAYS:"fileuploadprocessalways",FILE_UPLOAD_ADDED:"fileuploadadd",FILE_UPLOAD_FAIL:"fileuploadfail",FILE_UPLOAD_DONE:"fileuploaddone",FILE_UPLOAD_CHANGE:"fileuploadchange",FILE_UPLOAD_PASTE:"fileuploadpaste",FILE_UPLOAD_DROP:"fileuploaddrop"},Ce=function(e,t){var n,o,r,a,s,i=(n=e,r=(o=t).getUploadOptions().tags.join(","),a=he(n.uniqueId,o),{tags:Object(y.isBlank)(r)?void 0:r,public_id:Object(y.isBlank)(a.publicId)?void 0:a.publicId});if(i.tags?e.formData.tags=i.tags:delete e.formData.tags,i.public_id?e.formData.public_id=i.public_id:delete e.formData.public_id,e.files&&e.files.length&&e.files[0]){var c=ge(e.uniqueId,t);Object(y.isString)(c)&&(e.formData.file=c)}delete e.formData.callback,t.updatePreparedParams((s=e.uniqueId,he(s,t).preparedParams))},ye=function(e,t,n,o){var r=o.files[0].id;if(r){Ie.log("[uploader.uploadCallbacks]: upload added with id: "+r+" ",o);var a=ge(r,t);o.uniqueId=r,a?(o.files[0]=a,je(r,o,t),function(e,t,n,o){var r=function(e){Object(c.getUploadFieldFromContainer)(n).fileupload("option","acceptFileTypes",e)};if(Object(y.isString)(t))_e.log("[uploader.uploadFileMethods]: turning off file type option for url based upload"),r(null);else if(he(e,o).camera)_e.log("[uploader.uploadFileMethods]: turning off accepted-file-types config for Camera based upload"),r(null);else{_e.log("[uploader.uploadFileMethods]: turning on file accepted-file-types config for File based upload");var a=Oe(e,o);a&&r(Object(c.getAcceptFileTypes)(a.client_allowed_formats))}}(r,a,e,t)):Ie.error("[uploader.callbacks] -UPLOAD_ADD-: failed to get file object for id: "+r,o)}else Ie.error("[uploader.callbacks] -UPLOAD_ADD-: invalid data information added !!!!!!!! ",o)},Ae=function(e,t,n,o){(function(e,t){var n=t.getState(),o=te(n),r=!1;if(o)r=o&&~o.indexOf(e);else{var a=ee(n);r=a&&~a.indexOf(e)}return!!r})(o.uniqueId,t)&&(Ie.log("[uploader.uploadCallbacks] -UPLOAD_PROCESSED-: upload processed for file: "+o.uniqueId+" ",o),t.actions[_.b.SET_UPLOADER_QUEUE_RUNNING_FOR_FILE]({id:o.uniqueId}),o.formData&&Ce(o,t),o.files[0].error||o.submit())},Re=function(e,t,n,o){var r,a,s=Math.round(100*o.loaded/o.total);Ie.log("[uploader.uploadCallbacks] -UPLOAD_PROGRESS-: upload progress update for file: "+o.uniqueId+", progress: "+s),r=o.uniqueId,a=s,t.actions[_.b.SET_UPLOADER_FILE_PROGRESS]({id:r,progress:a})},De=function(e,t,n,o){var r,a;Ie.log("[uploader.uploadCallbacks] -UPLOAD_PROCESS_DONE-: processing done for file: "+o.uniqueId),o.files&&o.files.length&&Se(o.uniqueId,t)&&(je(o.uniqueId,o,t),r=o.uniqueId,a=o,t.actions[_.b.SET_UPLOADER_FILE_PREVIEW]({id:r,preview:a.files[0].preview,img:a.img,exif:a.exif}))},Le=function(e,t,n,o){var r=function(e){var t="error";if("json"===e.dataType&&e.jqXHR&&e.jqXHR.responseText)try{t=JSON.parse(e.jqXHR.responseText)}catch(e){Ie.warn("[uploader.uploadCallbacks]: failed to parse fail message")}else e.jqXHR&&e.jqXHR.statusText?t=e.jqXHR.statusText:e.errorThrown&&(t=e.errorThrown);return t}(o);Ie.warn("[uploader.uploadCallbacks] -UPLOAD_FAILED-: encountered upload failure for file: "+o.uniqueId,r,o),Se(o.uniqueId,t)&&Te(o.uniqueId,!1,r,t)},Ue=function(e,t){Ie.log("[uploader.callbacks]: setting up callbacks on uploader");var n=function(){return Object(c.getUploadFieldFromContainer)(e).fileupload("option","add",function(e,n){!function(e,t,n,o,r){if(!n.isDefaultPrevented()&&(r=R()(r),o.process(function(){return r.fileupload("process",o)}),"string"==typeof o.files[0]&&t.config.multiple)){var a=r.fileupload("option","processQueue");a.push({action:"debounce"}),r.fileupload("option","processQueue",a)}}(0,t,e,n,this)})},o=xe;return Object(c.getUploadFieldFromContainer)(e).on(o.FILE_UPLOAD_ADDED,ye.bind(null,e,t)).on(o.FILE_UPLOAD_PROGRESS,Re.bind(null,e,t)).on(o.FILE_UPLOAD_FAIL,Le.bind(null,e,t)).on(o.FILE_UPLOAD_PROCESS_DONE,De.bind(null,e,t)).on(o.FILE_UPLOAD_PROCESS_FAIL,function(e,t,n,o){var r=o.files[0].error;r?(Ie.warn("[uploader.uploadCallbacks] -UPLOAD_PROCESS_FAIL-: \n                encountered upload processing failure for file: "+o.uniqueId),Te(o.uniqueId,!1,r,t)):(Ie.warn("[uploader.uploadCallbacks]: process failed without error message",o),De(0,t,0,o))}.bind(null,e,t)).on(o.FILE_PROCESS_ALWAYS,Ae.bind(null,e,t)).on(o.FILE_UPLOAD_DONE,function(e,t,n,o){Ie.log("[uploader.callbacks] -UPLOAD_DONE-: upload done for file: "+o.uniqueId),Te(o.uniqueId,!0,o.result,t)}.bind(null,e,t)).on(o.FILE_UPLOAD_DROP+" "+o.FILE_UPLOAD_CHANGE+" "+o.FILE_UPLOAD_PASTE,function(e,t,n){return Ie.log("[uploader.callbacks]: new batch ["+n.files.length+"] was added to be uploaded"),e.handleBatchAdded(n)}.bind(null,t)),n(),{useCustomAddMethod:n}},Pe=Object(l.c)(),we=function(e,t,n,o){if(!e.uploader.clearQueuesInProgress){var s=function(e,t){var n=de(t),o=de(e),r={},a=[];if(o!==n){var s=$(e),i=s&&s.pendingPreCalls,c=K(e);Object.keys(o).forEach(function(e){void 0!==n[e]&&o[e]===n[e]||i&&~s.ids.indexOf(e)||(a.push(e),r[e]=c[e])})}return{ids:a,files:r,hadPrevious:n&&Object.keys(n).length}}(e,t);s.ids.length&&n(r.UPLOADER_FILE_STATUS,{ids:s.ids,files:s.files}),s.hadPrevious&&(i=e,ce(t)&&!ce(i)&&o({event:a.QUEUES_END,info:{}}))}var i},Ne=function(e,t,n,o,a){var s,i,c,u,l,d,p,f,m,E,b,g,h,O,S,v,T,j,I,x,C,y,A,R,D,L,U,P,w;s=e,i=t,c=n.emit,u=V(i),l=V(s),!u&&l&&c(r.UPLOADER_READY),u&&u!==l&&c(r.UPLOADER_UPDATE_SETTINGS,l),we(e,t,n.emit,o),function(e,t,n){if(oe(e)>oe(t)){var o=se(e),a={source:void 0};o.source!==se(t).source&&(a.source=o.source),o.options&&o.options.fileDialog&&(Pe.log("[uploader.stateProcessors]: showing file dialog with show event"),n.showFileDialog()),Pe.log("[uploader.stateProcessors]: received show event data ",a),n.emit(r.UPLOADER_SHOW,a)}}(e,t,n),d=e,p=t,f=n.emit,(m=re(d)).counter>re(p).counter&&(Pe.log("[uploader.stateProcessors]: received client hide event with options: ",m.options),f(r.UPLOADER_CLIENT_HIDE)),E=e,b=t,g=n.emit,ae(E)>ae(b)&&(Pe.log("[uploader.stateProcessors]: received client minimize event"),g(r.UPLOADER_CLIENT_MINIMIZE)),function(e,t,n){if(n.getHasRenderedUploadField()){var o=$(e),r=J(e),a=$(t),s=n.getLoadedQueueId();p=o,(!r&&p&&s!==p.id&&!p.pendingPreCalls||(i=o,c=a,(!(u=r)||i&&u.id===i.id)&&c&&i&&i.id===c.id&&(i.config!==c.config||(d=c,(l=i)&&(d&&!l.pendingPreCalls&&d.pendingPreCalls&&l.id===d.id||!l.pendingPreCalls&&(!d||l.id!==d.id))))))&&(Pe.log("[uploader.stateProcessors]: new queue ("+o.id+") with new config is now active, will re-render upload field"),n.reRenderUploadField(o.id),n.loadFilesFromActiveQueue())}var i,c,u,l,d,p}(e,t,n),h=e,O=t,S=n.emit,(v=ie(h))!==ie(O)&&(Pe.log("[uploader.stateProcessors]: received new tags from client"),S(r.UPLOADER_CLIENT_TAGS,{tags:v})),T=t,j=n,I=a,x=ue(e),C=ue(T),!x||C&&x.files.length===C.files.length||(Pe.log("[uploader.stateProcessors]: client uploads batch changed, new batch has "+x.files.length+" files"),1===x.files.length&&x.count>1?(j.emit(r.UPLOADER_BATCH_STARTED),j.emit(r.UPLOADER_FILE_STATUS,{ids:[],files:{},simulated:!0})):x.files.length===x.count&&(I[_.b.CLEAR_UPLOADER_CLIENT_BATCH](),j.addToQueue({files:x.files}))),y=e,A=t,R=n.emit,(D=z(y))&&D!==z(A)&&R(r.UPLOADER_CLOUD_INFO,D),L=e,U=t,P=n.emit,(w=Y(L))!==Y(U)&&P(r.UPLOADER_SUCCESS_COUNTER,{count:w})},Me=n("../node_modules/lodash/fp.js"),Fe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ke=this;var Ge=Object(l.b)(),Be=function(e){var t,n,r=e.getState,s=e.actions,i=function(){var e=r(),t=re(e).options,n=!0;if(!t||!t.quiet){var o=te(e);(o=o&&o.length?o:ee(e))&&o.length&&(n=confirm("There are running uploads. Click OK to abort."))}return n},c=function(t,n,r){return t.map(function(t){var a=void 0;if(r[t]&&!r[t].done){var s=n[t];s&&(Ge.log("[uploader.queuesManager]: aborting upload for file with id: "+t),a=s.abortUpload&&s.abortUpload(),Te(t,!1,o.a.ABORTED,e))}if(a){var i=a;a=new Promise(function(e){return i.then(e,e)})}else a=Promise.resolve();return a})},u=function(){var t=[];return G(r()).forEach(function(n){if(n.status!==o.a.QUEUE_STATUS.FINISHED){var r=c(n.ids,n.files,n.filesData);t=t.concat(r),e.actions[_.b.SET_UPLOADER_QUEUE_FINISHED]({id:n.queueId})}}),e.sendExternalEvent({event:a.ABORT,info:{ids:null,all:!0}}),Promise.all(t)},l=function(e){return 1===e.length&&"*"===e[0][0]},d=function(e){var t;return Fe({},e,((t={}).__uw_upload_file__=!0,t))};return{getPausedFilesFromActiveQueue:function(){var e=[],t=ee(r());return t&&t.length&&(Ge.log("[uploader]: loading ["+t.length+"] files from active queue"),e=t.map(function(e){return d({id:e})})),e},clearQueues:(t=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=i())){e.next=14;break}return Ge.log("[uploader.queuesManager]: clear queues about to abort all active uploads"),e.prev=3,s[_.b.START_CLEAR_QUEUES](),e.next=7,u();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),Ge.error("[uploader.queuesManager]: encountered error while aborting files for clearQueues",e.t0);case 12:s[_.b.CLEAR_UPLOADER_QUEUES](),s[_.b.END_CLEAR_QUEUES]();case 14:return e.abrupt("return",t);case 15:case"end":return e.stop()}},e,ke,[[3,9]])}),n=function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(){return n.apply(this,arguments)}),abortUploads:function(t){var n,o;l(t)?(Ge.log("[uploader.queuesManager]: received request to abort ALL uploads"),u()):t.length&&(Ge.log("[uploader.queuesManager]: received request to abort uploads with ids: ",t),n=t,o=Q(r()),c(n,o.files,o.filesData),e.sendExternalEvent({event:a.ABORT,info:{ids:n.slice(),all:!1}}))},processRetries:function(t){var n=l(t);n?Ge.log("[uploader.queuesManager]: received request to retry ALL uploads"):t.length&&Ge.log("[uploader.queuesManager]: received request to retry uploads with ids: ",t),e.sendExternalEvent({event:a.RETRY,info:{ids:n?null:t,all:n}}),s[_.b.SET_UPLOADER_RETRY_FILES]({ids:t,retryAll:n})},addNewBatchData:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments[2],s=r(),i=Object(Me.uniqueId)("uw-batch"),c=pe(s),u=c&&c.publicId,l=c&&c.counter||2;!o&&t.files.length>1&&(Ge.log("[uploader.queuesManager]: multiple uploads disabled - \n            taking first file from batch of: "+t.files.length),t.files=[t.files[0]]);var p,f,m,E=t.files.map(function(o,r){var s,d,p=Object(Me.uniqueId)("uw-file"),f=u||"";return u&&(r||c&&c.counter)&&(f=u+"-"+l,l+=1),e.sendExternalEvent({event:a.FILE_ADDED,info:{id:p,file:o,batchId:i,publicId:f}}),{id:p,file:o,partOfBatch:t.files.length>1,delayed:n,batchId:i,publicId:f,publicIdCounter:(s=f,d=l,s?d>2?d-1:0:-1)}});return e.actions[_.b.SET_UPLOADER_FILE_QUEUED]({files:E,pendingPreCalls:n}),u&&e.actions[_.b.SET_UPLOADER_PID_COUNTER]({publicId:u,counter:l}),p=E,f=r(),m=fe(f)||"",p.map(function(e){return d({id:e.id,name:Object(y.isString)(e.file)?e.file:e.file.name,publicId:e.publicId,folder:m})})}}},He=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},qe=Object(l.b)(),Ve=function(e,t){return new Promise(function(n){var o,r,a,s,i=(r=(o=t).getUploadOptions(),a=o.getLatestConfig(),s=r.tags.length?r.tags.join(","):void 0,{timestamp:a.upload_signature_timestamp||Object(c.getTimestamp)(),tags:s,folder:a.folder,use_filename:a.use_filename,unique_filename:a.unique_filename,invalidate:a.invalidate,upload_preset:a.upload_preset||void 0}),u=null;u=e[0].publicId?e.map(function(e){return He({},i,{public_id:e.publicId})}):i,t.externalApi.requestPrepareParams(function(e){n({timestamp:i.timestamp,data:e})},{widgetId:t.getWidgetId(),request:u})})},We=function(e,t,n,o){var r,a,s=[t?(r=e,a=o,new Promise(function(e,t){qe.log("[uploader.batchHandler]: pre-batch handler is configured - will delay loading of batch"),a.externalApi.sendPreBatch(function(n){!0===n.cancel?t({cancel:!0}):e(n)},{widgetId:a.getWidgetId(),request:{files:r}})})):null,n?Ve(e,o):null];return Promise.all(s).then(function(t){!function(e,t,n){if(t){var o=t;qe.log("[uploader.batchHandler]: handling response for prepare request: ",o);var r=Array.isArray(o.data),a=e.reduce(function(e,t,n){return e[t.id]=He({timestamp:o.timestamp},r?o.data[n]:o.data),e},{});n.actions[_.b.SET_UPLOADER_BATCH_PREPARED]({files:a})}}(e,t[1],o),o.actions[_.b.SET_UPLOADER_QUEUE_PRECALLS_PENDING]({files:e,pending:!1})}).catch(function(t){qe.log("[uploader.batchHandler]: pre-requests failed or cancelled - canceling batch!",t),o.actions[_.b.CANCEL_UPLOADER_FILES]({files:e}),o.notifyBatchCancelled()})},Qe=function(e){return{handleBatchAdded:function(t){qe.log("[uploader.batchHandler]: a new upload batch was added ",t);var n,r,a,s=e.getLatestConfig(),i=!1,c=!1,u=null;if(n=t,a=e,!(r=s).max_files||n.files.length<=r.max_files-Y(a.getState())){var l=ne(e.getState()).id,d=s.usePreBatchCallback,p=s.requirePrepareParams;i=d||p;var f=e.queuesManager.addNewBatchData(t,i,s.multiple);if(We(f,d,p,e).catch(function(e){qe.log("[uploader.batchHandler]: pre flows handling failed with: ",e)}),t.files=f,!i){var m=e.getLoadedQueueId();i=!m||m!==l}}else qe.log("[uploader.batchHandler]: cancelling because batch ("+t.files.length+") exceeds max config"),c=!0,u=o.a.BATCH_CANCEL_REASONS.MAX_EXCEEDED;return{result:!(i||c),cancelled:c,reason:u}}}},Xe=this,ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e};var Ye=Object(l.c)(),Ke=function(e){var t,n,s=e.getState,i=e.actions,u=e.externalApi,l=[],d=void 0,p=null,f=null,m=null,E=null,b=null,g=function(e){e=e||{};var t=new v.EventEmitter;return e.emit=function(n){for(var o=arguments.length,r=Array(o>1?o-1:0),a=1;a<o;a++)r[a-1]=arguments[a];return Object(T.a)(function(){return t.emit.apply(t,[n].concat(r))},1),e},e.on=function(n,o,r){return t.addListener(n,o,r),e},e.once=function(n,o,r){return t.once(n,o,r),e},e.off=function(n){return t.removeAllListeners(n),e},e}(),h=function(){var e;return d||(e=s(),d=e.uploader.id),d},O=function(e){return u.emitEvent(ze({widgetId:h()},e))},S=Be(ze({},e,{sendExternalEvent:O})),j=function(e){return G(s()).find(function(t){return t.queueId===e})},I=function(){return b},x=function(e){return S.abortUploads(e)},C=function(){g.emit(r.UPLOADER_BATCH_STARTED),O({event:a.QUEUES_START,info:{}})},y=function(e){f&&Object(c.getUploadFieldFromContainer)(f.container).fileupload("add",{files:e.files})},A=function(){return I()?j(I()).config:V(s())},D=function(){return W(s())},U=Qe(ze({},e,{abortUploads:x,getLoadedQueueId:I,queuesManager:S,getLatestConfig:A,getWidgetId:h,getUploadOptions:D,notifyBatchCancelled:function(){g.emit(r.UPLOADER_BATCH_CANCELLED),O({event:a.QUEUES_END,info:{}})},actions:i})),P=function(e){return e.cancelled&&e.reason===o.a.BATCH_CANCEL_REASONS.MAX_EXCEEDED&&(Ye.log("[uploader]: batch handling cancelled because max files exceeded"),g.emit(r.UPLOADER_MAX_EXCEEDED),O({event:a.MAX_EXCEEDED,info:{}})),e.result},w=function(e){var t=U.handleBatchAdded(e);return t.cancelled||C(),P(t)},F=function(e){f&&f.updatePreparedParams(e)},k=(t=regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.clearQueues();case 2:return(t=e.sent)&&l.splice(0),e.abrupt("return",t);case 5:case"end":return e.stop()}},e,Xe)}),n=function(){var e=t.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(){return n.apply(this,arguments)});return ze({},g,{isShowingOnStart:function(){return s().uploader.showOnStart},getConfig:function(){return A().asMutable({deep:!0})},isReady:function(){return!!A()},getLoadedQueueId:I,clearQueues:k,addToQueue:function(e){C(),P(U.handleBatchAdded(e))?(Ye.log("[uploader]: received info for programmatically added upload: ",e),y(e)):Ye.log("[uploader]: delaying addition of files to queue as it will be loaded once the upload field is re-rendered")},renderUploadField:function(t,n){if(!f){Ye.log("[uploader]: rendering upload field");var o=ne(s()),r=o.config.asMutable();b=o.id,f=function(e,t,n){L.log("[uploader.uploadField]: initializing upload field with options: ",n);var o=n,r=R()(e);return M(Object(c.getUploadFieldFromContainer)(r),t,o),{update:function(e){o=e;var n=Object(c.getUploadFieldFromContainer)(r);n.fileupload("destroy").removeData(),M(n,t,e)},updatePreparedParams:function(e){return N(r,o,e)},container:r}}(t,n,r),m=Ue(f.container,(a=r,ze({widgetId:h(),getUploadOptions:D,sendExternalEvent:O,handleBatchAdded:w,updatePreparedParams:F},e,{config:a}))),p=t,n}var a},abortUploads:x,loadFilesFromActiveQueue:function(){var e=S.getPausedFilesFromActiveQueue();e&&e.length&&y({files:e})},showFileDialog:function(){p&&Object(c.getUploadFieldFromContainer)(p).trigger("click")},processStateChange:function(e,t){var n,o,r;E||(n=this,o=O,r=i,E=function(e,t){return Ne(e,t,n,o,r)}),E(e,t)},reRenderUploadField:function(e){var t=j(e);f&&f.update(t.config.asMutable()),m&&m.useCustomAddMethod(),b=t.queueId},getHasRenderedUploadField:function(){return!!p},setCurrentSource:function(e){i[_.b.SET_UPLOADER_CURRENT_SOURCE]({source:e}),O({event:a.SOURCE_CHANGED,info:{source:e}})},retrieveClientTags:function(t){e.externalApi.requestTags({widgetId:h(),prefix:t})},setUploadTags:function(e){i[_.b.SET_UPLOADER_TAGS]({tags:e}),O({event:a.TAGS,info:{tags:e}})},setUploadPublicId:function(e){i[_.b.SET_UPLOADER_PUBLICID]({id:e}),O({event:a.PUBLICID,info:{id:e}})},retryUploads:function(e){S.processRetries(e)},hide:function(){e.externalApi.sendHide({widgetId:h()})},setWidgetViewType:function(e){O({event:a.WIDGET_VIEW_TYPE_CHANGE,info:{type:e}})},sendShowCompleted:function(e){var t=X(s()),n=Object.keys(t).reduce(function(n,o){return~e.indexOf(o)?n.concat(t[o]):n},[]);O({event:a.SHOW_COMPLETED,info:{items:n}})},getStore:function(){return e.store}})},Ze=n("./uploader/store/index.js"),$e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je=Object(l.c)(),et=!1,tt=function(e){Je.log("[uploader]: creating loader with options: ",e);var t=Object(Ze.default)(),n=Object(_.a)(t.dispatch);n[_.b.SET_UPLOADER_QS_PARAMS]({params:e.qsParams});var o,r,a,s=e.createExternalInterface({qsParams:e.qsParams,actions:n}),i=Ke({actions:n,getState:t.getState,externalApi:s,store:t});return r=function(e,t){i.processStateChange(e,t);var o,r,a=z(e);if(!a.info&&!a.onDevConsole){var s=V(e);s&&(o=s.cloud_name,r=n,et||(et=!0,Object(S.getCloudInfo)(o).then(function(e){et=!1,Je.log("[uploader]: retrieve cloud info for cloud: "+o+": ",e),r[_.b.SET_UPLOADER_CLOUD_INFO]({info:e})}).catch(function(){et=!1})))}},a=(o=t).getState(),o.subscribe(function(){var e=o.getState();if(e!==a){var t=a;a=e,r(e,t)}}),R.a.widget("blueimp.fileupload",R.a.blueimp.fileupload,{processActions:{debounce:function(e){var t=R.a.Deferred();return setTimeout(function(){t.resolveWith(this,[e])},1e3),t.promise()},validate_image_min_size:function(e){var t=R.a.Deferred(),n=e.files[0],o=this;function r(n){var r,a,s,i;if(r=n.naturalWidth,a=n.naturalHeight,s=e.imageMinWidth,i=e.imageMinHeight,Object(c.validateMinDimensions)(r,a,s,i))t.resolveWith(o,[e]);else{var u=Object(c.constructMinDimensionsInvalidMessage)(r,a,e.imageMinWidth,e.imageMinHeight);e.files.error=!0,e.files[0]={error:u},t.rejectWith(o,[e])}}if("object"===(void 0===n?"undefined":$e(n)))e.img?r(e.img):t.resolveWith(o,[e]);else if("string"==typeof n){var a=new Image;a.addEventListener("load",function(e){setTimeout(function(){r(a)},100)},!1),a.addEventListener("error",function(){t.resolveWith(o,[e])}),a.src=n}return t.promise()}}}),i},nt=this;function ot(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){return function o(r,a){try{var s=t[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});e(i)}("next")})}}var rt,at=Object(l.c)(),st=(rt=ot(regeneratorRuntime.mark(function e(t,n){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{});case 1:case"end":return e.stop()}},e,nt)})),function(e,t){return rt.apply(this,arguments)}),it=ot(regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,n=void 0,void 0,f=Object(u.parse)(self.location.search,{ignoreQueryPrefix:!0}),(a={viewType:f.inline?o.a.VIEW_TYPES.INLINE:o.a.VIEW_TYPES.MODAL,debug:f.debug,cloud_name:f.cloud_name,authFlow:f.authFlow,pmHost:f.pmHost}).debug&&Object(l.d)(l.a.LOG),at.log("[uploadInitializer]: loaded qs params : ",a),!a.authFlow){e.next=9;break}at.log("[uploadInitializer]: initializing dummy uploader for auth flow"),void 0,t={on:function(e,t){e===r.UPLOADER_READY&&t()},renderUploadField:c=function(){},isShowingOnStart:function(){return!1},setCurrentSource:c,getStore:function(){return{}},getConfig:function(){return{cloud_name:"!!dummy_uploader!!"}}},e.next=19;break;case 9:if(i=a,!Object(d.b)()||!Object({NODE_ENV:"production",REDUCERS:["src/queue/reducers","src/root/reducers","src/tabs/Camera/reducers","src/tabs/Dropbox/reducers","src/tabs/Facebook/reducers","src/tabs/GoogleDrive/reducers","src/tabs/ImageSearch/reducers","src/tabs/Instagram/reducers"],ROUTES:["src/queue/routes","src/tabs/Camera/routes","src/tabs/Dropbox/routes","src/tabs/Facebook/routes","src/tabs/GoogleDrive/routes","src/tabs/ImageSearch/routes","src/tabs/Instagram/routes","src/tabs/Local/routes","src/tabs/URL/routes"],TRANSLATIONS:["src/queue/translations","src/root/translations","src/tabs/Camera/translations","src/tabs/Dropbox/translations","src/tabs/Facebook/translations","src/tabs/GoogleDrive/translations","src/tabs/ImageSearch/translations","src/tabs/Instagram/translations","src/tabs/Local/translations","src/tabs/URL/translations"]}).UW_CONFIG||i.viewType!==o.a.VIEW_TYPES.INLINE){e.next=17;break}return n=Object({NODE_ENV:"production",REDUCERS:["src/queue/reducers","src/root/reducers","src/tabs/Camera/reducers","src/tabs/Dropbox/reducers","src/tabs/Facebook/reducers","src/tabs/GoogleDrive/reducers","src/tabs/ImageSearch/reducers","src/tabs/Instagram/reducers"],ROUTES:["src/queue/routes","src/tabs/Camera/routes","src/tabs/Dropbox/routes","src/tabs/Facebook/routes","src/tabs/GoogleDrive/routes","src/tabs/ImageSearch/routes","src/tabs/Instagram/routes","src/tabs/Local/routes","src/tabs/URL/routes"],TRANSLATIONS:["src/queue/translations","src/root/translations","src/tabs/Camera/translations","src/tabs/Dropbox/translations","src/tabs/Facebook/translations","src/tabs/GoogleDrive/translations","src/tabs/ImageSearch/translations","src/tabs/Instagram/translations","src/tabs/Local/translations","src/tabs/URL/translations"]}).UW_CONFIG,at.log("[uploadInitializer]: initializing uploader instance from dev env config: ",n),e.next=14,st(n,a);case 14:t=e.sent,e.next=19;break;case 17:at.log("[uploadInitializer]: initializing uploader instance from post message"),s=a,at.log("[uploadInitializer]: awaiting for init msg from external code"),t=tt({createExternalInterface:O,qsParams:s,appConfig:p.a});case 19:return e.abrupt("return",t);case 20:case"end":return e.stop()}var s,i,c,f},e,nt)}));n.d(t,"EVENT_TYPES",function(){return r}),n.d(t,"MESSAGE_TYPES",function(){return s}),n.d(t,"EXT_EVENTS",function(){return a}),n.d(t,"consts",function(){return o.a}),n.d(t,"defaults",function(){return i.a}),n.d(t,"utils",function(){return c}),n.d(t,"initializeUploader",function(){return it}),n.d(t,"configParser",function(){return D})},"./uploader/store/actions.js":function(e,t,n){"use strict";n.d(t,"b",function(){return r});var o=n("./common/actionsBase.js"),r={SET_UPLOADER_CONFIG:"SET_UPLOADER_CONFIG",SET_UPLOADER_CLOUD_INFO:"SET_UPLOADER_CLOUD_INFO",SET_UPLOADER_QS_PARAMS:"SET_UPLOADER_QS_PARAMS",SET_UPLOADER_CURRENT_SOURCE:"SET_UPLOADER_CURRENT_SOURCE",SET_UPLOADER_BATCH_PREPARED:"SET_UPLOADER_BATCH_PREPARED",SET_UPLOADER_FILE_PROGRESS:"SET_UPLOADER_FILE_PROGRESS",SET_UPLOADER_FILE_PAUSED:"SET_UPLOADER_FILE_PAUSED",SET_UPLOADER_QUEUE_RUNNING_FOR_FILE:"SET_UPLOADER_QUEUE_RUNNING_FOR_FILE",SET_UPLOADER_FILE_DONE:"SET_UPLOADER_FILE_DONE",SET_UPLOADER_FILE_DATA_METHODS:"SET_UPLOADER_FILE_DATA_METHODS",SET_UPLOADER_FILE_PREVIEW:"SET_UPLOADER_FILE_PREVIEW",SET_UPLOADER_SHOW:"SET_UPLOADER_SHOW",SET_UPLOADER_HIDE:"SET_UPLOADER_HIDE",SET_UPLOADER_MINIMIZE:"SET_UPLOADER_MINIMIZE",SET_UPLOADER_QUEUE_FINISHED:"SET_UPLOADER_QUEUE_FINISHED",SET_UPLOADER_PUBLICID:"SET_UPLOAD_PUBLICID",SET_UPLOADER_TAGS:"SET_UPLOAD_TAGS",SET_UPLOADER_RETRIEVED_TAGS:"SET_UPLOADER_RETRIEVED_TAGS",SET_UPLOADER_RETRY_FILES:"SET_UPLOADER_RETRY_FILES",SET_UPLOADER_FILE_QUEUED:"SET_UPLOADER_FILE_QUEUED",SET_UPLOADER_ADD_CLIENT_UPLOAD:"SET_UPLOADER_ADD_CLIENT_UPLOAD",SET_UPLOADER_PID_COUNTER:"SET_UPLOADER_PID_COUNTER",SET_UPLOADER_QUEUE_PRECALLS_PENDING:"SET_UPLOADER_QUEUE_PRECALLS_PENDING",CLEAR_UPLOADER_QUEUES:"CLEAR_UPLOADER_QUEUES",CLEAR_UPLOADER_CLIENT_BATCH:"CLEAR_UPLOADER_CLIENT_BATCH",CANCEL_UPLOADER_FILES:"CANCEL_UPLOADER_FILES",START_CLEAR_QUEUES:"START_CLEAR_QUEUES",END_CLEAR_QUEUES:"END_CLEAR_QUEUES"};t.a=Object(o.d)(r,{})},"./uploader/store/index.js":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n("../node_modules/redux/es/index.js"),a=n("../node_modules/redux-thunk/lib/index.js"),s=n.n(a),i=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),c=n.n(i),u=n("../node_modules/lodash/fp.js"),l=n("../node_modules/voca/index.js"),d=n("../node_modules/fbjs/lib/shallowEqual.js"),p=n.n(d),f=n("./common/reducerBase.js"),m=n("./utils/seamlessUtils.js"),E=n("./uploader/common/utils.js"),_=n("./uploader/configParser.js"),b=n("./uploader/common/consts.js"),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},h=n("./uploader/store/actions.js"),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},S=/(dev\.)?cloudinary.com$/,v=/^https:\/\//,T=function(e,t){var n=t.fileQueueIndex[e];if(!~n)throw new Error("UPLOADER.REDUCER - impossible state transition! no queue in store contains file with id: "+e);return n},j=function(e,t){var n,o=t.file,r=0,a="",s=null;return Object(l.isString)(o)?s=Object(E.getFileNameFromUrl)(o):(s=o.name,r=o.size,a=o.type),n={id:e,name:s,size:r,type:a,partOfBatch:t.partOfBatch,paused:t.delayed,batchId:t.batchId,publicId:t.publicId,publicIdCounter:t.publicIdCounter,camera:!!o.camera},c()(g({id:"",batchId:"",name:"",size:0,type:"",dimensions:[0,0],status:null,progress:0,done:!1,failed:!1,aborted:!1,paused:!1,partOfBatch:!1,publicId:"",preparedParams:{},camera:!1},n))},I=function(e,t){var n=e;return v.test(e)||(n=!0===t.show_insecure_preview?n:null),n},x=function(e,t){return{getPreviewObject:function(){return Object(l.isString)(e)?{url:I(e,t)}:{preview:e.preview,url:I(e.file,t)}},getFileObject:function(){return Object(l.isString)(e)?e:e.file||e}}},C=function(e,t,n){var o,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;r=r||T(t,e);var a,s,i,c=e.queues[r].merge({filesData:(o={},o[t]=O({},n,{statusText:(a=n,s=a.status,i="",s&&(Object(l.isString)(s)&&s!==b.a.ABORTED?i=s:s.error&&s.error.message&&(i=s.error.message)),i)}),o)},{deep:!0});return Object(m.b)(e,["queues"],r,1,c)},y=function(e,t,n,o){return e.setIn(["queues",t,"files",n,"getPreviewObject"],o)},A=function(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return(e=C(e,t,n,o)).setIn(["fileVersions",t],e.fileVersions[t]+1)},R=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t=O({sameConfig:!(n.config||!e),config:e?e.config:null},n),c()(g({queueId:Object(u.uniqueId)("u-queue"),config:null,sameConfig:!1,files:{},filesData:{},ids:[],status:b.a.QUEUE_STATUS.NONE,pendingPreCalls:!1},t))},D=function(e,t,n,o){return(o=Object(m.b)(o,"ids",o.ids.indexOf(t),1).asMutable()).files=c.a.without(o.files,t),o.filesData=c.a.without(o.filesData,t),e=Object(m.b)(e,["queues"],n,1,o),Object(m.c)(e,"fileQueueIndex",t)},L=function(e,t,n){var o,r,a,s,i,c,u,l=e.id,d=j(l,e),p=n.queues.findIndex(function(e){return e.status===b.a.QUEUE_STATUS.NONE});if(~p)o=n,r=l,a=d,s=x(e.file,n.queues[p].config),i=t,c=p,u=(u=(u=(u=o.queues[c]).setIn(["filesData",r],a)).setIn(["files",r],s)).set("pendingPreCalls",i),u=Object(m.a)(u,"ids",r),n=o.setIn(["queues",c],u);else{var f,E,_=n.queues.length,g=n.queues[_-1];if(!g)throw new Error("UPLOADER.REDUCER - impossible state transition! no queue in store when adding a new file");n=Object(m.a)(n,"queues",R(g,{filesData:(f={},f[l]=d,f),files:(E={},E[l]=x(e.file,g.config),E),ids:[l],pendingPreCalls:t})),p=_}return n.setIn(["fileQueueIndex",l],p).setIn(["fileVersions",l],0)},U=function(e,t,n){var o=e.queues.length,r={},a={},s=[],i={},c={};n.forEach(function(n){var u,l=e.queues[t];r[n]=(u=l.filesData[n],O({},u,{status:null,progress:0,done:!1,failed:!1,aborted:!1,paused:!1})),a[n]=l.files[n],s.push(n),i[n]=o,c[n]=0,e=D(e,n,t,l)});var u=e.queues[t];return(e=Object(m.a)(e,"queues",R(u,{filesData:r,files:a,ids:s}))).merge({fileQueueIndex:i},{deep:!0}).merge({fileVersions:c},{deep:!0})},P=function(e,t){return""===e||e&&t.uploadPublicId!==e?t.set("uploadPublicId",e||""):t},w=function(e,t){return e&&!p()(t.uploadTags,e)?t.set("uploadTags",e):t},N=function(e,t){return t.set("clearQueuesInProgress",e)},M=Object(f.a)(c()({id:null,showOnStart:!1,qsParams:null,cloudInfo:null,source:null,showCounter:0,minimizeCounter:0,showOptions:null,hideCounter:0,hideOptions:null,queues:[],retrievedTags:[],uploadPublicId:null,uploadTags:[],clientUploadBatch:null,fileQueueIndex:{},fileVersions:{},publicIdCounters:{},onDevConsole:!1,onConsole:!1,successCounter:0,clearQueuesInProgress:!1}),((o={})[h.b.SET_UPLOADER_CONFIG]=function(e,t){var n=t.payload,o=e.queues.length,r=e.id||n.config.widgetId||Object(u.uniqueId)("uw"),a=n.config.showOnStart,s=o?{}:e.qsParams,i=null,c=Object(_.configMerger)({},n.config,s);return o&&(i=e.queues[o-1],c=Object(_.configMerger)({},i.config,c)),c=Object(_.default)(c),e=!o||e.queues[o-1].ids.length?Object(m.a)(e,"queues",R(i,{config:c})):e.setIn(["queues",o-1,"config"],c),e=P(c.public_id,e),(e=w(c.tags,e)).merge({id:r,showOnStart:a})},o[h.b.SET_UPLOADER_CLOUD_INFO]=function(e,t){var n=t.payload;return e.set("cloudInfo",n.info)},o[h.b.SET_UPLOADER_QS_PARAMS]=function(e,t){var n=t.payload,o=n.params.pmHost.match(S);return e.merge({qsParams:n.params,onConsole:!!o,onDevConsole:!(!o||!o[1])})},o[h.b.SET_UPLOADER_CURRENT_SOURCE]=function(e,t){var n=t.payload;return e.set("source",n.source)},o[h.b.SET_UPLOADER_FILE_QUEUED]=function(e,t){var n=t.payload;return n.files.forEach(function(t){e=L(t,n.pendingPreCalls,e)}),e},o[h.b.SET_UPLOADER_BATCH_PREPARED]=function(e,t){var n=t.payload;return Object.keys(n.files).forEach(function(t){e=C(e,t,{preparedParams:n.files[t]})}),e},o[h.b.SET_UPLOADER_SHOW]=function(e,t){var n=t.payload;return e.merge({showCounter:e.showCounter+1,showOptions:n?n.options:null,source:n&&n.source||e.source})},o[h.b.SET_UPLOADER_MINIMIZE]=function(e){return e.set("minimizeCounter",e.minimizeCounter+1)},o[h.b.SET_UPLOADER_QUEUE_RUNNING_FOR_FILE]=function(e,t){var n=t.payload,o=e.queues.findIndex(function(e){return e.status===b.a.QUEUE_STATUS.RUNNING});if(~o){if(!~e.queues[o].ids.indexOf(n.id))throw new Error("UPLOADER.REDUCER - impossible state transition! cant set more than one running queue at a time. file id = "+n.id)}else{var r=T(n.id,e);e=e.setIn(["queues",r,"status"],b.a.QUEUE_STATUS.RUNNING)}return e},o[h.b.SET_UPLOADER_FILE_DONE]=function(e,t){var n=t.payload,o=T(n.id,e);e=A(e,n.id,{status:n.success?"success":n.result,uploadInfo:n.success?n.result:null,aborted:n.result===b.a.ABORTED,failed:!n.success,done:!0,paused:!1}),function(e,t,n,o){var r=!1;if(e&&e.secure_url&&"image"===e.resource_type&&!/.pdf$/.test(e.secure_url)){var a=t.queues[n].files[o].getPreviewObject();r=!a||!a.preview}return r}(n.result,e,o,n.id)&&(e=y(e,o,n.id,function(){return{url:n.result.secure_url}}));var r=e.queues[o];return Object.values(r.filesData).find(function(e){return!e.done})||(e=e.setIn(["queues",o,"status"],b.a.QUEUE_STATUS.FINISHED)),n.success&&(e=e.set("successCounter",e.successCounter+1)),e},o[h.b.SET_UPLOADER_FILE_PROGRESS]=function(e,t){var n=t.payload;return A(e,n.id,{progress:n.progress,paused:!1})},o[h.b.SET_UPLOADER_HIDE]=function(e,t){var n=t.payload;return e.merge({hideOptions:n.options||null,hideCounter:e.hideCounter+1})},o[h.b.CLEAR_UPLOADER_QUEUES]=function(e){var t=e.queues[e.queues.length-1];return e.merge({queues:[R(t)],fileQueueIndex:{},fileVersions:{},publicIdCounters:{},successCounter:0,uploadPublicId:t.config.public_id||null,uploadTags:t.config.tags||[]})},o[h.b.SET_UPLOADER_RETRIEVED_TAGS]=function(e,t){var n=t.payload;return e.set("retrievedTags",n.tags||[])},o[h.b.SET_UPLOADER_PUBLICID]=function(e,t){var n=t.payload;return P(n.id,e)},o[h.b.SET_UPLOADER_TAGS]=function(e,t){var n=t.payload;return w(n.tags,e)},o[h.b.SET_UPLOADER_QUEUE_FINISHED]=function(e,t){var n,o=t.payload,r=(n=o.id,e.queues.findIndex(function(e){return e.id===n}));return~r?e.setIn(["queues",r,"status"],b.a.QUEUE_STATUS.FINISHED):e},o[h.b.SET_UPLOADER_RETRY_FILES]=function(e,t){var n=t.payload,o=Object.keys(e.fileQueueIndex).reduce(function(t,o){if(n.retryAll||~n.ids.indexOf(o)){var r=e.fileQueueIndex[o];e.queues[r].filesData[o].failed&&(t[r]=t[r]?t[r].concat(o):[o])}return t},{});return Object.keys(o).forEach(function(t){e=U(e,parseInt(t),o[t])}),e},o[h.b.SET_UPLOADER_ADD_CLIENT_UPLOAD]=function(e,t){var n=t.payload;return e=e.clientUploadBatch?Object(m.a)(e,["clientUploadBatch","files"],n.file):e.set("clientUploadBatch",{files:[n.file],count:n.count})},o[h.b.CLEAR_UPLOADER_CLIENT_BATCH]=function(e){return e.set("clientUploadBatch",null)},o[h.b.SET_UPLOADER_FILE_PAUSED]=function(e,t){var n=t.payload;return A(e,n.id,{paused:!0})},o[h.b.SET_UPLOADER_FILE_DATA_METHODS]=function(e,t){var n,o,r,a,s,i,c=t.payload;return n=e,o=c.id,r=c.methods,s=T(o,n),i=n.queues[s].merge({files:(a={},a[o]=r,a)},{deep:!0}),Object(m.b)(n,["queues"],s,1,i)},o[h.b.SET_UPLOADER_FILE_PREVIEW]=function(e,t){var n=t.payload,o=n.id;if(e=A(e,o,{dimensions:Object(E.calculateDimensions)({img:n.img,exif:n.exif})}),n.img){var r=T(o,e),a=e.queues[r].files[o].getPreviewObject();a&&!Object(l.isString)(a)&&(a.preview=n.preview),e=y(e,r,o,function(){return a})}return e},o[h.b.SET_UPLOADER_PID_COUNTER]=function(e,t){var n=t.payload;return e.setIn(["publicIdCounters",n.publicId],n.counter)},o[h.b.SET_UPLOADER_QUEUE_PRECALLS_PENDING]=function(e,t){var n=t.payload,o=T(n.files[0].id,e);if(!n.pending&&e.queues[o].pendingPreCalls){var r=e.queues[o].ids,a=e.fileVersions,s=r.reduce(function(e,t){return e[t]=a[t]+1,e},{});e=e.merge({fileVersions:s},{deep:!0})}return e.setIn(["queues",o,"pendingPreCalls"],n.pending)},o[h.b.CANCEL_UPLOADER_FILES]=function(e,t){var n,o,r,a,s,i,c,u,l=t.payload,d=T(l.files[0].id,e);return n=e,o=l.files,r=d,i=n.queues[r].filesData[o[0].id],c=i.publicIdCounter,u=void 0,~c&&(c?(a=i.publicId,s=c,u=a.substr(0,a.length-(1+s.toString().length))):u=i.publicId,n=n.setIn(["publicIdCounters",u],c)),e=n,l.files.forEach(function(t){var n,o,r,a;n=e,o=t.id,r=d,a=e.queues[d],n=D(n,o,r,a),e=Object(m.c)(n,"fileVersions",o)}),e},o[h.b.START_CLEAR_QUEUES]=function(e){return N(!0,e)},o[h.b.END_CLEAR_QUEUES]=function(e){return N(!1,e)},o)),F=n("./common/logger.js"),k=Object(F.b)(),G=[s.a,function(e){return function(t){return function(n){var o=void 0,r=!1;if(k.getLevel()===F.a.LOG)try{var a=e.getState();o=t(n);var s=e.getState();k.groupCollapsed("Uploader Store Log For -> "+n.type),r=!0,k.log("%c dispatched action TYPE - "+n.type,"color:#057aff;"),n.payload&&k.log("%c dispatched action PAYLOAD - ","color:#20b832;",n.payload),s!==a?(k.log("previous state - ",a.uploader),k.log("next state - ",s.uploader)):(k.log("%c state hasn't changed after action","color:#5b616a"),k.log("%c state - ","color:#5b616a",s.uploader))}catch(e){k.warn("[Store Logger] failed to log store action details",e)}return r&&k.groupEnd(),o||t(n)}}}];t.default=function(){return Object(r.createStore)(Object(r.combineReducers)({uploader:M}),r.applyMiddleware.apply(void 0,G))}},"./utils/binaryToFile.js":function(e,t,n){"use strict";var o=n("./utils/domUtils.js"),r=this;var a,s,i=function(e){if(!e.indexOf("data:")){var t=e.match(/.*,(.*)/);e=t&&t[1]||e,e=atob(e)}return e},c=function(e,t){return new Blob([e],{type:t.type})};t.a=(a=regeneratorRuntime.mark(function e(t,n){var a,s,u;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t=i(t),a=new Uint8Array(t.length),s=0;s<t.length;s++)a[s]=t.charCodeAt(s);u=void 0;try{u=Object(o.d)()?c(a,n):(r=n,new File([a],r.name,{type:r.type,lastModified:r.lastModified}))}catch(e){u=c(a,n)}return e.abrupt("return",u);case 6:case"end":return e.stop()}var r},e,r)}),s=function(){var e=a.apply(this,arguments);return new Promise(function(t,n){return function o(r,a){try{var s=e[r](a),i=s.value}catch(e){return void n(e)}if(!s.done)return Promise.resolve(i).then(function(e){o("next",e)},function(e){o("throw",e)});t(i)}("next")})},function(e,t){return s.apply(this,arguments)})},"./utils/camera.js":function(e,t,n){"use strict";n.d(t,"a",function(){return o}),n.d(t,"c",function(){return a});var o={PermissionDeniedError:"PERMISSION_DENIED",DevicesNotFoundError:"NO_DEVICE",Unknown:"UNKNOWN"},r=function(e){return o[e.name]||o.Unknown},a=function(){return self.navigator.mediaDevices&&self.navigator.mediaDevices.getUserMedia||self.navigator.getUserMedia};t.b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return self.navigator.mediaDevices&&self.navigator.mediaDevices.getUserMedia?self.navigator.mediaDevices.getUserMedia(e).catch(function(e){return Promise.reject({reason:r(e)})}):new Promise(function(t,n){self.navigator.getUserMedia(e,t,function(e){n({reason:r(e)})})})}},"./utils/domUtils.js":function(e,t,n){"use strict";var o={};n.d(o,"setItem",function(){return l}),n.d(o,"removeItem",function(){return d}),n.d(o,"getItem",function(){return p}),n.d(o,"clear",function(){return f}),n.d(o,"isFake",function(){return m});var r=n("../node_modules/mobile-detect/mobile-detect.js"),a=n.n(r),s=n("../node_modules/voca/index.js"),i=Symbol(),c=null,u=function(){if(!c)try{c=self.sessionStorage;c.setItem("__ssTest","xx"),c.removeItem("__ssTest")}catch(t){c=self[i]=(e={},{_fake:!0,setItem:function(t,n){return e[t]=n.toString()},removeItem:function(t){e.hasOwnProperty(t)&&delete e[t]},getItem:function(t){return e.hasOwnProperty(t)?e[t]:null},clear:function(){e={}}})}var e;return c},l=function(e,t){return Object(s.isString)(t)||(t=JSON.stringify(t)),u().setItem(e,t)},d=function(e){return u().removeItem(e)},p=function(e){return u().getItem(e)},f=function(){return u().clear()},m=function(){return!!u()._fake},E=n("./utils/camera.js");n.d(t,"d",function(){return h}),n.d(t,"c",function(){return g}),n.d(t,"e",function(){return O}),n.d(t,"a",function(){return S}),n.d(t,"f",function(){return v}),n.d(t,"g",function(){return o}),n.d(t,"b",function(){return E.b});var _=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),b=null,g=function(){if(null===b){var e=new a.a(self.navigator.userAgent);b=!!e.mobile()}return b},h=function(){return _},O=function(e,t){var n=self.matchMedia(e);return n.addListener(t),n},S=function(e,t){var n=setTimeout(e,t);return function(){return clearTimeout(n)}},v=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:570,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:440,r="width="+n+",height="+o+",\n            top="+((self.outerHeight-o)/2).toString()+",\n            left="+((self.outerWidth-n)/2).toString();return self.open(e,t,r)}},"./utils/envUtils.js":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c}),n.d(t,"d",function(){return l}),n.d(t,"c",function(){return d});var o=n("../node_modules/lodash/fp.js"),r=(n.n(o),"development"),a="staging",s=function(){return i()?r:self.location&&0===self.location.host.indexOf("widget-staging")?a:"production"},i=function(){return!!~self.location.search.indexOf("dev=true")},c=function(){return s()===r||i()},u=function(e,t,o){var r=Object({NODE_ENV:"production",REDUCERS:["src/queue/reducers","src/root/reducers","src/tabs/Camera/reducers","src/tabs/Dropbox/reducers","src/tabs/Facebook/reducers","src/tabs/GoogleDrive/reducers","src/tabs/ImageSearch/reducers","src/tabs/Instagram/reducers"],ROUTES:["src/queue/routes","src/tabs/Camera/routes","src/tabs/Dropbox/routes","src/tabs/Facebook/routes","src/tabs/GoogleDrive/routes","src/tabs/ImageSearch/routes","src/tabs/Instagram/routes","src/tabs/Local/routes","src/tabs/URL/routes"],TRANSLATIONS:["src/queue/translations","src/root/translations","src/tabs/Camera/translations","src/tabs/Dropbox/translations","src/tabs/Facebook/translations","src/tabs/GoogleDrive/translations","src/tabs/ImageSearch/translations","src/tabs/Instagram/translations","src/tabs/Local/translations","src/tabs/URL/translations"]})[e]||[];return("string"==typeof r?r.split(","):r).reduce(function(e,t){var r=n("./.. recursive ^\\.\\/.*\\/index\\.js$")("./"+t+"/index.js").default;return o(e,r,t)},t)},l=function(e,t){return u(e,{},function(e,n,r){return t?e=Object(o.merge)(e,n):e[r]=n,e})},d=function(e){return u(e,[],function(e,t){return e.concat(t)})}},"./utils/seamlessUtils.js":function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return i}),n.d(t,"c",function(){return u});var o=n("../node_modules/seamless-immutable/seamless-immutable.development.js"),r=n.n(o),a=n("../node_modules/voca/index.js"),s=(n.n(a),function(e,t,n){return e.updateIn(Array.isArray(t)?t:[t],function(e){return e.concat(n)})}),i=function(e,t,n){for(var o=arguments.length,r=Array(o>4?o-4:0),a=4;a<o;a++)r[a-4]=arguments[a];var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return e.updateIn(Array.isArray(t)?t:[t],function(e){return function(e,t,n){for(var o=arguments.length,r=Array(o>3?o-3:0),a=3;a<o;a++)r[a-3]=arguments[a];var s;return(s=e=e.asMutable()).splice.apply(s,[t,n].concat(r)),e}.apply(void 0,[e,n,s].concat(r))})},c=function(e){return null===e||void 0===e||Array.isArray(e)?0===e.length:Object(a.isString)(e)&&Object(a.isBlank)(e)},u=function(e,t,n){for(var o=arguments.length,a=Array(o>3?o-3:0),s=3;s<o;s++)a[s-3]=arguments[s];t=Array.isArray(t)?t:c(t)?null:[t],n=Array.isArray(n)?n.concat(a):[n].concat(a);var i=function(e){return r.a.without(e,n)};return c(t)?r.a.without(e,n):t.length>1?e.setIn(t,e.updateIn(t,i)):e.set(t[0],i(e[t[0]]))}},0:function(e,t,n){e.exports=n("./startApp.js")},1:function(e,t){}},[0]);
//# sourceMappingURL=app.ad44f63971e23c190a53.js.map